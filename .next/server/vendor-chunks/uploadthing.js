"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/uploadthing";
exports.ids = ["vendor-chunks/uploadthing"];
exports.modules = {

/***/ "(action-browser)/./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js":
/*!****************************************************************!*\
  !*** ./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logDeprecationWarning: () => (/* binding */ logDeprecationWarning)\n/* harmony export */ });\n//#region src/_internal/deprecations.ts\nconst logDeprecationWarning = (message) => {\n\tconsole.warn(`⚠️ [uploadthing][deprecated] ${message}`);\n};\n\n//#endregion\n\n//# sourceMappingURL=deprecations-pLmw6Ytd.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L2RlcHJlY2F0aW9ucy1wTG13Nll0ZC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBLDhDQUE4QyxRQUFRO0FBQ3REOztBQUVBO0FBQ2lDO0FBQ2pDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYm9vay1zcGhlcmUvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9kZXByZWNhdGlvbnMtcExtdzZZdGQuanM/OGYwNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL19pbnRlcm5hbC9kZXByZWNhdGlvbnMudHNcbmNvbnN0IGxvZ0RlcHJlY2F0aW9uV2FybmluZyA9IChtZXNzYWdlKSA9PiB7XG5cdGNvbnNvbGUud2Fybihg4pqg77iPIFt1cGxvYWR0aGluZ11bZGVwcmVjYXRlZF0gJHttZXNzYWdlfWApO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBsb2dEZXByZWNhdGlvbldhcm5pbmcgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlcHJlY2F0aW9ucy1wTG13Nll0ZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/uploadthing/dist/package-DpScpvTA.js":
/*!***********************************************************!*\
  !*** ./node_modules/uploadthing/dist/package-DpScpvTA.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n//#region package.json\nvar version = \"7.7.4\";\n\n//#endregion\n\n//# sourceMappingURL=package-DpScpvTA.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L3BhY2thZ2UtRHBTY3B2VEEuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7O0FBRUE7QUFDbUI7QUFDbkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ib29rLXNwaGVyZS8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L3BhY2thZ2UtRHBTY3B2VEEuanM/MDA5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gcGFja2FnZS5qc29uXG52YXIgdmVyc2lvbiA9IFwiNy43LjRcIjtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB2ZXJzaW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWNrYWdlLURwU2NwdlRBLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/uploadthing/dist/package-DpScpvTA.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/uploadthing/dist/shared-schemas-BmG5ARoX.js":
/*!******************************************************************!*\
  !*** ./node_modules/uploadthing/dist/shared-schemas-BmG5ARoX.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ActionType: () => (/* binding */ ActionType),\n/* harmony export */   CallbackResultResponse: () => (/* binding */ CallbackResultResponse),\n/* harmony export */   MetadataFetchResponse: () => (/* binding */ MetadataFetchResponse),\n/* harmony export */   MetadataFetchStreamPart: () => (/* binding */ MetadataFetchStreamPart),\n/* harmony export */   UploadActionPayload: () => (/* binding */ UploadActionPayload),\n/* harmony export */   UploadThingHook: () => (/* binding */ UploadThingHook),\n/* harmony export */   UploadThingToken: () => (/* binding */ UploadThingToken),\n/* harmony export */   UploadedFileData: () => (/* binding */ UploadedFileData)\n/* harmony export */ });\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(action-browser)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Schema */ \"(action-browser)/./node_modules/effect/dist/esm/Schema.js\");\n\n\n\n//#region src/_internal/shared-schemas.ts\nconst ContentDispositionSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(..._uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.ValidContentDispositions);\nconst ACLSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(..._uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.ValidACLs);\n/**\n* Valid options for the `?actionType` query param\n*/\nconst ActionType = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(\"upload\");\n/**\n* Valid options for the `uploadthing-hook` header\n* for requests coming from UT server\n*/\nconst UploadThingHook = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(\"callback\", \"error\");\n/**\n* =============================================================================\n* =========================== Configuration ===================================\n* =============================================================================\n*/\nconst DecodeString = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.transform(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromSelf, effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String, {\n\tdecode: (data) => new TextDecoder().decode(data),\n\tencode: (data) => new TextEncoder().encode(data)\n});\nconst ParsedToken = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Struct({\n\tapiKey: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Redacted(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.startsWith(\"sk_\"))),\n\tappId: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tregions: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonEmptyArray(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String),\n\tingestHost: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optionalWith({ default: () => \"ingest.uploadthing.com\" }))\n});\nconst UploadThingToken = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromBase64.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.compose(DecodeString), effect_Schema__WEBPACK_IMPORTED_MODULE_0__.compose(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.parseJson(ParsedToken)));\n/**\n* =============================================================================\n* ======================== File Type Hierarchy ===============================\n* =============================================================================\n*/\n/**\n* Properties from the web File object, this is what the client sends when initiating an upload\n*/\nvar FileUploadData = class extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"FileUploadData\")({\n\tname: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tsize: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Number,\n\ttype: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tlastModified: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Number.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optional)\n}) {};\n/**\n* `.middleware()` can add a customId to the incoming file data\n*/\nvar FileUploadDataWithCustomId = class extends FileUploadData.extend(\"FileUploadDataWithCustomId\")({ customId: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NullOr(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String) }) {};\n/**\n* When files are uploaded, we get back\n* - a key\n* - URLs for the file\n* - the hash (md5-hex) of the uploaded file's contents\n*/\nvar UploadedFileData = class extends FileUploadDataWithCustomId.extend(\"UploadedFileData\")({\n\tkey: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\turl: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tappUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tufsUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tfileHash: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String\n}) {};\nvar MetadataFetchStreamPart = class extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"MetadataFetchStreamPart\")({\n\tpayload: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tsignature: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\thook: UploadThingHook\n}) {};\nvar MetadataFetchResponse = class extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"MetadataFetchResponse\")({ ok: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Boolean }) {};\nvar CallbackResultResponse = class extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"CallbackResultResponse\")({ ok: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Boolean }) {};\n/**\n* =============================================================================\n* ======================== Client Action Payloads ============================\n* =============================================================================\n*/\nvar UploadActionPayload = class extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"UploadActionPayload\")({\n\tfiles: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Array(FileUploadData),\n\tinput: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Unknown\n}) {};\n\n//#endregion\n\n//# sourceMappingURL=shared-schemas-BmG5ARoX.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L3NoYXJlZC1zY2hlbWFzLUJtRzVBUm9YLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMEU7QUFDdkM7O0FBRW5DO0FBQ0EsaUNBQWlDLGtEQUFTLElBQUkseUVBQXdCO0FBQ3RFLGtCQUFrQixrREFBUyxJQUFJLDBEQUFTO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixrREFBUztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrREFBUztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG9EQUFXLENBQUMsNkRBQW9CLEVBQUUsaURBQVE7QUFDL0Q7QUFDQTtBQUNBLENBQUM7QUFDRCxvQkFBb0IsaURBQVE7QUFDNUIsU0FBUyxtREFBVSxDQUFDLGlEQUFRLE1BQU0scURBQVk7QUFDOUMsUUFBUSxpREFBUTtBQUNoQixVQUFVLHdEQUFlLENBQUMsaURBQVE7QUFDbEMsYUFBYSxpREFBUSxNQUFNLHVEQUFjLEdBQUcseUNBQXlDO0FBQ3JGLENBQUM7QUFDRCx5QkFBeUIsK0RBQXNCLE1BQU0sa0RBQVMsZ0JBQWdCLGtEQUFTLENBQUMsb0RBQVc7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxnREFBTztBQUMxQyxPQUFPLGlEQUFRO0FBQ2YsT0FBTyxpREFBUTtBQUNmLE9BQU8saURBQVE7QUFDZixlQUFlLGlEQUFRLE1BQU0sbURBQVU7QUFDdkMsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLHFHQUFxRyxVQUFVLGlEQUFRLENBQUMsaURBQVEsR0FBRztBQUNuSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0saURBQVE7QUFDZCxNQUFNLGlEQUFRO0FBQ2QsU0FBUyxpREFBUTtBQUNqQixTQUFTLGlEQUFRO0FBQ2pCLFdBQVcsaURBQVE7QUFDbkIsQ0FBQztBQUNELDRDQUE0QyxnREFBTztBQUNuRCxVQUFVLGlEQUFRO0FBQ2xCLFlBQVksaURBQVE7QUFDcEI7QUFDQSxDQUFDO0FBQ0QsMENBQTBDLGdEQUFPLDRCQUE0QixJQUFJLGtEQUFTLEVBQUU7QUFDNUYsMkNBQTJDLGdEQUFPLDZCQUE2QixJQUFJLGtEQUFTLEVBQUU7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxnREFBTztBQUMvQyxRQUFRLGdEQUFPO0FBQ2YsUUFBUSxrREFBUztBQUNqQixDQUFDOztBQUVEO0FBQ3dLO0FBQ3hLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYm9vay1zcGhlcmUvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9zaGFyZWQtc2NoZW1hcy1CbUc1QVJvWC5qcz9kMzliIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZhbGlkQUNMcywgVmFsaWRDb250ZW50RGlzcG9zaXRpb25zIH0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcbmltcG9ydCAqIGFzIFMgZnJvbSBcImVmZmVjdC9TY2hlbWFcIjtcblxuLy8jcmVnaW9uIHNyYy9faW50ZXJuYWwvc2hhcmVkLXNjaGVtYXMudHNcbmNvbnN0IENvbnRlbnREaXNwb3NpdGlvblNjaGVtYSA9IFMuTGl0ZXJhbCguLi5WYWxpZENvbnRlbnREaXNwb3NpdGlvbnMpO1xuY29uc3QgQUNMU2NoZW1hID0gUy5MaXRlcmFsKC4uLlZhbGlkQUNMcyk7XG4vKipcbiogVmFsaWQgb3B0aW9ucyBmb3IgdGhlIGA/YWN0aW9uVHlwZWAgcXVlcnkgcGFyYW1cbiovXG5jb25zdCBBY3Rpb25UeXBlID0gUy5MaXRlcmFsKFwidXBsb2FkXCIpO1xuLyoqXG4qIFZhbGlkIG9wdGlvbnMgZm9yIHRoZSBgdXBsb2FkdGhpbmctaG9va2AgaGVhZGVyXG4qIGZvciByZXF1ZXN0cyBjb21pbmcgZnJvbSBVVCBzZXJ2ZXJcbiovXG5jb25zdCBVcGxvYWRUaGluZ0hvb2sgPSBTLkxpdGVyYWwoXCJjYWxsYmFja1wiLCBcImVycm9yXCIpO1xuLyoqXG4qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4qID09PT09PT09PT09PT09PT09PT09PT09PT09PSBDb25maWd1cmF0aW9uID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4qL1xuY29uc3QgRGVjb2RlU3RyaW5nID0gUy50cmFuc2Zvcm0oUy5VaW50OEFycmF5RnJvbVNlbGYsIFMuU3RyaW5nLCB7XG5cdGRlY29kZTogKGRhdGEpID0+IG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShkYXRhKSxcblx0ZW5jb2RlOiAoZGF0YSkgPT4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGRhdGEpXG59KTtcbmNvbnN0IFBhcnNlZFRva2VuID0gUy5TdHJ1Y3Qoe1xuXHRhcGlLZXk6IFMuUmVkYWN0ZWQoUy5TdHJpbmcucGlwZShTLnN0YXJ0c1dpdGgoXCJza19cIikpKSxcblx0YXBwSWQ6IFMuU3RyaW5nLFxuXHRyZWdpb25zOiBTLk5vbkVtcHR5QXJyYXkoUy5TdHJpbmcpLFxuXHRpbmdlc3RIb3N0OiBTLlN0cmluZy5waXBlKFMub3B0aW9uYWxXaXRoKHsgZGVmYXVsdDogKCkgPT4gXCJpbmdlc3QudXBsb2FkdGhpbmcuY29tXCIgfSkpXG59KTtcbmNvbnN0IFVwbG9hZFRoaW5nVG9rZW4gPSBTLlVpbnQ4QXJyYXlGcm9tQmFzZTY0LnBpcGUoUy5jb21wb3NlKERlY29kZVN0cmluZyksIFMuY29tcG9zZShTLnBhcnNlSnNvbihQYXJzZWRUb2tlbikpKTtcbi8qKlxuKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuKiA9PT09PT09PT09PT09PT09PT09PT09PT0gRmlsZSBUeXBlIEhpZXJhcmNoeSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4qL1xuLyoqXG4qIFByb3BlcnRpZXMgZnJvbSB0aGUgd2ViIEZpbGUgb2JqZWN0LCB0aGlzIGlzIHdoYXQgdGhlIGNsaWVudCBzZW5kcyB3aGVuIGluaXRpYXRpbmcgYW4gdXBsb2FkXG4qL1xudmFyIEZpbGVVcGxvYWREYXRhID0gY2xhc3MgZXh0ZW5kcyBTLkNsYXNzKFwiRmlsZVVwbG9hZERhdGFcIikoe1xuXHRuYW1lOiBTLlN0cmluZyxcblx0c2l6ZTogUy5OdW1iZXIsXG5cdHR5cGU6IFMuU3RyaW5nLFxuXHRsYXN0TW9kaWZpZWQ6IFMuTnVtYmVyLnBpcGUoUy5vcHRpb25hbClcbn0pIHt9O1xuLyoqXG4qIGAubWlkZGxld2FyZSgpYCBjYW4gYWRkIGEgY3VzdG9tSWQgdG8gdGhlIGluY29taW5nIGZpbGUgZGF0YVxuKi9cbnZhciBGaWxlVXBsb2FkRGF0YVdpdGhDdXN0b21JZCA9IGNsYXNzIGV4dGVuZHMgRmlsZVVwbG9hZERhdGEuZXh0ZW5kKFwiRmlsZVVwbG9hZERhdGFXaXRoQ3VzdG9tSWRcIikoeyBjdXN0b21JZDogUy5OdWxsT3IoUy5TdHJpbmcpIH0pIHt9O1xuLyoqXG4qIFdoZW4gZmlsZXMgYXJlIHVwbG9hZGVkLCB3ZSBnZXQgYmFja1xuKiAtIGEga2V5XG4qIC0gVVJMcyBmb3IgdGhlIGZpbGVcbiogLSB0aGUgaGFzaCAobWQ1LWhleCkgb2YgdGhlIHVwbG9hZGVkIGZpbGUncyBjb250ZW50c1xuKi9cbnZhciBVcGxvYWRlZEZpbGVEYXRhID0gY2xhc3MgZXh0ZW5kcyBGaWxlVXBsb2FkRGF0YVdpdGhDdXN0b21JZC5leHRlbmQoXCJVcGxvYWRlZEZpbGVEYXRhXCIpKHtcblx0a2V5OiBTLlN0cmluZyxcblx0dXJsOiBTLlN0cmluZyxcblx0YXBwVXJsOiBTLlN0cmluZyxcblx0dWZzVXJsOiBTLlN0cmluZyxcblx0ZmlsZUhhc2g6IFMuU3RyaW5nXG59KSB7fTtcbnZhciBNZXRhZGF0YUZldGNoU3RyZWFtUGFydCA9IGNsYXNzIGV4dGVuZHMgUy5DbGFzcyhcIk1ldGFkYXRhRmV0Y2hTdHJlYW1QYXJ0XCIpKHtcblx0cGF5bG9hZDogUy5TdHJpbmcsXG5cdHNpZ25hdHVyZTogUy5TdHJpbmcsXG5cdGhvb2s6IFVwbG9hZFRoaW5nSG9va1xufSkge307XG52YXIgTWV0YWRhdGFGZXRjaFJlc3BvbnNlID0gY2xhc3MgZXh0ZW5kcyBTLkNsYXNzKFwiTWV0YWRhdGFGZXRjaFJlc3BvbnNlXCIpKHsgb2s6IFMuQm9vbGVhbiB9KSB7fTtcbnZhciBDYWxsYmFja1Jlc3VsdFJlc3BvbnNlID0gY2xhc3MgZXh0ZW5kcyBTLkNsYXNzKFwiQ2FsbGJhY2tSZXN1bHRSZXNwb25zZVwiKSh7IG9rOiBTLkJvb2xlYW4gfSkge307XG4vKipcbiogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiogPT09PT09PT09PT09PT09PT09PT09PT09IENsaWVudCBBY3Rpb24gUGF5bG9hZHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuKi9cbnZhciBVcGxvYWRBY3Rpb25QYXlsb2FkID0gY2xhc3MgZXh0ZW5kcyBTLkNsYXNzKFwiVXBsb2FkQWN0aW9uUGF5bG9hZFwiKSh7XG5cdGZpbGVzOiBTLkFycmF5KEZpbGVVcGxvYWREYXRhKSxcblx0aW5wdXQ6IFMuVW5rbm93blxufSkge307XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQWN0aW9uVHlwZSwgQ2FsbGJhY2tSZXN1bHRSZXNwb25zZSwgTWV0YWRhdGFGZXRjaFJlc3BvbnNlLCBNZXRhZGF0YUZldGNoU3RyZWFtUGFydCwgVXBsb2FkQWN0aW9uUGF5bG9hZCwgVXBsb2FkVGhpbmdIb29rLCBVcGxvYWRUaGluZ1Rva2VuLCBVcGxvYWRlZEZpbGVEYXRhIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGFyZWQtc2NoZW1hcy1CbUc1QVJvWC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/uploadthing/dist/shared-schemas-BmG5ARoX.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/uploadthing/dist/upload-builder-BlFOAnsv.js":
/*!******************************************************************!*\
  !*** ./node_modules/uploadthing/dist/upload-builder-BlFOAnsv.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdapterArguments: () => (/* binding */ AdapterArguments),\n/* harmony export */   ApiUrl: () => (/* binding */ ApiUrl),\n/* harmony export */   IngestUrl: () => (/* binding */ IngestUrl),\n/* harmony export */   UTFiles: () => (/* binding */ UTFiles),\n/* harmony export */   UTRegion: () => (/* binding */ UTRegion),\n/* harmony export */   UTToken: () => (/* binding */ UTToken),\n/* harmony export */   UfsAppIdLocation: () => (/* binding */ UfsAppIdLocation),\n/* harmony export */   UfsHost: () => (/* binding */ UfsHost),\n/* harmony export */   configProvider: () => (/* binding */ configProvider),\n/* harmony export */   createBuilder: () => (/* binding */ createBuilder),\n/* harmony export */   createRequestHandler: () => (/* binding */ createRequestHandler),\n/* harmony export */   extractRouterConfig: () => (/* binding */ extractRouterConfig),\n/* harmony export */   logHttpClientError: () => (/* binding */ logHttpClientError),\n/* harmony export */   logHttpClientResponse: () => (/* binding */ logHttpClientResponse),\n/* harmony export */   makeAdapterHandler: () => (/* binding */ makeAdapterHandler),\n/* harmony export */   makeRuntime: () => (/* binding */ makeRuntime)\n/* harmony export */ });\n/* harmony import */ var _package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./package-DpScpvTA.js */ \"(action-browser)/./node_modules/uploadthing/dist/package-DpScpvTA.js\");\n/* harmony import */ var _deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./deprecations-pLmw6Ytd.js */ \"(action-browser)/./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js\");\n/* harmony import */ var _shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shared-schemas-BmG5ARoX.js */ \"(action-browser)/./node_modules/uploadthing/dist/shared-schemas-BmG5ARoX.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(action-browser)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Effect */ \"(action-browser)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _effect_platform_HttpApp__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @effect/platform/HttpApp */ \"(action-browser)/./node_modules/@effect/platform/dist/esm/HttpApp.js\");\n/* harmony import */ var _effect_platform_HttpBody__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @effect/platform/HttpBody */ \"(action-browser)/./node_modules/@effect/platform/dist/esm/HttpBody.js\");\n/* harmony import */ var _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @effect/platform/HttpClient */ \"(action-browser)/./node_modules/@effect/platform/dist/esm/HttpClient.js\");\n/* harmony import */ var _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @effect/platform/HttpClientRequest */ \"(action-browser)/./node_modules/@effect/platform/dist/esm/HttpClientRequest.js\");\n/* harmony import */ var _effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @effect/platform/HttpClientResponse */ \"(action-browser)/./node_modules/@effect/platform/dist/esm/HttpClientResponse.js\");\n/* harmony import */ var _effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @effect/platform/HttpRouter */ \"(action-browser)/./node_modules/@effect/platform/dist/esm/HttpRouter.js\");\n/* harmony import */ var _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @effect/platform/HttpServerRequest */ \"(action-browser)/./node_modules/@effect/platform/dist/esm/HttpServerRequest.js\");\n/* harmony import */ var _effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @effect/platform/HttpServerResponse */ \"(action-browser)/./node_modules/@effect/platform/dist/esm/HttpServerResponse.js\");\n/* harmony import */ var effect_Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Config */ \"(action-browser)/./node_modules/effect/dist/esm/Config.js\");\n/* harmony import */ var effect_Context__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! effect/Context */ \"(action-browser)/./node_modules/effect/dist/esm/Context.js\");\n/* harmony import */ var effect_Match__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! effect/Match */ \"(action-browser)/./node_modules/effect/dist/esm/Match.js\");\n/* harmony import */ var effect_Redacted__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! effect/Redacted */ \"(action-browser)/./node_modules/effect/dist/esm/Redacted.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Schema */ \"(action-browser)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/ConfigProvider */ \"(action-browser)/./node_modules/effect/dist/esm/ConfigProvider.js\");\n/* harmony import */ var effect_Stream__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! effect/Stream */ \"(action-browser)/./node_modules/effect/dist/esm/Stream.js\");\n/* harmony import */ var effect_ConfigError__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! effect/ConfigError */ \"(action-browser)/./node_modules/effect/dist/esm/ConfigError.js\");\n/* harmony import */ var effect_Either__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! effect/Either */ \"(action-browser)/./node_modules/effect/dist/esm/Either.js\");\n/* harmony import */ var effect_Layer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! effect/Layer */ \"(action-browser)/./node_modules/effect/dist/esm/Layer.js\");\n/* harmony import */ var effect_Logger__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! effect/Logger */ \"(action-browser)/./node_modules/effect/dist/esm/Logger.js\");\n/* harmony import */ var effect_LogLevel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! effect/LogLevel */ \"(action-browser)/./node_modules/effect/dist/esm/LogLevel.js\");\n/* harmony import */ var effect_Cause__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! effect/Cause */ \"(action-browser)/./node_modules/effect/dist/esm/Cause.js\");\n/* harmony import */ var effect_Data__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! effect/Data */ \"(action-browser)/./node_modules/effect/dist/esm/Data.js\");\n/* harmony import */ var effect_Runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! effect/Runtime */ \"(action-browser)/./node_modules/effect/dist/esm/Runtime.js\");\n/* harmony import */ var _effect_platform_FetchHttpClient__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @effect/platform/FetchHttpClient */ \"(action-browser)/./node_modules/@effect/platform/dist/esm/FetchHttpClient.js\");\n/* harmony import */ var _effect_platform_Headers__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @effect/platform/Headers */ \"(action-browser)/./node_modules/@effect/platform/dist/esm/Headers.js\");\n/* harmony import */ var effect_FiberRef__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! effect/FiberRef */ \"(action-browser)/./node_modules/effect/dist/esm/FiberRef.js\");\n/* harmony import */ var effect_ManagedRuntime__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! effect/ManagedRuntime */ \"(action-browser)/./node_modules/effect/dist/esm/ManagedRuntime.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/_internal/config.ts\n/**\n* Merge in `import.meta.env` to the built-in `process.env` provider\n* Prefix keys with `UPLOADTHING_` so we can reference just the name.\n* @example\n* process.env.UPLOADTHING_TOKEN = \"foo\"\n* Config.string(\"token\"); // Config<\"foo\">\n*/\nconst envProvider = effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromEnv().pipe(effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.orElse(() => effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromMap(new Map(Object.entries((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.filterDefinedObjectValues)( null ?? {}))), { pathDelim: \"_\" })), effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.nested(\"uploadthing\"), effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.constantCase);\n/**\n* Config provider that merges the options from the object\n* and environment variables prefixed with `UPLOADTHING_`.\n* @remarks Options take precedence over environment variables.\n*/\nconst configProvider = (options) => effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromJson(options ?? {}).pipe(effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.orElse(() => envProvider));\nconst IsDevelopment = effect_Config__WEBPACK_IMPORTED_MODULE_2__.boolean(\"isDev\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.orElse(() => effect_Config__WEBPACK_IMPORTED_MODULE_2__.succeed(typeof process !== \"undefined\" ? \"development\" : void 0).pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((_) => _ === \"development\"))), effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(false));\nconst UTToken = effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Config(\"token\", _shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.UploadThingToken).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTags({ ConfigError: (e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\tcode: e._op === \"InvalidData\" ? \"INVALID_SERVER_CONFIG\" : \"MISSING_ENV\",\n\tmessage: e._op === \"InvalidData\" ? \"Invalid token. A token is a base64 encoded JSON object matching { apiKey: string, appId: string, regions: string[] }.\" : \"Missing token. Please set the `UPLOADTHING_TOKEN` environment variable or provide a token manually through config.\",\n\tcause: e\n}) }));\nconst ApiUrl = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"apiUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"https://api.uploadthing.com\"), effect_Config__WEBPACK_IMPORTED_MODULE_2__.mapAttempt((_) => new URL(_)), effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((url) => url.href.replace(/\\/$/, \"\")));\nconst IngestUrl = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fn(function* (preferredRegion) {\n\tconst { regions, ingestHost } = yield* UTToken;\n\tconst region = preferredRegion ? regions.find((r) => r === preferredRegion) ?? regions[0] : regions[0];\n\treturn yield* effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"ingestUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(`https://${region}.${ingestHost}`), effect_Config__WEBPACK_IMPORTED_MODULE_2__.mapAttempt((_) => new URL(_)), effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((url) => url.href.replace(/\\/$/, \"\")));\n});\nconst UtfsHost = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"utfsHost\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"utfs.io\"));\nconst UfsHost = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"ufsHost\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"ufs.sh\"));\nconst UfsAppIdLocation = effect_Config__WEBPACK_IMPORTED_MODULE_2__.literal(\"subdomain\", \"path\")(\"ufsAppIdLocation\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"subdomain\"));\n\n//#endregion\n//#region src/_internal/error-formatter.ts\nfunction defaultErrorFormatter(error) {\n\treturn { message: error.message };\n}\nfunction formatError(error, router) {\n\tconst firstSlug = Object.keys(router)[0];\n\tconst errorFormatter = firstSlug ? router[firstSlug]?.errorFormatter ?? defaultErrorFormatter : defaultErrorFormatter;\n\treturn errorFormatter(error);\n}\n\n//#endregion\n//#region src/_internal/jsonl.ts\nconst handleJsonLineStream = (schema, onChunk) => (stream) => {\n\tlet buf = \"\";\n\treturn stream.pipe(effect_Stream__WEBPACK_IMPORTED_MODULE_6__.decodeText(), effect_Stream__WEBPACK_IMPORTED_MODULE_6__.mapEffect((chunk) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\tbuf += chunk;\n\t\tconst parts = buf.split(\"\\n\");\n\t\tconst validChunks = [];\n\t\tfor (const part of parts) try {\n\t\t\tvalidChunks.push(JSON.parse(part));\n\t\t\tbuf = buf.slice(part.length + 1);\n\t\t} catch {}\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Received chunks\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"chunk\", chunk), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"parsedChunks\", validChunks), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"buf\", buf));\n\t\treturn validChunks;\n\t})), effect_Stream__WEBPACK_IMPORTED_MODULE_6__.mapEffect(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Array(schema))), effect_Stream__WEBPACK_IMPORTED_MODULE_6__.mapEffect(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach((part) => onChunk(part))), effect_Stream__WEBPACK_IMPORTED_MODULE_6__.runDrain, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"handleJsonLineStream\"));\n};\n\n//#endregion\n//#region src/_internal/logger.ts\n/**\n* Config.logLevel counter-intuitively accepts LogLevel[\"label\"]\n* instead of a literal, ripping it and changing to accept literal\n* Effect 4.0 will change this to accept a literal and then we can\n* remove this and go back to the built-in validator.\n*/\nconst ConfigLogLevel = (name) => {\n\tconst config = effect_Config__WEBPACK_IMPORTED_MODULE_2__.mapOrFail(effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(), (literal) => {\n\t\tconst level = effect_LogLevel__WEBPACK_IMPORTED_MODULE_7__.allLevels.find((level$1) => level$1._tag === literal);\n\t\treturn level === void 0 ? effect_Either__WEBPACK_IMPORTED_MODULE_8__.left(effect_ConfigError__WEBPACK_IMPORTED_MODULE_9__.InvalidData([], `Expected a log level but received ${literal}`)) : effect_Either__WEBPACK_IMPORTED_MODULE_8__.right(level);\n\t});\n\treturn name === void 0 ? config : effect_Config__WEBPACK_IMPORTED_MODULE_2__.nested(config, name);\n};\nconst withMinimalLogLevel = ConfigLogLevel(\"logLevel\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(effect_LogLevel__WEBPACK_IMPORTED_MODULE_7__.Info), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.andThen((level) => effect_Logger__WEBPACK_IMPORTED_MODULE_10__.minimumLogLevel(level)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapError((e) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(\"Invalid log level\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"error\", e))), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ConfigError\", (e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\tcode: \"INVALID_SERVER_CONFIG\",\n\tmessage: \"Invalid server configuration\",\n\tcause: e\n})), effect_Layer__WEBPACK_IMPORTED_MODULE_11__.unwrapEffect);\nconst LogFormat = effect_Config__WEBPACK_IMPORTED_MODULE_2__.literal(\"json\", \"logFmt\", \"structured\", \"pretty\")(\"logFormat\");\nconst withLogFormat = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst isDev = yield* IsDevelopment;\n\tconst logFormat = yield* LogFormat.pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(isDev ? \"pretty\" : \"json\"));\n\treturn effect_Logger__WEBPACK_IMPORTED_MODULE_10__[logFormat];\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ConfigError\", (e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\tcode: \"INVALID_SERVER_CONFIG\",\n\tmessage: \"Invalid server configuration\",\n\tcause: e\n})), effect_Layer__WEBPACK_IMPORTED_MODULE_11__.unwrapEffect);\nconst logHttpClientResponse = (message, opts) => {\n\tconst mixin = opts?.mixin ?? \"json\";\n\tconst level = effect_LogLevel__WEBPACK_IMPORTED_MODULE_7__.fromLiteral(opts?.level ?? \"Debug\");\n\treturn (response) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(mixin !== \"None\" ? response[mixin] : effect_Effect__WEBPACK_IMPORTED_MODULE_5__[\"void\"], () => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logWithLevel(level, `${message} (${response.status})`).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"response\", response)));\n};\nconst logHttpClientError = (message) => (err) => err._tag === \"ResponseError\" ? logHttpClientResponse(message, { level: \"Error\" })(err.response) : effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(message).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"error\", err));\n\n//#endregion\n//#region src/_internal/parser.ts\nvar ParserError = class extends effect_Data__WEBPACK_IMPORTED_MODULE_12__.TaggedError(\"ParserError\") {\n\tmessage = \"Input validation failed. The original error with it's validation issues is in the error cause.\";\n};\nfunction getParseFn(parser) {\n\tif (\"parseAsync\" in parser && typeof parser.parseAsync === \"function\")\n /**\n\t* Zod\n\t* TODO (next major): Consider wrapping ZodError in ParserError\n\t*/\n\treturn parser.parseAsync;\n\tif (effect_Schema__WEBPACK_IMPORTED_MODULE_3__.isSchema(parser))\n /**\n\t* Effect Schema\n\t*/\n\treturn (value) => effect_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknownPromise(parser)(value).catch((error) => {\n\t\tthrow new ParserError({ cause: effect_Cause__WEBPACK_IMPORTED_MODULE_13__.squash(error[effect_Runtime__WEBPACK_IMPORTED_MODULE_14__.FiberFailureCauseId]) });\n\t});\n\tif (\"~standard\" in parser)\n /**\n\t* Standard Schema\n\t* TODO (next major): Consider moving this to the top of the function\n\t*/\n\treturn async (value) => {\n\t\tconst result = await parser[\"~standard\"].validate(value);\n\t\tif (result.issues) throw new ParserError({ cause: result.issues });\n\t\treturn result.value;\n\t};\n\tthrow new Error(\"Invalid parser\");\n}\n\n//#endregion\n//#region src/_internal/route-config.ts\nvar FileSizeMismatch = class extends effect_Data__WEBPACK_IMPORTED_MODULE_12__.Error {\n\t_tag = \"FileSizeMismatch\";\n\tname = \"FileSizeMismatchError\";\n\tconstructor(type, max, actual) {\n\t\tconst reason = `You uploaded a ${type} file that was ${(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.bytesToFileSize)(actual)}, but the limit for that type is ${max}`;\n\t\tsuper({ reason });\n\t}\n};\nvar FileCountMismatch = class extends effect_Data__WEBPACK_IMPORTED_MODULE_12__.Error {\n\t_tag = \"FileCountMismatch\";\n\tname = \"FileCountMismatchError\";\n\tconstructor(type, boundtype, bound, actual) {\n\t\tconst reason = `You uploaded ${actual} file(s) of type '${type}', but the ${boundtype} for that type is ${bound}`;\n\t\tsuper({ reason });\n\t}\n};\nconst assertFilesMeetConfig = (files, routeConfig) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst counts = {};\n\tfor (const file of files) {\n\t\tconst type = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.matchFileType)(file, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.objectKeys)(routeConfig));\n\t\tcounts[type] = (counts[type] ?? 0) + 1;\n\t\tconst sizeLimit = routeConfig[type]?.maxFileSize;\n\t\tif (!sizeLimit) return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.InvalidRouteConfigError(type, \"maxFileSize\");\n\t\tconst sizeLimitBytes = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fileSizeToBytes)(sizeLimit);\n\t\tif (file.size > sizeLimitBytes) return yield* new FileSizeMismatch(type, sizeLimit, file.size);\n\t}\n\tfor (const _key in counts) {\n\t\tconst key = _key;\n\t\tconst config = routeConfig[key];\n\t\tif (!config) return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.InvalidRouteConfigError(key);\n\t\tconst count = counts[key];\n\t\tconst min = config.minFileCount;\n\t\tconst max = config.maxFileCount;\n\t\tif (min > max) return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Invalid config during file count - minFileCount > maxFileCount\",\n\t\t\tcause: `minFileCount must be less than maxFileCount for key ${key}. got: ${min} > ${max}`\n\t\t});\n\t\tif (count != null && count < min) return yield* new FileCountMismatch(key, \"minimum\", min, count);\n\t\tif (count != null && count > max) return yield* new FileCountMismatch(key, \"maximum\", max, count);\n\t}\n\treturn null;\n});\nconst extractRouterConfig = (router) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.objectKeys)(router), (slug) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fillInputRouteConfig)(router[slug].routerConfig), (config) => ({\n\tslug,\n\tconfig\n})));\n\n//#endregion\n//#region src/_internal/runtime.ts\nconst makeRuntime = (fetch, config) => {\n\tconst fetchHttpClient = effect_Layer__WEBPACK_IMPORTED_MODULE_11__.provideMerge(_effect_platform_FetchHttpClient__WEBPACK_IMPORTED_MODULE_15__.layer, effect_Layer__WEBPACK_IMPORTED_MODULE_11__.succeed(_effect_platform_FetchHttpClient__WEBPACK_IMPORTED_MODULE_15__.Fetch, fetch));\n\tconst withRedactedHeaders = effect_Layer__WEBPACK_IMPORTED_MODULE_11__.effectDiscard(effect_FiberRef__WEBPACK_IMPORTED_MODULE_16__.update(_effect_platform_Headers__WEBPACK_IMPORTED_MODULE_17__.currentRedactedNames, (_) => _.concat([\"x-uploadthing-api-key\"])));\n\tconst layer = effect_Layer__WEBPACK_IMPORTED_MODULE_11__.provide(effect_Layer__WEBPACK_IMPORTED_MODULE_11__.mergeAll(withLogFormat, withMinimalLogLevel, fetchHttpClient, withRedactedHeaders), effect_Layer__WEBPACK_IMPORTED_MODULE_11__.setConfigProvider(configProvider(config)));\n\treturn effect_ManagedRuntime__WEBPACK_IMPORTED_MODULE_18__.make(layer);\n};\n\n//#endregion\n//#region src/_internal/types.ts\n/**\n* Marker used to select the region based on the incoming request\n*/\nconst UTRegion = Symbol(\"uploadthing-region-symbol\");\n/**\n* Marker used to append a `customId` to the incoming file data in `.middleware()`\n* @example\n* ```ts\n* .middleware((opts) => {\n*   return {\n*     [UTFiles]: opts.files.map((file) => ({\n*       ...file,\n*       customId: generateId(),\n*     }))\n*   };\n* })\n* ```\n*/\nconst UTFiles = Symbol(\"uploadthing-custom-id-symbol\");\n\n//#endregion\n//#region src/_internal/handler.ts\nvar AdapterArguments = class extends effect_Context__WEBPACK_IMPORTED_MODULE_19__.Tag(\"uploadthing/AdapterArguments\")() {};\n/**\n* Create a request handler adapter for any framework or server library.\n* Refer to the existing adapters for examples on how to use this function.\n* @public\n*\n* @param makeAdapterArgs - Function that takes the args from your framework and returns an Effect that resolves to the adapter args.\n* These args are passed to the `.middleware`, `.onUploadComplete`, and `.onUploadError` hooks.\n* @param toRequest - Function that takes the args from your framework and returns an Effect that resolves to a web Request object.\n* @param opts - The router config and other options that are normally passed to `createRequestHandler` of official adapters\n* @param beAdapter - [Optional] The adapter name of the adapter, used for telemetry purposes\n* @returns A function that takes the args from your framework and returns a promise that resolves to a Response object.\n*/\nconst makeAdapterHandler = (makeAdapterArgs, toRequest, opts, beAdapter) => {\n\tconst managed = makeRuntime(opts.config?.fetch, opts.config);\n\tconst handle = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.promise(() => managed.runtime().then(_effect_platform_HttpApp__WEBPACK_IMPORTED_MODULE_20__.toWebHandlerRuntime));\n\tconst app = (...args) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.promise(() => managed.runPromise(createRequestHandler(opts, beAdapter ?? \"custom\"))), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.provideServiceEffect(AdapterArguments, makeAdapterArgs(...args)));\n\treturn async (...args) => {\n\t\tconst result = await handle.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.ap(app(...args)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.ap(toRequest(...args)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"requestHandler\"), managed.runPromise);\n\t\treturn result;\n\t};\n};\nconst createRequestHandler = (opts, beAdapter) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst isDevelopment = yield* IsDevelopment;\n\tconst routerConfig = yield* extractRouterConfig(opts.router);\n\tconst handleDaemon = (() => {\n\t\tif (opts.config?.handleDaemonPromise) return opts.config.handleDaemonPromise;\n\t\treturn isDevelopment ? \"void\" : \"await\";\n\t})();\n\tif (isDevelopment && handleDaemon === \"await\") return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\tcode: \"INVALID_SERVER_CONFIG\",\n\t\tmessage: \"handleDaemonPromise: \\\"await\\\" is forbidden in development.\"\n\t});\n\tconst GET = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\treturn yield* _effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__.json(routerConfig);\n\t});\n\tconst POST = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\tconst { \"uploadthing-hook\": uploadthingHook, \"x-uploadthing-package\": fePackage, \"x-uploadthing-version\": clientVersion } = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.schemaHeaders(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n\t\t\t\"uploadthing-hook\": _shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.UploadThingHook.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.optional),\n\t\t\t\"x-uploadthing-package\": effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.optionalWith({ default: () => \"unknown\" })),\n\t\t\t\"x-uploadthing-version\": effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.optionalWith({ default: () => _package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_23__.version }))\n\t\t}));\n\t\tif (clientVersion !== _package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_23__.version) {\n\t\t\tconst serverVersion = _package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_23__.version;\n\t\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logWarning(\"Client version mismatch. Things may not work as expected, please sync your versions to ensure compatibility.\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs({\n\t\t\t\tclientVersion,\n\t\t\t\tserverVersion\n\t\t\t}));\n\t\t}\n\t\tconst { slug, actionType } = yield* _effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__.schemaParams(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n\t\t\tactionType: _shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.ActionType.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.optional),\n\t\t\tslug: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String\n\t\t}));\n\t\tconst uploadable = opts.router[slug];\n\t\tif (!uploadable) {\n\t\t\tconst msg = `No file route found for slug ${slug}`;\n\t\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(msg);\n\t\t\treturn yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\t\tcode: \"NOT_FOUND\",\n\t\t\t\tmessage: msg\n\t\t\t});\n\t\t}\n\t\tconst { body, fiber } = yield* effect_Match__WEBPACK_IMPORTED_MODULE_25__.value({\n\t\t\tactionType,\n\t\t\tuploadthingHook\n\t\t}).pipe(effect_Match__WEBPACK_IMPORTED_MODULE_25__.when({\n\t\t\tactionType: \"upload\",\n\t\t\tuploadthingHook: void 0\n\t\t}, () => handleUploadAction({\n\t\t\tuploadable,\n\t\t\tfePackage,\n\t\t\tbeAdapter,\n\t\t\tslug\n\t\t})), effect_Match__WEBPACK_IMPORTED_MODULE_25__.when({\n\t\t\tactionType: void 0,\n\t\t\tuploadthingHook: \"callback\"\n\t\t}, () => handleCallbackRequest({\n\t\t\tuploadable,\n\t\t\tfePackage,\n\t\t\tbeAdapter\n\t\t})), effect_Match__WEBPACK_IMPORTED_MODULE_25__.when({\n\t\t\tactionType: void 0,\n\t\t\tuploadthingHook: \"error\"\n\t\t}, () => handleErrorRequest({ uploadable })), effect_Match__WEBPACK_IMPORTED_MODULE_25__.orElse(() => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.succeed({\n\t\t\tbody: null,\n\t\t\tfiber: null\n\t\t})));\n\t\tif (fiber) {\n\t\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Running fiber as daemon\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"handleDaemon\", handleDaemon));\n\t\t\tif (handleDaemon === \"void\") {} else if (handleDaemon === \"await\") yield* fiber.await;\n\t\t\telse if (typeof handleDaemon === \"function\") handleDaemon(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.runPromise(fiber.await));\n\t\t}\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Sending response\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"body\", body));\n\t\treturn yield* _effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__.json(body);\n\t}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTags({\n\t\tParseError: (e) => _effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__.json(formatError(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Invalid input\",\n\t\t\tcause: e.message\n\t\t}), opts.router), { status: 400 }),\n\t\tUploadThingError: (e) => _effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__.json(formatError(e, opts.router), { status: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.getStatusCodeFromError)(e) })\n\t}));\n\tconst appendResponseHeaders = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map(_effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__.setHeader(\"x-uploadthing-version\", _package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_23__.version));\n\treturn _effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__.empty.pipe(_effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__.get(\"*\", GET), _effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__.post(\"*\", POST), _effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__.use(appendResponseHeaders));\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"createRequestHandler\"));\nconst handleErrorRequest = (opts) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst { uploadable } = opts;\n\tconst request = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.HttpServerRequest;\n\tconst { apiKey } = yield* UTToken;\n\tconst verified = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.verifySignature)(yield* request.text, request.headers[\"x-uploadthing-signature\"] ?? null, apiKey);\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(`Signature verified: ${verified}`);\n\tif (!verified) {\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(\"Invalid signature\");\n\t\treturn yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Invalid signature\"\n\t\t});\n\t}\n\tconst requestInput = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.schemaBodyJson(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n\t\tfileKey: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n\t\terror: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String\n\t}));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Handling error callback request with input:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"json\", requestInput));\n\tconst adapterArgs = yield* AdapterArguments;\n\tconst fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tryPromise({\n\t\ttry: async () => uploadable.onUploadError({\n\t\t\t...adapterArgs,\n\t\t\terror: new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\t\tcode: \"UPLOAD_FAILED\",\n\t\t\t\tmessage: `Upload failed for ${requestInput.fileKey}: ${requestInput.error}`\n\t\t\t}),\n\t\t\tfileKey: requestInput.fileKey\n\t\t}),\n\t\tcatch: (error) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"INTERNAL_SERVER_ERROR\",\n\t\t\tmessage: \"Failed to run onUploadError\",\n\t\t\tcause: error\n\t\t})\n\t}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapError((error) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(\"Failed to run onUploadError. You probably shouldn't be throwing errors here.\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"error\", error)))).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forkDaemon);\n\treturn {\n\t\tbody: null,\n\t\tfiber\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"handleErrorRequest\"));\nconst handleCallbackRequest = (opts) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst { uploadable, fePackage, beAdapter } = opts;\n\tconst request = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.HttpServerRequest;\n\tconst { apiKey } = yield* UTToken;\n\tconst verified = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.verifySignature)(yield* request.text, request.headers[\"x-uploadthing-signature\"] ?? null, apiKey);\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(`Signature verified: ${verified}`);\n\tif (!verified) {\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(\"Invalid signature\");\n\t\treturn yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Invalid signature\"\n\t\t});\n\t}\n\tconst requestInput = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.schemaBodyJson(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n\t\tstatus: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n\t\tfile: _shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.UploadedFileData,\n\t\torigin: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n\t\tmetadata: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Record({\n\t\t\tkey: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n\t\t\tvalue: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Unknown\n\t\t})\n\t}));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Handling callback request with input:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"json\", requestInput));\n\t/**\n\t* Run `.onUploadComplete` as a daemon to prevent the\n\t* request from UT to potentially timeout.\n\t*/\n\tconst fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\tconst adapterArgs = yield* AdapterArguments;\n\t\tconst serverData = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tryPromise({\n\t\t\ttry: async () => uploadable.onUploadComplete({\n\t\t\t\t...adapterArgs,\n\t\t\t\tfile: {\n\t\t\t\t\t...requestInput.file,\n\t\t\t\t\tget url() {\n\t\t\t\t\t\t(0,_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_26__.logDeprecationWarning)(\"`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n\t\t\t\t\t\treturn requestInput.file.url;\n\t\t\t\t\t},\n\t\t\t\t\tget appUrl() {\n\t\t\t\t\t\t(0,_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_26__.logDeprecationWarning)(\"`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n\t\t\t\t\t\treturn requestInput.file.appUrl;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmetadata: requestInput.metadata\n\t\t\t}),\n\t\t\tcatch: (error) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\t\tcode: \"INTERNAL_SERVER_ERROR\",\n\t\t\t\tmessage: \"Failed to run onUploadComplete. You probably shouldn't be throwing errors here.\",\n\t\t\t\tcause: error\n\t\t\t})\n\t\t});\n\t\tconst payload = {\n\t\t\tfileKey: requestInput.file.key,\n\t\t\tcallbackData: serverData ?? null\n\t\t};\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"'onUploadComplete' callback finished. Sending response to UploadThing:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"callbackData\", payload));\n\t\tconst httpClient = (yield* _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_27__.HttpClient).pipe(_effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_27__.filterStatusOk);\n\t\tyield* _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.post(`/callback-result`).pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.prependUrl(requestInput.origin), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.setHeaders({\n\t\t\t\"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_29__.value(apiKey),\n\t\t\t\"x-uploadthing-version\": _package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_23__.version,\n\t\t\t\"x-uploadthing-be-adapter\": beAdapter,\n\t\t\t\"x-uploadthing-fe-package\": fePackage\n\t\t}), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.bodyJson(payload), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(httpClient.execute), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapError(logHttpClientError(\"Failed to register callback result\")), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(_effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_30__.schemaBodyJson(_shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.CallbackResultResponse)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tap(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.log(\"Sent callback result to UploadThing\")), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.scoped);\n\t}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forkDaemon);\n\treturn {\n\t\tbody: null,\n\t\tfiber\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"handleCallbackRequest\"));\nconst runRouteMiddleware = (opts) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst { json: { files, input }, uploadable } = opts;\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Running middleware\");\n\tconst adapterArgs = yield* AdapterArguments;\n\tconst metadata = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tryPromise({\n\t\ttry: async () => uploadable.middleware({\n\t\t\t...adapterArgs,\n\t\t\tinput,\n\t\t\tfiles\n\t\t}),\n\t\tcatch: (error) => error instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError ? error : new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"INTERNAL_SERVER_ERROR\",\n\t\t\tmessage: \"Failed to run middleware\",\n\t\t\tcause: error\n\t\t})\n\t});\n\tif (metadata[UTFiles] && metadata[UTFiles].length !== files.length) {\n\t\tconst msg = `Expected files override to have the same length as original files, got ${metadata[UTFiles].length} but expected ${files.length}`;\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(msg);\n\t\treturn yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Files override must have the same length as files\",\n\t\t\tcause: msg\n\t\t});\n\t}\n\tconst filesWithCustomIds = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach(files, (file, idx) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\tconst theirs = metadata[UTFiles]?.[idx];\n\t\tif (theirs && theirs.size !== file.size) yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logWarning(\"File size mismatch. Reverting to original size\");\n\t\treturn {\n\t\t\tname: theirs?.name ?? file.name,\n\t\t\tsize: file.size,\n\t\t\ttype: file.type,\n\t\t\tcustomId: theirs?.customId,\n\t\t\tlastModified: theirs?.lastModified ?? Date.now()\n\t\t};\n\t}));\n\treturn {\n\t\tmetadata,\n\t\tfilesWithCustomIds,\n\t\tpreferredRegion: metadata[UTRegion]\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"runRouteMiddleware\"));\nconst handleUploadAction = (opts) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst httpClient = (yield* _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_27__.HttpClient).pipe(_effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_27__.filterStatusOk);\n\tconst { uploadable, fePackage, beAdapter, slug } = opts;\n\tconst json = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.schemaBodyJson(_shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.UploadActionPayload);\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Handling upload request\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"json\", json));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Parsing user input\");\n\tconst parsedInput = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tryPromise({\n\t\ttry: () => getParseFn(uploadable.inputParser)(json.input),\n\t\tcatch: (error) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Invalid input\",\n\t\t\tcause: error\n\t\t})\n\t});\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Input parsed successfully\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"input\", parsedInput));\n\tconst { metadata, filesWithCustomIds, preferredRegion } = yield* runRouteMiddleware({\n\t\tjson: {\n\t\t\tinput: parsedInput,\n\t\t\tfiles: json.files\n\t\t},\n\t\tuploadable\n\t});\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Parsing route config\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"routerConfig\", uploadable.routerConfig));\n\tconst parsedConfig = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fillInputRouteConfig)(uploadable.routerConfig).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"InvalidRouteConfig\", (err) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\tcode: \"BAD_REQUEST\",\n\t\tmessage: \"Invalid route config\",\n\t\tcause: err\n\t})));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Route config parsed successfully\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"routeConfig\", parsedConfig));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Validating files meet the config requirements\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"files\", json.files));\n\tyield* assertFilesMeetConfig(json.files, parsedConfig).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.mapError((e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\tcode: \"BAD_REQUEST\",\n\t\tmessage: `Invalid config: ${e._tag}`,\n\t\tcause: \"reason\" in e ? e.reason : e.message\n\t})));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Files validated.\");\n\tconst fileUploadRequests = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach(filesWithCustomIds, (file) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.matchFileType)(file, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.objectKeys)(parsedConfig)), (type) => ({\n\t\tname: file.name,\n\t\tsize: file.size,\n\t\ttype: file.type || type,\n\t\tlastModified: file.lastModified,\n\t\tcustomId: file.customId,\n\t\tcontentDisposition: parsedConfig[type]?.contentDisposition ?? \"inline\",\n\t\tacl: parsedConfig[type]?.acl\n\t}))).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTags({\n\t\tInvalidFileType: (e) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.die(e),\n\t\tUnknownFileType: (e) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.die(e)\n\t}));\n\tconst routeOptions = uploadable.routeOptions;\n\tconst { apiKey, appId } = yield* UTToken;\n\tconst ingestUrl = yield* IngestUrl(preferredRegion);\n\tconst isDev = yield* IsDevelopment;\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Generating presigned URLs\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"fileUploadRequests\", fileUploadRequests), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"ingestUrl\", ingestUrl));\n\tconst presignedUrls = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach(fileUploadRequests, (file) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\tconst key = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.generateKey)(file, appId, routeOptions.getFileHashParts);\n\t\tconst url = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.generateSignedURL)(`${ingestUrl}/${key}`, apiKey, {\n\t\t\tttlInSeconds: routeOptions.presignedURLTTL,\n\t\t\tdata: {\n\t\t\t\t\"x-ut-identifier\": appId,\n\t\t\t\t\"x-ut-file-name\": file.name,\n\t\t\t\t\"x-ut-file-size\": file.size,\n\t\t\t\t\"x-ut-file-type\": file.type,\n\t\t\t\t\"x-ut-slug\": slug,\n\t\t\t\t\"x-ut-custom-id\": file.customId,\n\t\t\t\t\"x-ut-content-disposition\": file.contentDisposition,\n\t\t\t\t\"x-ut-acl\": file.acl\n\t\t\t}\n\t\t});\n\t\treturn {\n\t\t\turl,\n\t\t\tkey\n\t\t};\n\t}), { concurrency: \"unbounded\" });\n\tconst serverReq = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.HttpServerRequest;\n\tconst requestUrl = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.toURL(serverReq);\n\tconst devHookRequest = yield* effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"callbackUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(requestUrl.origin + requestUrl.pathname), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map((url) => _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.post(url).pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.appendUrlParam(\"slug\", slug))));\n\tconst metadataRequest = _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.post(\"/route-metadata\").pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.prependUrl(ingestUrl), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.setHeaders({\n\t\t\"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_29__.value(apiKey),\n\t\t\"x-uploadthing-version\": _package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_23__.version,\n\t\t\"x-uploadthing-be-adapter\": beAdapter,\n\t\t\"x-uploadthing-fe-package\": fePackage\n\t}), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.bodyJson({\n\t\tfileKeys: presignedUrls.map(({ key }) => key),\n\t\tmetadata,\n\t\tisDev,\n\t\tcallbackUrl: devHookRequest.url,\n\t\tcallbackSlug: slug,\n\t\tawaitServerData: routeOptions.awaitServerData ?? true\n\t}), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(httpClient.execute));\n\tconst handleDevStreamError = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fn(\"handleDevStreamError\")(function* (err, chunk) {\n\t\tconst schema = effect_Schema__WEBPACK_IMPORTED_MODULE_3__.parseJson(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({ file: _shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.UploadedFileData }));\n\t\tconst parsedChunk = yield* effect_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(schema)(chunk);\n\t\tconst key = parsedChunk.file.key;\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(\"Failed to forward callback request from dev stream\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs({\n\t\t\tfileKey: key,\n\t\t\terror: err.message\n\t\t}));\n\t\tconst httpResponse = yield* _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.post(\"/callback-result\").pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.prependUrl(ingestUrl), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.setHeaders({\n\t\t\t\"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_29__.value(apiKey),\n\t\t\t\"x-uploadthing-version\": _package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_23__.version,\n\t\t\t\"x-uploadthing-be-adapter\": beAdapter,\n\t\t\t\"x-uploadthing-fe-package\": fePackage\n\t\t}), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.bodyJson({\n\t\t\tfileKey: key,\n\t\t\terror: `Failed to forward callback request from dev stream: ${err.message}`\n\t\t}), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(httpClient.execute));\n\t\tyield* logHttpClientResponse(\"Reported callback error to UploadThing\")(httpResponse);\n\t});\n\tconst fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__[\"if\"](isDev, {\n\t\tonTrue: () => metadataRequest.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapBoth({\n\t\t\tonSuccess: logHttpClientResponse(\"Registered metadata\", { mixin: \"None\" }),\n\t\t\tonFailure: logHttpClientError(\"Failed to register metadata\")\n\t\t}), _effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_30__.stream, handleJsonLineStream(_shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.MetadataFetchStreamPart, (chunk) => devHookRequest.pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.setHeaders({\n\t\t\t\"uploadthing-hook\": chunk.hook,\n\t\t\t\"x-uploadthing-signature\": chunk.signature\n\t\t}), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.setBody(_effect_platform_HttpBody__WEBPACK_IMPORTED_MODULE_31__.text(chunk.payload, \"application/json\")), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tap(logHttpClientResponse(\"Successfully forwarded callback request from dev stream\")), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ResponseError\", (err) => handleDevStreamError(err, chunk.payload)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(chunk), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.asVoid, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.scoped))),\n\t\tonFalse: () => metadataRequest.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapBoth({\n\t\t\tonSuccess: logHttpClientResponse(\"Registered metadata\"),\n\t\t\tonFailure: logHttpClientError(\"Failed to register metadata\")\n\t\t}), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(_effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_30__.schemaBodyJson(_shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.MetadataFetchResponse)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.scoped)\n\t}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forkDaemon);\n\tconst presigneds = presignedUrls.map((p, i) => ({\n\t\turl: p.url,\n\t\tkey: p.key,\n\t\tname: fileUploadRequests[i].name,\n\t\tcustomId: fileUploadRequests[i].customId ?? null\n\t}));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logInfo(\"Sending presigned URLs to client\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"presignedUrls\", presigneds));\n\treturn {\n\t\tbody: presigneds,\n\t\tfiber\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"handleUploadAction\"));\n\n//#endregion\n//#region src/_internal/upload-builder.ts\nfunction internalCreateBuilder(initDef = {}) {\n\tconst _def = {\n\t\t$types: {},\n\t\trouterConfig: { image: { maxFileSize: \"4MB\" } },\n\t\trouteOptions: { awaitServerData: true },\n\t\tinputParser: {\n\t\t\tparseAsync: () => Promise.resolve(void 0),\n\t\t\t_input: void 0,\n\t\t\t_output: void 0\n\t\t},\n\t\tmiddleware: () => ({}),\n\t\tonUploadError: () => {},\n\t\tonUploadComplete: () => void 0,\n\t\terrorFormatter: initDef.errorFormatter ?? defaultErrorFormatter,\n\t\t...initDef\n\t};\n\treturn {\n\t\tinput(userParser) {\n\t\t\treturn internalCreateBuilder({\n\t\t\t\t..._def,\n\t\t\t\tinputParser: userParser\n\t\t\t});\n\t\t},\n\t\tmiddleware(userMiddleware) {\n\t\t\treturn internalCreateBuilder({\n\t\t\t\t..._def,\n\t\t\t\tmiddleware: userMiddleware\n\t\t\t});\n\t\t},\n\t\tonUploadComplete(userUploadComplete) {\n\t\t\treturn {\n\t\t\t\t..._def,\n\t\t\t\tonUploadComplete: userUploadComplete\n\t\t\t};\n\t\t},\n\t\tonUploadError(userOnUploadError) {\n\t\t\treturn internalCreateBuilder({\n\t\t\t\t..._def,\n\t\t\t\tonUploadError: userOnUploadError\n\t\t\t});\n\t\t}\n\t};\n}\n/**\n* Create a builder for your backend adapter.\n* Refer to the existing adapters for examples on how to use this function.\n* @public\n*\n* @param opts - Options for the builder\n* @returns A file route builder for making UploadThing file routes\n*/\nfunction createBuilder(opts) {\n\treturn (input, config) => {\n\t\treturn internalCreateBuilder({\n\t\t\trouterConfig: input,\n\t\t\trouteOptions: config ?? {},\n\t\t\t...opts\n\t\t});\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=upload-builder-BlFOAnsv.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L3VwbG9hZC1idWlsZGVyLUJsRk9BbnN2LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFnRDtBQUNtQjtBQUN5STtBQUMyRDtBQUMvTjtBQUNZO0FBQ0U7QUFDSTtBQUNjO0FBQ0U7QUFDaEI7QUFDYztBQUNFO0FBQ2xDO0FBQ0U7QUFDSjtBQUNNO0FBQ1Q7QUFDcUI7QUFDaEI7QUFDVTtBQUNSO0FBQ0o7QUFDRTtBQUNJO0FBQ047QUFDRjtBQUNNO0FBQzBCO0FBQ2hCO0FBQ1I7QUFDWTs7QUFFeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0Esb0JBQW9CLDBEQUFzQixRQUFRLHlEQUFxQixPQUFPLDBEQUFzQix3QkFBd0IsOEVBQXlCLENBQUMsS0FBZ0IsTUFBTSxPQUFPLGdCQUFnQixJQUFJLHlEQUFxQixpQkFBaUIsK0RBQTJCO0FBQ3hRO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsMkRBQXVCLGNBQWMsT0FBTyx5REFBcUI7QUFDckcsc0JBQXNCLGtEQUFjLGVBQWUsaURBQWEsT0FBTyxrREFBYyxrQ0FBa0MsYUFBb0IsZ0JBQWdCLDhDQUFVLGdDQUFnQyxzREFBa0I7QUFDdk4sZ0JBQWdCLGlEQUFRLFVBQVUseUVBQWdCLE9BQU8sb0RBQWdCLEdBQUcsd0JBQXdCLGlFQUFnQjtBQUNwSDtBQUNBLHVHQUF1RyxrREFBa0Q7QUFDeko7QUFDQSxDQUFDLEdBQUc7QUFDSixlQUFlLGlEQUFhLGdCQUFnQixzREFBa0IsaUNBQWlDLHFEQUFpQixxQkFBcUIsOENBQVU7QUFDL0ksa0JBQWtCLDZDQUFTO0FBQzNCLFNBQVMsc0JBQXNCO0FBQy9CO0FBQ0EsZUFBZSxpREFBYSxtQkFBbUIsc0RBQWtCLFlBQVksT0FBTyxHQUFHLFdBQVcsSUFBSSxx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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQzRQO0FBQzVQIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYm9vay1zcGhlcmUvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC91cGxvYWQtYnVpbGRlci1CbEZPQW5zdi5qcz84MWIzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi9wYWNrYWdlLURwU2NwdlRBLmpzXCI7XG5pbXBvcnQgeyBsb2dEZXByZWNhdGlvbldhcm5pbmcgfSBmcm9tIFwiLi9kZXByZWNhdGlvbnMtcExtdzZZdGQuanNcIjtcbmltcG9ydCB7IEFjdGlvblR5cGUsIENhbGxiYWNrUmVzdWx0UmVzcG9uc2UsIE1ldGFkYXRhRmV0Y2hSZXNwb25zZSwgTWV0YWRhdGFGZXRjaFN0cmVhbVBhcnQsIFVwbG9hZEFjdGlvblBheWxvYWQsIFVwbG9hZFRoaW5nSG9vaywgVXBsb2FkVGhpbmdUb2tlbiwgVXBsb2FkZWRGaWxlRGF0YSB9IGZyb20gXCIuL3NoYXJlZC1zY2hlbWFzLUJtRzVBUm9YLmpzXCI7XG5pbXBvcnQgeyBJbnZhbGlkUm91dGVDb25maWdFcnJvciwgVXBsb2FkVGhpbmdFcnJvciwgYnl0ZXNUb0ZpbGVTaXplLCBmaWxlU2l6ZVRvQnl0ZXMsIGZpbGxJbnB1dFJvdXRlQ29uZmlnLCBmaWx0ZXJEZWZpbmVkT2JqZWN0VmFsdWVzLCBnZW5lcmF0ZUtleSwgZ2VuZXJhdGVTaWduZWRVUkwsIGdldFN0YXR1c0NvZGVGcm9tRXJyb3IsIG1hdGNoRmlsZVR5cGUsIG9iamVjdEtleXMsIHZlcmlmeVNpZ25hdHVyZSB9IGZyb20gXCJAdXBsb2FkdGhpbmcvc2hhcmVkXCI7XG5pbXBvcnQgKiBhcyBFZmZlY3QgZnJvbSBcImVmZmVjdC9FZmZlY3RcIjtcbmltcG9ydCAqIGFzIEh0dHBBcHAgZnJvbSBcIkBlZmZlY3QvcGxhdGZvcm0vSHR0cEFwcFwiO1xuaW1wb3J0ICogYXMgSHR0cEJvZHkgZnJvbSBcIkBlZmZlY3QvcGxhdGZvcm0vSHR0cEJvZHlcIjtcbmltcG9ydCAqIGFzIEh0dHBDbGllbnQgZnJvbSBcIkBlZmZlY3QvcGxhdGZvcm0vSHR0cENsaWVudFwiO1xuaW1wb3J0ICogYXMgSHR0cENsaWVudFJlcXVlc3QgZnJvbSBcIkBlZmZlY3QvcGxhdGZvcm0vSHR0cENsaWVudFJlcXVlc3RcIjtcbmltcG9ydCAqIGFzIEh0dHBDbGllbnRSZXNwb25zZSBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IdHRwQ2xpZW50UmVzcG9uc2VcIjtcbmltcG9ydCAqIGFzIEh0dHBSb3V0ZXIgZnJvbSBcIkBlZmZlY3QvcGxhdGZvcm0vSHR0cFJvdXRlclwiO1xuaW1wb3J0ICogYXMgSHR0cFNlcnZlclJlcXVlc3QgZnJvbSBcIkBlZmZlY3QvcGxhdGZvcm0vSHR0cFNlcnZlclJlcXVlc3RcIjtcbmltcG9ydCAqIGFzIEh0dHBTZXJ2ZXJSZXNwb25zZSBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IdHRwU2VydmVyUmVzcG9uc2VcIjtcbmltcG9ydCAqIGFzIENvbmZpZyBmcm9tIFwiZWZmZWN0L0NvbmZpZ1wiO1xuaW1wb3J0ICogYXMgQ29udGV4dCBmcm9tIFwiZWZmZWN0L0NvbnRleHRcIjtcbmltcG9ydCAqIGFzIE1hdGNoIGZyb20gXCJlZmZlY3QvTWF0Y2hcIjtcbmltcG9ydCAqIGFzIFJlZGFjdGVkIGZyb20gXCJlZmZlY3QvUmVkYWN0ZWRcIjtcbmltcG9ydCAqIGFzIFMgZnJvbSBcImVmZmVjdC9TY2hlbWFcIjtcbmltcG9ydCAqIGFzIENvbmZpZ1Byb3ZpZGVyIGZyb20gXCJlZmZlY3QvQ29uZmlnUHJvdmlkZXJcIjtcbmltcG9ydCAqIGFzIFN0cmVhbSBmcm9tIFwiZWZmZWN0L1N0cmVhbVwiO1xuaW1wb3J0ICogYXMgQ29uZmlnRXJyb3IgZnJvbSBcImVmZmVjdC9Db25maWdFcnJvclwiO1xuaW1wb3J0ICogYXMgRWl0aGVyJDEgZnJvbSBcImVmZmVjdC9FaXRoZXJcIjtcbmltcG9ydCAqIGFzIExheWVyIGZyb20gXCJlZmZlY3QvTGF5ZXJcIjtcbmltcG9ydCAqIGFzIExvZ2dlciBmcm9tIFwiZWZmZWN0L0xvZ2dlclwiO1xuaW1wb3J0ICogYXMgTG9nTGV2ZWwgZnJvbSBcImVmZmVjdC9Mb2dMZXZlbFwiO1xuaW1wb3J0ICogYXMgQ2F1c2UgZnJvbSBcImVmZmVjdC9DYXVzZVwiO1xuaW1wb3J0ICogYXMgRGF0YSBmcm9tIFwiZWZmZWN0L0RhdGFcIjtcbmltcG9ydCAqIGFzIFJ1bnRpbWUgZnJvbSBcImVmZmVjdC9SdW50aW1lXCI7XG5pbXBvcnQgKiBhcyBGZXRjaEh0dHBDbGllbnQgZnJvbSBcIkBlZmZlY3QvcGxhdGZvcm0vRmV0Y2hIdHRwQ2xpZW50XCI7XG5pbXBvcnQgKiBhcyBIZWFkZXJzIGZyb20gXCJAZWZmZWN0L3BsYXRmb3JtL0hlYWRlcnNcIjtcbmltcG9ydCAqIGFzIEZpYmVyUmVmIGZyb20gXCJlZmZlY3QvRmliZXJSZWZcIjtcbmltcG9ydCAqIGFzIE1hbmFnZWRSdW50aW1lIGZyb20gXCJlZmZlY3QvTWFuYWdlZFJ1bnRpbWVcIjtcblxuLy8jcmVnaW9uIHNyYy9faW50ZXJuYWwvY29uZmlnLnRzXG4vKipcbiogTWVyZ2UgaW4gYGltcG9ydC5tZXRhLmVudmAgdG8gdGhlIGJ1aWx0LWluIGBwcm9jZXNzLmVudmAgcHJvdmlkZXJcbiogUHJlZml4IGtleXMgd2l0aCBgVVBMT0FEVEhJTkdfYCBzbyB3ZSBjYW4gcmVmZXJlbmNlIGp1c3QgdGhlIG5hbWUuXG4qIEBleGFtcGxlXG4qIHByb2Nlc3MuZW52LlVQTE9BRFRISU5HX1RPS0VOID0gXCJmb29cIlxuKiBDb25maWcuc3RyaW5nKFwidG9rZW5cIik7IC8vIENvbmZpZzxcImZvb1wiPlxuKi9cbmNvbnN0IGVudlByb3ZpZGVyID0gQ29uZmlnUHJvdmlkZXIuZnJvbUVudigpLnBpcGUoQ29uZmlnUHJvdmlkZXIub3JFbHNlKCgpID0+IENvbmZpZ1Byb3ZpZGVyLmZyb21NYXAobmV3IE1hcChPYmplY3QuZW50cmllcyhmaWx0ZXJEZWZpbmVkT2JqZWN0VmFsdWVzKGltcG9ydC5tZXRhPy5lbnYgPz8ge30pKSksIHsgcGF0aERlbGltOiBcIl9cIiB9KSksIENvbmZpZ1Byb3ZpZGVyLm5lc3RlZChcInVwbG9hZHRoaW5nXCIpLCBDb25maWdQcm92aWRlci5jb25zdGFudENhc2UpO1xuLyoqXG4qIENvbmZpZyBwcm92aWRlciB0aGF0IG1lcmdlcyB0aGUgb3B0aW9ucyBmcm9tIHRoZSBvYmplY3RcbiogYW5kIGVudmlyb25tZW50IHZhcmlhYmxlcyBwcmVmaXhlZCB3aXRoIGBVUExPQURUSElOR19gLlxuKiBAcmVtYXJrcyBPcHRpb25zIHRha2UgcHJlY2VkZW5jZSBvdmVyIGVudmlyb25tZW50IHZhcmlhYmxlcy5cbiovXG5jb25zdCBjb25maWdQcm92aWRlciA9IChvcHRpb25zKSA9PiBDb25maWdQcm92aWRlci5mcm9tSnNvbihvcHRpb25zID8/IHt9KS5waXBlKENvbmZpZ1Byb3ZpZGVyLm9yRWxzZSgoKSA9PiBlbnZQcm92aWRlcikpO1xuY29uc3QgSXNEZXZlbG9wbWVudCA9IENvbmZpZy5ib29sZWFuKFwiaXNEZXZcIikucGlwZShDb25maWcub3JFbHNlKCgpID0+IENvbmZpZy5zdWNjZWVkKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgOiB2b2lkIDApLnBpcGUoQ29uZmlnLm1hcCgoXykgPT4gXyA9PT0gXCJkZXZlbG9wbWVudFwiKSkpLCBDb25maWcud2l0aERlZmF1bHQoZmFsc2UpKTtcbmNvbnN0IFVUVG9rZW4gPSBTLkNvbmZpZyhcInRva2VuXCIsIFVwbG9hZFRoaW5nVG9rZW4pLnBpcGUoRWZmZWN0LmNhdGNoVGFncyh7IENvbmZpZ0Vycm9yOiAoZSkgPT4gbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRjb2RlOiBlLl9vcCA9PT0gXCJJbnZhbGlkRGF0YVwiID8gXCJJTlZBTElEX1NFUlZFUl9DT05GSUdcIiA6IFwiTUlTU0lOR19FTlZcIixcblx0bWVzc2FnZTogZS5fb3AgPT09IFwiSW52YWxpZERhdGFcIiA/IFwiSW52YWxpZCB0b2tlbi4gQSB0b2tlbiBpcyBhIGJhc2U2NCBlbmNvZGVkIEpTT04gb2JqZWN0IG1hdGNoaW5nIHsgYXBpS2V5OiBzdHJpbmcsIGFwcElkOiBzdHJpbmcsIHJlZ2lvbnM6IHN0cmluZ1tdIH0uXCIgOiBcIk1pc3NpbmcgdG9rZW4uIFBsZWFzZSBzZXQgdGhlIGBVUExPQURUSElOR19UT0tFTmAgZW52aXJvbm1lbnQgdmFyaWFibGUgb3IgcHJvdmlkZSBhIHRva2VuIG1hbnVhbGx5IHRocm91Z2ggY29uZmlnLlwiLFxuXHRjYXVzZTogZVxufSkgfSkpO1xuY29uc3QgQXBpVXJsID0gQ29uZmlnLnN0cmluZyhcImFwaVVybFwiKS5waXBlKENvbmZpZy53aXRoRGVmYXVsdChcImh0dHBzOi8vYXBpLnVwbG9hZHRoaW5nLmNvbVwiKSwgQ29uZmlnLm1hcEF0dGVtcHQoKF8pID0+IG5ldyBVUkwoXykpLCBDb25maWcubWFwKCh1cmwpID0+IHVybC5ocmVmLnJlcGxhY2UoL1xcLyQvLCBcIlwiKSkpO1xuY29uc3QgSW5nZXN0VXJsID0gRWZmZWN0LmZuKGZ1bmN0aW9uKiAocHJlZmVycmVkUmVnaW9uKSB7XG5cdGNvbnN0IHsgcmVnaW9ucywgaW5nZXN0SG9zdCB9ID0geWllbGQqIFVUVG9rZW47XG5cdGNvbnN0IHJlZ2lvbiA9IHByZWZlcnJlZFJlZ2lvbiA/IHJlZ2lvbnMuZmluZCgocikgPT4gciA9PT0gcHJlZmVycmVkUmVnaW9uKSA/PyByZWdpb25zWzBdIDogcmVnaW9uc1swXTtcblx0cmV0dXJuIHlpZWxkKiBDb25maWcuc3RyaW5nKFwiaW5nZXN0VXJsXCIpLnBpcGUoQ29uZmlnLndpdGhEZWZhdWx0KGBodHRwczovLyR7cmVnaW9ufS4ke2luZ2VzdEhvc3R9YCksIENvbmZpZy5tYXBBdHRlbXB0KChfKSA9PiBuZXcgVVJMKF8pKSwgQ29uZmlnLm1hcCgodXJsKSA9PiB1cmwuaHJlZi5yZXBsYWNlKC9cXC8kLywgXCJcIikpKTtcbn0pO1xuY29uc3QgVXRmc0hvc3QgPSBDb25maWcuc3RyaW5nKFwidXRmc0hvc3RcIikucGlwZShDb25maWcud2l0aERlZmF1bHQoXCJ1dGZzLmlvXCIpKTtcbmNvbnN0IFVmc0hvc3QgPSBDb25maWcuc3RyaW5nKFwidWZzSG9zdFwiKS5waXBlKENvbmZpZy53aXRoRGVmYXVsdChcInVmcy5zaFwiKSk7XG5jb25zdCBVZnNBcHBJZExvY2F0aW9uID0gQ29uZmlnLmxpdGVyYWwoXCJzdWJkb21haW5cIiwgXCJwYXRoXCIpKFwidWZzQXBwSWRMb2NhdGlvblwiKS5waXBlKENvbmZpZy53aXRoRGVmYXVsdChcInN1YmRvbWFpblwiKSk7XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9faW50ZXJuYWwvZXJyb3ItZm9ybWF0dGVyLnRzXG5mdW5jdGlvbiBkZWZhdWx0RXJyb3JGb3JtYXR0ZXIoZXJyb3IpIHtcblx0cmV0dXJuIHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9O1xufVxuZnVuY3Rpb24gZm9ybWF0RXJyb3IoZXJyb3IsIHJvdXRlcikge1xuXHRjb25zdCBmaXJzdFNsdWcgPSBPYmplY3Qua2V5cyhyb3V0ZXIpWzBdO1xuXHRjb25zdCBlcnJvckZvcm1hdHRlciA9IGZpcnN0U2x1ZyA/IHJvdXRlcltmaXJzdFNsdWddPy5lcnJvckZvcm1hdHRlciA/PyBkZWZhdWx0RXJyb3JGb3JtYXR0ZXIgOiBkZWZhdWx0RXJyb3JGb3JtYXR0ZXI7XG5cdHJldHVybiBlcnJvckZvcm1hdHRlcihlcnJvcik7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9faW50ZXJuYWwvanNvbmwudHNcbmNvbnN0IGhhbmRsZUpzb25MaW5lU3RyZWFtID0gKHNjaGVtYSwgb25DaHVuaykgPT4gKHN0cmVhbSkgPT4ge1xuXHRsZXQgYnVmID0gXCJcIjtcblx0cmV0dXJuIHN0cmVhbS5waXBlKFN0cmVhbS5kZWNvZGVUZXh0KCksIFN0cmVhbS5tYXBFZmZlY3QoKGNodW5rKSA9PiBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdFx0YnVmICs9IGNodW5rO1xuXHRcdGNvbnN0IHBhcnRzID0gYnVmLnNwbGl0KFwiXFxuXCIpO1xuXHRcdGNvbnN0IHZhbGlkQ2h1bmtzID0gW107XG5cdFx0Zm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB0cnkge1xuXHRcdFx0dmFsaWRDaHVua3MucHVzaChKU09OLnBhcnNlKHBhcnQpKTtcblx0XHRcdGJ1ZiA9IGJ1Zi5zbGljZShwYXJ0Lmxlbmd0aCArIDEpO1xuXHRcdH0gY2F0Y2gge31cblx0XHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiUmVjZWl2ZWQgY2h1bmtzXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImNodW5rXCIsIGNodW5rKSwgRWZmZWN0LmFubm90YXRlTG9ncyhcInBhcnNlZENodW5rc1wiLCB2YWxpZENodW5rcyksIEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJidWZcIiwgYnVmKSk7XG5cdFx0cmV0dXJuIHZhbGlkQ2h1bmtzO1xuXHR9KSksIFN0cmVhbS5tYXBFZmZlY3QoUy5kZWNvZGVVbmtub3duKFMuQXJyYXkoc2NoZW1hKSkpLCBTdHJlYW0ubWFwRWZmZWN0KEVmZmVjdC5mb3JFYWNoKChwYXJ0KSA9PiBvbkNodW5rKHBhcnQpKSksIFN0cmVhbS5ydW5EcmFpbiwgRWZmZWN0LndpdGhMb2dTcGFuKFwiaGFuZGxlSnNvbkxpbmVTdHJlYW1cIikpO1xufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL19pbnRlcm5hbC9sb2dnZXIudHNcbi8qKlxuKiBDb25maWcubG9nTGV2ZWwgY291bnRlci1pbnR1aXRpdmVseSBhY2NlcHRzIExvZ0xldmVsW1wibGFiZWxcIl1cbiogaW5zdGVhZCBvZiBhIGxpdGVyYWwsIHJpcHBpbmcgaXQgYW5kIGNoYW5naW5nIHRvIGFjY2VwdCBsaXRlcmFsXG4qIEVmZmVjdCA0LjAgd2lsbCBjaGFuZ2UgdGhpcyB0byBhY2NlcHQgYSBsaXRlcmFsIGFuZCB0aGVuIHdlIGNhblxuKiByZW1vdmUgdGhpcyBhbmQgZ28gYmFjayB0byB0aGUgYnVpbHQtaW4gdmFsaWRhdG9yLlxuKi9cbmNvbnN0IENvbmZpZ0xvZ0xldmVsID0gKG5hbWUpID0+IHtcblx0Y29uc3QgY29uZmlnID0gQ29uZmlnLm1hcE9yRmFpbChDb25maWcuc3RyaW5nKCksIChsaXRlcmFsKSA9PiB7XG5cdFx0Y29uc3QgbGV2ZWwgPSBMb2dMZXZlbC5hbGxMZXZlbHMuZmluZCgobGV2ZWwkMSkgPT4gbGV2ZWwkMS5fdGFnID09PSBsaXRlcmFsKTtcblx0XHRyZXR1cm4gbGV2ZWwgPT09IHZvaWQgMCA/IEVpdGhlciQxLmxlZnQoQ29uZmlnRXJyb3IuSW52YWxpZERhdGEoW10sIGBFeHBlY3RlZCBhIGxvZyBsZXZlbCBidXQgcmVjZWl2ZWQgJHtsaXRlcmFsfWApKSA6IEVpdGhlciQxLnJpZ2h0KGxldmVsKTtcblx0fSk7XG5cdHJldHVybiBuYW1lID09PSB2b2lkIDAgPyBjb25maWcgOiBDb25maWcubmVzdGVkKGNvbmZpZywgbmFtZSk7XG59O1xuY29uc3Qgd2l0aE1pbmltYWxMb2dMZXZlbCA9IENvbmZpZ0xvZ0xldmVsKFwibG9nTGV2ZWxcIikucGlwZShDb25maWcud2l0aERlZmF1bHQoTG9nTGV2ZWwuSW5mbyksIEVmZmVjdC5hbmRUaGVuKChsZXZlbCkgPT4gTG9nZ2VyLm1pbmltdW1Mb2dMZXZlbChsZXZlbCkpLCBFZmZlY3QudGFwRXJyb3IoKGUpID0+IEVmZmVjdC5sb2dFcnJvcihcIkludmFsaWQgbG9nIGxldmVsXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImVycm9yXCIsIGUpKSksIEVmZmVjdC5jYXRjaFRhZyhcIkNvbmZpZ0Vycm9yXCIsIChlKSA9PiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdGNvZGU6IFwiSU5WQUxJRF9TRVJWRVJfQ09ORklHXCIsXG5cdG1lc3NhZ2U6IFwiSW52YWxpZCBzZXJ2ZXIgY29uZmlndXJhdGlvblwiLFxuXHRjYXVzZTogZVxufSkpLCBMYXllci51bndyYXBFZmZlY3QpO1xuY29uc3QgTG9nRm9ybWF0ID0gQ29uZmlnLmxpdGVyYWwoXCJqc29uXCIsIFwibG9nRm10XCIsIFwic3RydWN0dXJlZFwiLCBcInByZXR0eVwiKShcImxvZ0Zvcm1hdFwiKTtcbmNvbnN0IHdpdGhMb2dGb3JtYXQgPSBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdGNvbnN0IGlzRGV2ID0geWllbGQqIElzRGV2ZWxvcG1lbnQ7XG5cdGNvbnN0IGxvZ0Zvcm1hdCA9IHlpZWxkKiBMb2dGb3JtYXQucGlwZShDb25maWcud2l0aERlZmF1bHQoaXNEZXYgPyBcInByZXR0eVwiIDogXCJqc29uXCIpKTtcblx0cmV0dXJuIExvZ2dlcltsb2dGb3JtYXRdO1xufSkucGlwZShFZmZlY3QuY2F0Y2hUYWcoXCJDb25maWdFcnJvclwiLCAoZSkgPT4gbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRjb2RlOiBcIklOVkFMSURfU0VSVkVSX0NPTkZJR1wiLFxuXHRtZXNzYWdlOiBcIkludmFsaWQgc2VydmVyIGNvbmZpZ3VyYXRpb25cIixcblx0Y2F1c2U6IGVcbn0pKSwgTGF5ZXIudW53cmFwRWZmZWN0KTtcbmNvbnN0IGxvZ0h0dHBDbGllbnRSZXNwb25zZSA9IChtZXNzYWdlLCBvcHRzKSA9PiB7XG5cdGNvbnN0IG1peGluID0gb3B0cz8ubWl4aW4gPz8gXCJqc29uXCI7XG5cdGNvbnN0IGxldmVsID0gTG9nTGV2ZWwuZnJvbUxpdGVyYWwob3B0cz8ubGV2ZWwgPz8gXCJEZWJ1Z1wiKTtcblx0cmV0dXJuIChyZXNwb25zZSkgPT4gRWZmZWN0LmZsYXRNYXAobWl4aW4gIT09IFwiTm9uZVwiID8gcmVzcG9uc2VbbWl4aW5dIDogRWZmZWN0LnZvaWQsICgpID0+IEVmZmVjdC5sb2dXaXRoTGV2ZWwobGV2ZWwsIGAke21lc3NhZ2V9ICgke3Jlc3BvbnNlLnN0YXR1c30pYCkucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwicmVzcG9uc2VcIiwgcmVzcG9uc2UpKSk7XG59O1xuY29uc3QgbG9nSHR0cENsaWVudEVycm9yID0gKG1lc3NhZ2UpID0+IChlcnIpID0+IGVyci5fdGFnID09PSBcIlJlc3BvbnNlRXJyb3JcIiA/IGxvZ0h0dHBDbGllbnRSZXNwb25zZShtZXNzYWdlLCB7IGxldmVsOiBcIkVycm9yXCIgfSkoZXJyLnJlc3BvbnNlKSA6IEVmZmVjdC5sb2dFcnJvcihtZXNzYWdlKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJlcnJvclwiLCBlcnIpKTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL19pbnRlcm5hbC9wYXJzZXIudHNcbnZhciBQYXJzZXJFcnJvciA9IGNsYXNzIGV4dGVuZHMgRGF0YS5UYWdnZWRFcnJvcihcIlBhcnNlckVycm9yXCIpIHtcblx0bWVzc2FnZSA9IFwiSW5wdXQgdmFsaWRhdGlvbiBmYWlsZWQuIFRoZSBvcmlnaW5hbCBlcnJvciB3aXRoIGl0J3MgdmFsaWRhdGlvbiBpc3N1ZXMgaXMgaW4gdGhlIGVycm9yIGNhdXNlLlwiO1xufTtcbmZ1bmN0aW9uIGdldFBhcnNlRm4ocGFyc2VyKSB7XG5cdGlmIChcInBhcnNlQXN5bmNcIiBpbiBwYXJzZXIgJiYgdHlwZW9mIHBhcnNlci5wYXJzZUFzeW5jID09PSBcImZ1bmN0aW9uXCIpXG4gLyoqXG5cdCogWm9kXG5cdCogVE9ETyAobmV4dCBtYWpvcik6IENvbnNpZGVyIHdyYXBwaW5nIFpvZEVycm9yIGluIFBhcnNlckVycm9yXG5cdCovXG5cdHJldHVybiBwYXJzZXIucGFyc2VBc3luYztcblx0aWYgKFMuaXNTY2hlbWEocGFyc2VyKSlcbiAvKipcblx0KiBFZmZlY3QgU2NoZW1hXG5cdCovXG5cdHJldHVybiAodmFsdWUpID0+IFMuZGVjb2RlVW5rbm93blByb21pc2UocGFyc2VyKSh2YWx1ZSkuY2F0Y2goKGVycm9yKSA9PiB7XG5cdFx0dGhyb3cgbmV3IFBhcnNlckVycm9yKHsgY2F1c2U6IENhdXNlLnNxdWFzaChlcnJvcltSdW50aW1lLkZpYmVyRmFpbHVyZUNhdXNlSWRdKSB9KTtcblx0fSk7XG5cdGlmIChcIn5zdGFuZGFyZFwiIGluIHBhcnNlcilcbiAvKipcblx0KiBTdGFuZGFyZCBTY2hlbWFcblx0KiBUT0RPIChuZXh0IG1ham9yKTogQ29uc2lkZXIgbW92aW5nIHRoaXMgdG8gdGhlIHRvcCBvZiB0aGUgZnVuY3Rpb25cblx0Ki9cblx0cmV0dXJuIGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBhcnNlcltcIn5zdGFuZGFyZFwiXS52YWxpZGF0ZSh2YWx1ZSk7XG5cdFx0aWYgKHJlc3VsdC5pc3N1ZXMpIHRocm93IG5ldyBQYXJzZXJFcnJvcih7IGNhdXNlOiByZXN1bHQuaXNzdWVzIH0pO1xuXHRcdHJldHVybiByZXN1bHQudmFsdWU7XG5cdH07XG5cdHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFyc2VyXCIpO1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL3JvdXRlLWNvbmZpZy50c1xudmFyIEZpbGVTaXplTWlzbWF0Y2ggPSBjbGFzcyBleHRlbmRzIERhdGEuRXJyb3Ige1xuXHRfdGFnID0gXCJGaWxlU2l6ZU1pc21hdGNoXCI7XG5cdG5hbWUgPSBcIkZpbGVTaXplTWlzbWF0Y2hFcnJvclwiO1xuXHRjb25zdHJ1Y3Rvcih0eXBlLCBtYXgsIGFjdHVhbCkge1xuXHRcdGNvbnN0IHJlYXNvbiA9IGBZb3UgdXBsb2FkZWQgYSAke3R5cGV9IGZpbGUgdGhhdCB3YXMgJHtieXRlc1RvRmlsZVNpemUoYWN0dWFsKX0sIGJ1dCB0aGUgbGltaXQgZm9yIHRoYXQgdHlwZSBpcyAke21heH1gO1xuXHRcdHN1cGVyKHsgcmVhc29uIH0pO1xuXHR9XG59O1xudmFyIEZpbGVDb3VudE1pc21hdGNoID0gY2xhc3MgZXh0ZW5kcyBEYXRhLkVycm9yIHtcblx0X3RhZyA9IFwiRmlsZUNvdW50TWlzbWF0Y2hcIjtcblx0bmFtZSA9IFwiRmlsZUNvdW50TWlzbWF0Y2hFcnJvclwiO1xuXHRjb25zdHJ1Y3Rvcih0eXBlLCBib3VuZHR5cGUsIGJvdW5kLCBhY3R1YWwpIHtcblx0XHRjb25zdCByZWFzb24gPSBgWW91IHVwbG9hZGVkICR7YWN0dWFsfSBmaWxlKHMpIG9mIHR5cGUgJyR7dHlwZX0nLCBidXQgdGhlICR7Ym91bmR0eXBlfSBmb3IgdGhhdCB0eXBlIGlzICR7Ym91bmR9YDtcblx0XHRzdXBlcih7IHJlYXNvbiB9KTtcblx0fVxufTtcbmNvbnN0IGFzc2VydEZpbGVzTWVldENvbmZpZyA9IChmaWxlcywgcm91dGVDb25maWcpID0+IEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcblx0Y29uc3QgY291bnRzID0ge307XG5cdGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuXHRcdGNvbnN0IHR5cGUgPSB5aWVsZCogbWF0Y2hGaWxlVHlwZShmaWxlLCBvYmplY3RLZXlzKHJvdXRlQ29uZmlnKSk7XG5cdFx0Y291bnRzW3R5cGVdID0gKGNvdW50c1t0eXBlXSA/PyAwKSArIDE7XG5cdFx0Y29uc3Qgc2l6ZUxpbWl0ID0gcm91dGVDb25maWdbdHlwZV0/Lm1heEZpbGVTaXplO1xuXHRcdGlmICghc2l6ZUxpbWl0KSByZXR1cm4geWllbGQqIG5ldyBJbnZhbGlkUm91dGVDb25maWdFcnJvcih0eXBlLCBcIm1heEZpbGVTaXplXCIpO1xuXHRcdGNvbnN0IHNpemVMaW1pdEJ5dGVzID0geWllbGQqIGZpbGVTaXplVG9CeXRlcyhzaXplTGltaXQpO1xuXHRcdGlmIChmaWxlLnNpemUgPiBzaXplTGltaXRCeXRlcykgcmV0dXJuIHlpZWxkKiBuZXcgRmlsZVNpemVNaXNtYXRjaCh0eXBlLCBzaXplTGltaXQsIGZpbGUuc2l6ZSk7XG5cdH1cblx0Zm9yIChjb25zdCBfa2V5IGluIGNvdW50cykge1xuXHRcdGNvbnN0IGtleSA9IF9rZXk7XG5cdFx0Y29uc3QgY29uZmlnID0gcm91dGVDb25maWdba2V5XTtcblx0XHRpZiAoIWNvbmZpZykgcmV0dXJuIHlpZWxkKiBuZXcgSW52YWxpZFJvdXRlQ29uZmlnRXJyb3Ioa2V5KTtcblx0XHRjb25zdCBjb3VudCA9IGNvdW50c1trZXldO1xuXHRcdGNvbnN0IG1pbiA9IGNvbmZpZy5taW5GaWxlQ291bnQ7XG5cdFx0Y29uc3QgbWF4ID0gY29uZmlnLm1heEZpbGVDb3VudDtcblx0XHRpZiAobWluID4gbWF4KSByZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcblx0XHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRcdG1lc3NhZ2U6IFwiSW52YWxpZCBjb25maWcgZHVyaW5nIGZpbGUgY291bnQgLSBtaW5GaWxlQ291bnQgPiBtYXhGaWxlQ291bnRcIixcblx0XHRcdGNhdXNlOiBgbWluRmlsZUNvdW50IG11c3QgYmUgbGVzcyB0aGFuIG1heEZpbGVDb3VudCBmb3Iga2V5ICR7a2V5fS4gZ290OiAke21pbn0gPiAke21heH1gXG5cdFx0fSk7XG5cdFx0aWYgKGNvdW50ICE9IG51bGwgJiYgY291bnQgPCBtaW4pIHJldHVybiB5aWVsZCogbmV3IEZpbGVDb3VudE1pc21hdGNoKGtleSwgXCJtaW5pbXVtXCIsIG1pbiwgY291bnQpO1xuXHRcdGlmIChjb3VudCAhPSBudWxsICYmIGNvdW50ID4gbWF4KSByZXR1cm4geWllbGQqIG5ldyBGaWxlQ291bnRNaXNtYXRjaChrZXksIFwibWF4aW11bVwiLCBtYXgsIGNvdW50KTtcblx0fVxuXHRyZXR1cm4gbnVsbDtcbn0pO1xuY29uc3QgZXh0cmFjdFJvdXRlckNvbmZpZyA9IChyb3V0ZXIpID0+IEVmZmVjdC5mb3JFYWNoKG9iamVjdEtleXMocm91dGVyKSwgKHNsdWcpID0+IEVmZmVjdC5tYXAoZmlsbElucHV0Um91dGVDb25maWcocm91dGVyW3NsdWddLnJvdXRlckNvbmZpZyksIChjb25maWcpID0+ICh7XG5cdHNsdWcsXG5cdGNvbmZpZ1xufSkpKTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL19pbnRlcm5hbC9ydW50aW1lLnRzXG5jb25zdCBtYWtlUnVudGltZSA9IChmZXRjaCwgY29uZmlnKSA9PiB7XG5cdGNvbnN0IGZldGNoSHR0cENsaWVudCA9IExheWVyLnByb3ZpZGVNZXJnZShGZXRjaEh0dHBDbGllbnQubGF5ZXIsIExheWVyLnN1Y2NlZWQoRmV0Y2hIdHRwQ2xpZW50LkZldGNoLCBmZXRjaCkpO1xuXHRjb25zdCB3aXRoUmVkYWN0ZWRIZWFkZXJzID0gTGF5ZXIuZWZmZWN0RGlzY2FyZChGaWJlclJlZi51cGRhdGUoSGVhZGVycy5jdXJyZW50UmVkYWN0ZWROYW1lcywgKF8pID0+IF8uY29uY2F0KFtcIngtdXBsb2FkdGhpbmctYXBpLWtleVwiXSkpKTtcblx0Y29uc3QgbGF5ZXIgPSBMYXllci5wcm92aWRlKExheWVyLm1lcmdlQWxsKHdpdGhMb2dGb3JtYXQsIHdpdGhNaW5pbWFsTG9nTGV2ZWwsIGZldGNoSHR0cENsaWVudCwgd2l0aFJlZGFjdGVkSGVhZGVycyksIExheWVyLnNldENvbmZpZ1Byb3ZpZGVyKGNvbmZpZ1Byb3ZpZGVyKGNvbmZpZykpKTtcblx0cmV0dXJuIE1hbmFnZWRSdW50aW1lLm1ha2UobGF5ZXIpO1xufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL19pbnRlcm5hbC90eXBlcy50c1xuLyoqXG4qIE1hcmtlciB1c2VkIHRvIHNlbGVjdCB0aGUgcmVnaW9uIGJhc2VkIG9uIHRoZSBpbmNvbWluZyByZXF1ZXN0XG4qL1xuY29uc3QgVVRSZWdpb24gPSBTeW1ib2woXCJ1cGxvYWR0aGluZy1yZWdpb24tc3ltYm9sXCIpO1xuLyoqXG4qIE1hcmtlciB1c2VkIHRvIGFwcGVuZCBhIGBjdXN0b21JZGAgdG8gdGhlIGluY29taW5nIGZpbGUgZGF0YSBpbiBgLm1pZGRsZXdhcmUoKWBcbiogQGV4YW1wbGVcbiogYGBgdHNcbiogLm1pZGRsZXdhcmUoKG9wdHMpID0+IHtcbiogICByZXR1cm4ge1xuKiAgICAgW1VURmlsZXNdOiBvcHRzLmZpbGVzLm1hcCgoZmlsZSkgPT4gKHtcbiogICAgICAgLi4uZmlsZSxcbiogICAgICAgY3VzdG9tSWQ6IGdlbmVyYXRlSWQoKSxcbiogICAgIH0pKVxuKiAgIH07XG4qIH0pXG4qIGBgYFxuKi9cbmNvbnN0IFVURmlsZXMgPSBTeW1ib2woXCJ1cGxvYWR0aGluZy1jdXN0b20taWQtc3ltYm9sXCIpO1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL2hhbmRsZXIudHNcbnZhciBBZGFwdGVyQXJndW1lbnRzID0gY2xhc3MgZXh0ZW5kcyBDb250ZXh0LlRhZyhcInVwbG9hZHRoaW5nL0FkYXB0ZXJBcmd1bWVudHNcIikoKSB7fTtcbi8qKlxuKiBDcmVhdGUgYSByZXF1ZXN0IGhhbmRsZXIgYWRhcHRlciBmb3IgYW55IGZyYW1ld29yayBvciBzZXJ2ZXIgbGlicmFyeS5cbiogUmVmZXIgdG8gdGhlIGV4aXN0aW5nIGFkYXB0ZXJzIGZvciBleGFtcGxlcyBvbiBob3cgdG8gdXNlIHRoaXMgZnVuY3Rpb24uXG4qIEBwdWJsaWNcbipcbiogQHBhcmFtIG1ha2VBZGFwdGVyQXJncyAtIEZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhlIGFyZ3MgZnJvbSB5b3VyIGZyYW1ld29yayBhbmQgcmV0dXJucyBhbiBFZmZlY3QgdGhhdCByZXNvbHZlcyB0byB0aGUgYWRhcHRlciBhcmdzLlxuKiBUaGVzZSBhcmdzIGFyZSBwYXNzZWQgdG8gdGhlIGAubWlkZGxld2FyZWAsIGAub25VcGxvYWRDb21wbGV0ZWAsIGFuZCBgLm9uVXBsb2FkRXJyb3JgIGhvb2tzLlxuKiBAcGFyYW0gdG9SZXF1ZXN0IC0gRnVuY3Rpb24gdGhhdCB0YWtlcyB0aGUgYXJncyBmcm9tIHlvdXIgZnJhbWV3b3JrIGFuZCByZXR1cm5zIGFuIEVmZmVjdCB0aGF0IHJlc29sdmVzIHRvIGEgd2ViIFJlcXVlc3Qgb2JqZWN0LlxuKiBAcGFyYW0gb3B0cyAtIFRoZSByb3V0ZXIgY29uZmlnIGFuZCBvdGhlciBvcHRpb25zIHRoYXQgYXJlIG5vcm1hbGx5IHBhc3NlZCB0byBgY3JlYXRlUmVxdWVzdEhhbmRsZXJgIG9mIG9mZmljaWFsIGFkYXB0ZXJzXG4qIEBwYXJhbSBiZUFkYXB0ZXIgLSBbT3B0aW9uYWxdIFRoZSBhZGFwdGVyIG5hbWUgb2YgdGhlIGFkYXB0ZXIsIHVzZWQgZm9yIHRlbGVtZXRyeSBwdXJwb3Nlc1xuKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhlIGFyZ3MgZnJvbSB5b3VyIGZyYW1ld29yayBhbmQgcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIFJlc3BvbnNlIG9iamVjdC5cbiovXG5jb25zdCBtYWtlQWRhcHRlckhhbmRsZXIgPSAobWFrZUFkYXB0ZXJBcmdzLCB0b1JlcXVlc3QsIG9wdHMsIGJlQWRhcHRlcikgPT4ge1xuXHRjb25zdCBtYW5hZ2VkID0gbWFrZVJ1bnRpbWUob3B0cy5jb25maWc/LmZldGNoLCBvcHRzLmNvbmZpZyk7XG5cdGNvbnN0IGhhbmRsZSA9IEVmZmVjdC5wcm9taXNlKCgpID0+IG1hbmFnZWQucnVudGltZSgpLnRoZW4oSHR0cEFwcC50b1dlYkhhbmRsZXJSdW50aW1lKSk7XG5cdGNvbnN0IGFwcCA9ICguLi5hcmdzKSA9PiBFZmZlY3QubWFwKEVmZmVjdC5wcm9taXNlKCgpID0+IG1hbmFnZWQucnVuUHJvbWlzZShjcmVhdGVSZXF1ZXN0SGFuZGxlcihvcHRzLCBiZUFkYXB0ZXIgPz8gXCJjdXN0b21cIikpKSwgRWZmZWN0LnByb3ZpZGVTZXJ2aWNlRWZmZWN0KEFkYXB0ZXJBcmd1bWVudHMsIG1ha2VBZGFwdGVyQXJncyguLi5hcmdzKSkpO1xuXHRyZXR1cm4gYXN5bmMgKC4uLmFyZ3MpID0+IHtcblx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGUucGlwZShFZmZlY3QuYXAoYXBwKC4uLmFyZ3MpKSwgRWZmZWN0LmFwKHRvUmVxdWVzdCguLi5hcmdzKSksIEVmZmVjdC53aXRoTG9nU3BhbihcInJlcXVlc3RIYW5kbGVyXCIpLCBtYW5hZ2VkLnJ1blByb21pc2UpO1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH07XG59O1xuY29uc3QgY3JlYXRlUmVxdWVzdEhhbmRsZXIgPSAob3B0cywgYmVBZGFwdGVyKSA9PiBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdGNvbnN0IGlzRGV2ZWxvcG1lbnQgPSB5aWVsZCogSXNEZXZlbG9wbWVudDtcblx0Y29uc3Qgcm91dGVyQ29uZmlnID0geWllbGQqIGV4dHJhY3RSb3V0ZXJDb25maWcob3B0cy5yb3V0ZXIpO1xuXHRjb25zdCBoYW5kbGVEYWVtb24gPSAoKCkgPT4ge1xuXHRcdGlmIChvcHRzLmNvbmZpZz8uaGFuZGxlRGFlbW9uUHJvbWlzZSkgcmV0dXJuIG9wdHMuY29uZmlnLmhhbmRsZURhZW1vblByb21pc2U7XG5cdFx0cmV0dXJuIGlzRGV2ZWxvcG1lbnQgPyBcInZvaWRcIiA6IFwiYXdhaXRcIjtcblx0fSkoKTtcblx0aWYgKGlzRGV2ZWxvcG1lbnQgJiYgaGFuZGxlRGFlbW9uID09PSBcImF3YWl0XCIpIHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRcdGNvZGU6IFwiSU5WQUxJRF9TRVJWRVJfQ09ORklHXCIsXG5cdFx0bWVzc2FnZTogXCJoYW5kbGVEYWVtb25Qcm9taXNlOiBcXFwiYXdhaXRcXFwiIGlzIGZvcmJpZGRlbiBpbiBkZXZlbG9wbWVudC5cIlxuXHR9KTtcblx0Y29uc3QgR0VUID0gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuXHRcdHJldHVybiB5aWVsZCogSHR0cFNlcnZlclJlc3BvbnNlLmpzb24ocm91dGVyQ29uZmlnKTtcblx0fSk7XG5cdGNvbnN0IFBPU1QgPSBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdFx0Y29uc3QgeyBcInVwbG9hZHRoaW5nLWhvb2tcIjogdXBsb2FkdGhpbmdIb29rLCBcIngtdXBsb2FkdGhpbmctcGFja2FnZVwiOiBmZVBhY2thZ2UsIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IGNsaWVudFZlcnNpb24gfSA9IHlpZWxkKiBIdHRwU2VydmVyUmVxdWVzdC5zY2hlbWFIZWFkZXJzKFMuU3RydWN0KHtcblx0XHRcdFwidXBsb2FkdGhpbmctaG9va1wiOiBVcGxvYWRUaGluZ0hvb2sucGlwZShTLm9wdGlvbmFsKSxcblx0XHRcdFwieC11cGxvYWR0aGluZy1wYWNrYWdlXCI6IFMuU3RyaW5nLnBpcGUoUy5vcHRpb25hbFdpdGgoeyBkZWZhdWx0OiAoKSA9PiBcInVua25vd25cIiB9KSksXG5cdFx0XHRcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiBTLlN0cmluZy5waXBlKFMub3B0aW9uYWxXaXRoKHsgZGVmYXVsdDogKCkgPT4gdmVyc2lvbiB9KSlcblx0XHR9KSk7XG5cdFx0aWYgKGNsaWVudFZlcnNpb24gIT09IHZlcnNpb24pIHtcblx0XHRcdGNvbnN0IHNlcnZlclZlcnNpb24gPSB2ZXJzaW9uO1xuXHRcdFx0eWllbGQqIEVmZmVjdC5sb2dXYXJuaW5nKFwiQ2xpZW50IHZlcnNpb24gbWlzbWF0Y2guIFRoaW5ncyBtYXkgbm90IHdvcmsgYXMgZXhwZWN0ZWQsIHBsZWFzZSBzeW5jIHlvdXIgdmVyc2lvbnMgdG8gZW5zdXJlIGNvbXBhdGliaWxpdHkuXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyh7XG5cdFx0XHRcdGNsaWVudFZlcnNpb24sXG5cdFx0XHRcdHNlcnZlclZlcnNpb25cblx0XHRcdH0pKTtcblx0XHR9XG5cdFx0Y29uc3QgeyBzbHVnLCBhY3Rpb25UeXBlIH0gPSB5aWVsZCogSHR0cFJvdXRlci5zY2hlbWFQYXJhbXMoUy5TdHJ1Y3Qoe1xuXHRcdFx0YWN0aW9uVHlwZTogQWN0aW9uVHlwZS5waXBlKFMub3B0aW9uYWwpLFxuXHRcdFx0c2x1ZzogUy5TdHJpbmdcblx0XHR9KSk7XG5cdFx0Y29uc3QgdXBsb2FkYWJsZSA9IG9wdHMucm91dGVyW3NsdWddO1xuXHRcdGlmICghdXBsb2FkYWJsZSkge1xuXHRcdFx0Y29uc3QgbXNnID0gYE5vIGZpbGUgcm91dGUgZm91bmQgZm9yIHNsdWcgJHtzbHVnfWA7XG5cdFx0XHR5aWVsZCogRWZmZWN0LmxvZ0Vycm9yKG1zZyk7XG5cdFx0XHRyZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcblx0XHRcdFx0Y29kZTogXCJOT1RfRk9VTkRcIixcblx0XHRcdFx0bWVzc2FnZTogbXNnXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Y29uc3QgeyBib2R5LCBmaWJlciB9ID0geWllbGQqIE1hdGNoLnZhbHVlKHtcblx0XHRcdGFjdGlvblR5cGUsXG5cdFx0XHR1cGxvYWR0aGluZ0hvb2tcblx0XHR9KS5waXBlKE1hdGNoLndoZW4oe1xuXHRcdFx0YWN0aW9uVHlwZTogXCJ1cGxvYWRcIixcblx0XHRcdHVwbG9hZHRoaW5nSG9vazogdm9pZCAwXG5cdFx0fSwgKCkgPT4gaGFuZGxlVXBsb2FkQWN0aW9uKHtcblx0XHRcdHVwbG9hZGFibGUsXG5cdFx0XHRmZVBhY2thZ2UsXG5cdFx0XHRiZUFkYXB0ZXIsXG5cdFx0XHRzbHVnXG5cdFx0fSkpLCBNYXRjaC53aGVuKHtcblx0XHRcdGFjdGlvblR5cGU6IHZvaWQgMCxcblx0XHRcdHVwbG9hZHRoaW5nSG9vazogXCJjYWxsYmFja1wiXG5cdFx0fSwgKCkgPT4gaGFuZGxlQ2FsbGJhY2tSZXF1ZXN0KHtcblx0XHRcdHVwbG9hZGFibGUsXG5cdFx0XHRmZVBhY2thZ2UsXG5cdFx0XHRiZUFkYXB0ZXJcblx0XHR9KSksIE1hdGNoLndoZW4oe1xuXHRcdFx0YWN0aW9uVHlwZTogdm9pZCAwLFxuXHRcdFx0dXBsb2FkdGhpbmdIb29rOiBcImVycm9yXCJcblx0XHR9LCAoKSA9PiBoYW5kbGVFcnJvclJlcXVlc3QoeyB1cGxvYWRhYmxlIH0pKSwgTWF0Y2gub3JFbHNlKCgpID0+IEVmZmVjdC5zdWNjZWVkKHtcblx0XHRcdGJvZHk6IG51bGwsXG5cdFx0XHRmaWJlcjogbnVsbFxuXHRcdH0pKSk7XG5cdFx0aWYgKGZpYmVyKSB7XG5cdFx0XHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiUnVubmluZyBmaWJlciBhcyBkYWVtb25cIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiaGFuZGxlRGFlbW9uXCIsIGhhbmRsZURhZW1vbikpO1xuXHRcdFx0aWYgKGhhbmRsZURhZW1vbiA9PT0gXCJ2b2lkXCIpIHt9IGVsc2UgaWYgKGhhbmRsZURhZW1vbiA9PT0gXCJhd2FpdFwiKSB5aWVsZCogZmliZXIuYXdhaXQ7XG5cdFx0XHRlbHNlIGlmICh0eXBlb2YgaGFuZGxlRGFlbW9uID09PSBcImZ1bmN0aW9uXCIpIGhhbmRsZURhZW1vbihFZmZlY3QucnVuUHJvbWlzZShmaWJlci5hd2FpdCkpO1xuXHRcdH1cblx0XHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiU2VuZGluZyByZXNwb25zZVwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJib2R5XCIsIGJvZHkpKTtcblx0XHRyZXR1cm4geWllbGQqIEh0dHBTZXJ2ZXJSZXNwb25zZS5qc29uKGJvZHkpO1xuXHR9KS5waXBlKEVmZmVjdC5jYXRjaFRhZ3Moe1xuXHRcdFBhcnNlRXJyb3I6IChlKSA9PiBIdHRwU2VydmVyUmVzcG9uc2UuanNvbihmb3JtYXRFcnJvcihuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0XHRtZXNzYWdlOiBcIkludmFsaWQgaW5wdXRcIixcblx0XHRcdGNhdXNlOiBlLm1lc3NhZ2Vcblx0XHR9KSwgb3B0cy5yb3V0ZXIpLCB7IHN0YXR1czogNDAwIH0pLFxuXHRcdFVwbG9hZFRoaW5nRXJyb3I6IChlKSA9PiBIdHRwU2VydmVyUmVzcG9uc2UuanNvbihmb3JtYXRFcnJvcihlLCBvcHRzLnJvdXRlciksIHsgc3RhdHVzOiBnZXRTdGF0dXNDb2RlRnJvbUVycm9yKGUpIH0pXG5cdH0pKTtcblx0Y29uc3QgYXBwZW5kUmVzcG9uc2VIZWFkZXJzID0gRWZmZWN0Lm1hcChIdHRwU2VydmVyUmVzcG9uc2Uuc2V0SGVhZGVyKFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCIsIHZlcnNpb24pKTtcblx0cmV0dXJuIEh0dHBSb3V0ZXIuZW1wdHkucGlwZShIdHRwUm91dGVyLmdldChcIipcIiwgR0VUKSwgSHR0cFJvdXRlci5wb3N0KFwiKlwiLCBQT1NUKSwgSHR0cFJvdXRlci51c2UoYXBwZW5kUmVzcG9uc2VIZWFkZXJzKSk7XG59KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImNyZWF0ZVJlcXVlc3RIYW5kbGVyXCIpKTtcbmNvbnN0IGhhbmRsZUVycm9yUmVxdWVzdCA9IChvcHRzKSA9PiBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdGNvbnN0IHsgdXBsb2FkYWJsZSB9ID0gb3B0cztcblx0Y29uc3QgcmVxdWVzdCA9IHlpZWxkKiBIdHRwU2VydmVyUmVxdWVzdC5IdHRwU2VydmVyUmVxdWVzdDtcblx0Y29uc3QgeyBhcGlLZXkgfSA9IHlpZWxkKiBVVFRva2VuO1xuXHRjb25zdCB2ZXJpZmllZCA9IHlpZWxkKiB2ZXJpZnlTaWduYXR1cmUoeWllbGQqIHJlcXVlc3QudGV4dCwgcmVxdWVzdC5oZWFkZXJzW1wieC11cGxvYWR0aGluZy1zaWduYXR1cmVcIl0gPz8gbnVsbCwgYXBpS2V5KTtcblx0eWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhgU2lnbmF0dXJlIHZlcmlmaWVkOiAke3ZlcmlmaWVkfWApO1xuXHRpZiAoIXZlcmlmaWVkKSB7XG5cdFx0eWllbGQqIEVmZmVjdC5sb2dFcnJvcihcIkludmFsaWQgc2lnbmF0dXJlXCIpO1xuXHRcdHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRcdFx0Y29kZTogXCJCQURfUkVRVUVTVFwiLFxuXHRcdFx0bWVzc2FnZTogXCJJbnZhbGlkIHNpZ25hdHVyZVwiXG5cdFx0fSk7XG5cdH1cblx0Y29uc3QgcmVxdWVzdElucHV0ID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0LnNjaGVtYUJvZHlKc29uKFMuU3RydWN0KHtcblx0XHRmaWxlS2V5OiBTLlN0cmluZyxcblx0XHRlcnJvcjogUy5TdHJpbmdcblx0fSkpO1xuXHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiSGFuZGxpbmcgZXJyb3IgY2FsbGJhY2sgcmVxdWVzdCB3aXRoIGlucHV0OlwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJqc29uXCIsIHJlcXVlc3RJbnB1dCkpO1xuXHRjb25zdCBhZGFwdGVyQXJncyA9IHlpZWxkKiBBZGFwdGVyQXJndW1lbnRzO1xuXHRjb25zdCBmaWJlciA9IHlpZWxkKiBFZmZlY3QudHJ5UHJvbWlzZSh7XG5cdFx0dHJ5OiBhc3luYyAoKSA9PiB1cGxvYWRhYmxlLm9uVXBsb2FkRXJyb3Ioe1xuXHRcdFx0Li4uYWRhcHRlckFyZ3MsXG5cdFx0XHRlcnJvcjogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRcdFx0XHRjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcblx0XHRcdFx0bWVzc2FnZTogYFVwbG9hZCBmYWlsZWQgZm9yICR7cmVxdWVzdElucHV0LmZpbGVLZXl9OiAke3JlcXVlc3RJbnB1dC5lcnJvcn1gXG5cdFx0XHR9KSxcblx0XHRcdGZpbGVLZXk6IHJlcXVlc3RJbnB1dC5maWxlS2V5XG5cdFx0fSksXG5cdFx0Y2F0Y2g6IChlcnJvcikgPT4gbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRcdFx0Y29kZTogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcblx0XHRcdG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJ1biBvblVwbG9hZEVycm9yXCIsXG5cdFx0XHRjYXVzZTogZXJyb3Jcblx0XHR9KVxuXHR9KS5waXBlKEVmZmVjdC50YXBFcnJvcigoZXJyb3IpID0+IEVmZmVjdC5sb2dFcnJvcihcIkZhaWxlZCB0byBydW4gb25VcGxvYWRFcnJvci4gWW91IHByb2JhYmx5IHNob3VsZG4ndCBiZSB0aHJvd2luZyBlcnJvcnMgaGVyZS5cIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiZXJyb3JcIiwgZXJyb3IpKSkpLnBpcGUoRWZmZWN0Lmlnbm9yZUxvZ2dlZCwgRWZmZWN0LmZvcmtEYWVtb24pO1xuXHRyZXR1cm4ge1xuXHRcdGJvZHk6IG51bGwsXG5cdFx0ZmliZXJcblx0fTtcbn0pLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiaGFuZGxlRXJyb3JSZXF1ZXN0XCIpKTtcbmNvbnN0IGhhbmRsZUNhbGxiYWNrUmVxdWVzdCA9IChvcHRzKSA9PiBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdGNvbnN0IHsgdXBsb2FkYWJsZSwgZmVQYWNrYWdlLCBiZUFkYXB0ZXIgfSA9IG9wdHM7XG5cdGNvbnN0IHJlcXVlc3QgPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3QuSHR0cFNlcnZlclJlcXVlc3Q7XG5cdGNvbnN0IHsgYXBpS2V5IH0gPSB5aWVsZCogVVRUb2tlbjtcblx0Y29uc3QgdmVyaWZpZWQgPSB5aWVsZCogdmVyaWZ5U2lnbmF0dXJlKHlpZWxkKiByZXF1ZXN0LnRleHQsIHJlcXVlc3QuaGVhZGVyc1tcIngtdXBsb2FkdGhpbmctc2lnbmF0dXJlXCJdID8/IG51bGwsIGFwaUtleSk7XG5cdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoYFNpZ25hdHVyZSB2ZXJpZmllZDogJHt2ZXJpZmllZH1gKTtcblx0aWYgKCF2ZXJpZmllZCkge1xuXHRcdHlpZWxkKiBFZmZlY3QubG9nRXJyb3IoXCJJbnZhbGlkIHNpZ25hdHVyZVwiKTtcblx0XHRyZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcblx0XHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRcdG1lc3NhZ2U6IFwiSW52YWxpZCBzaWduYXR1cmVcIlxuXHRcdH0pO1xuXHR9XG5cdGNvbnN0IHJlcXVlc3RJbnB1dCA9IHlpZWxkKiBIdHRwU2VydmVyUmVxdWVzdC5zY2hlbWFCb2R5SnNvbihTLlN0cnVjdCh7XG5cdFx0c3RhdHVzOiBTLlN0cmluZyxcblx0XHRmaWxlOiBVcGxvYWRlZEZpbGVEYXRhLFxuXHRcdG9yaWdpbjogUy5TdHJpbmcsXG5cdFx0bWV0YWRhdGE6IFMuUmVjb3JkKHtcblx0XHRcdGtleTogUy5TdHJpbmcsXG5cdFx0XHR2YWx1ZTogUy5Vbmtub3duXG5cdFx0fSlcblx0fSkpO1xuXHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiSGFuZGxpbmcgY2FsbGJhY2sgcmVxdWVzdCB3aXRoIGlucHV0OlwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJqc29uXCIsIHJlcXVlc3RJbnB1dCkpO1xuXHQvKipcblx0KiBSdW4gYC5vblVwbG9hZENvbXBsZXRlYCBhcyBhIGRhZW1vbiB0byBwcmV2ZW50IHRoZVxuXHQqIHJlcXVlc3QgZnJvbSBVVCB0byBwb3RlbnRpYWxseSB0aW1lb3V0LlxuXHQqL1xuXHRjb25zdCBmaWJlciA9IHlpZWxkKiBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdFx0Y29uc3QgYWRhcHRlckFyZ3MgPSB5aWVsZCogQWRhcHRlckFyZ3VtZW50cztcblx0XHRjb25zdCBzZXJ2ZXJEYXRhID0geWllbGQqIEVmZmVjdC50cnlQcm9taXNlKHtcblx0XHRcdHRyeTogYXN5bmMgKCkgPT4gdXBsb2FkYWJsZS5vblVwbG9hZENvbXBsZXRlKHtcblx0XHRcdFx0Li4uYWRhcHRlckFyZ3MsXG5cdFx0XHRcdGZpbGU6IHtcblx0XHRcdFx0XHQuLi5yZXF1ZXN0SW5wdXQuZmlsZSxcblx0XHRcdFx0XHRnZXQgdXJsKCkge1xuXHRcdFx0XHRcdFx0bG9nRGVwcmVjYXRpb25XYXJuaW5nKFwiYGZpbGUudXJsYCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBsb2FkdGhpbmcgdjkuIFVzZSBgZmlsZS51ZnNVcmxgIGluc3RlYWQuXCIpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlcXVlc3RJbnB1dC5maWxlLnVybDtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGdldCBhcHBVcmwoKSB7XG5cdFx0XHRcdFx0XHRsb2dEZXByZWNhdGlvbldhcm5pbmcoXCJgZmlsZS5hcHBVcmxgIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB1cGxvYWR0aGluZyB2OS4gVXNlIGBmaWxlLnVmc1VybGAgaW5zdGVhZC5cIik7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVxdWVzdElucHV0LmZpbGUuYXBwVXJsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0bWV0YWRhdGE6IHJlcXVlc3RJbnB1dC5tZXRhZGF0YVxuXHRcdFx0fSksXG5cdFx0XHRjYXRjaDogKGVycm9yKSA9PiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0XHRcdGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG5cdFx0XHRcdG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJ1biBvblVwbG9hZENvbXBsZXRlLiBZb3UgcHJvYmFibHkgc2hvdWxkbid0IGJlIHRocm93aW5nIGVycm9ycyBoZXJlLlwiLFxuXHRcdFx0XHRjYXVzZTogZXJyb3Jcblx0XHRcdH0pXG5cdFx0fSk7XG5cdFx0Y29uc3QgcGF5bG9hZCA9IHtcblx0XHRcdGZpbGVLZXk6IHJlcXVlc3RJbnB1dC5maWxlLmtleSxcblx0XHRcdGNhbGxiYWNrRGF0YTogc2VydmVyRGF0YSA/PyBudWxsXG5cdFx0fTtcblx0XHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiJ29uVXBsb2FkQ29tcGxldGUnIGNhbGxiYWNrIGZpbmlzaGVkLiBTZW5kaW5nIHJlc3BvbnNlIHRvIFVwbG9hZFRoaW5nOlwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJjYWxsYmFja0RhdGFcIiwgcGF5bG9hZCkpO1xuXHRcdGNvbnN0IGh0dHBDbGllbnQgPSAoeWllbGQqIEh0dHBDbGllbnQuSHR0cENsaWVudCkucGlwZShIdHRwQ2xpZW50LmZpbHRlclN0YXR1c09rKTtcblx0XHR5aWVsZCogSHR0cENsaWVudFJlcXVlc3QucG9zdChgL2NhbGxiYWNrLXJlc3VsdGApLnBpcGUoSHR0cENsaWVudFJlcXVlc3QucHJlcGVuZFVybChyZXF1ZXN0SW5wdXQub3JpZ2luKSwgSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVycyh7XG5cdFx0XHRcIngtdXBsb2FkdGhpbmctYXBpLWtleVwiOiBSZWRhY3RlZC52YWx1ZShhcGlLZXkpLFxuXHRcdFx0XCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogdmVyc2lvbixcblx0XHRcdFwieC11cGxvYWR0aGluZy1iZS1hZGFwdGVyXCI6IGJlQWRhcHRlcixcblx0XHRcdFwieC11cGxvYWR0aGluZy1mZS1wYWNrYWdlXCI6IGZlUGFja2FnZVxuXHRcdH0pLCBIdHRwQ2xpZW50UmVxdWVzdC5ib2R5SnNvbihwYXlsb2FkKSwgRWZmZWN0LmZsYXRNYXAoaHR0cENsaWVudC5leGVjdXRlKSwgRWZmZWN0LnRhcEVycm9yKGxvZ0h0dHBDbGllbnRFcnJvcihcIkZhaWxlZCB0byByZWdpc3RlciBjYWxsYmFjayByZXN1bHRcIikpLCBFZmZlY3QuZmxhdE1hcChIdHRwQ2xpZW50UmVzcG9uc2Uuc2NoZW1hQm9keUpzb24oQ2FsbGJhY2tSZXN1bHRSZXNwb25zZSkpLCBFZmZlY3QudGFwKEVmZmVjdC5sb2coXCJTZW50IGNhbGxiYWNrIHJlc3VsdCB0byBVcGxvYWRUaGluZ1wiKSksIEVmZmVjdC5zY29wZWQpO1xuXHR9KS5waXBlKEVmZmVjdC5pZ25vcmVMb2dnZWQsIEVmZmVjdC5mb3JrRGFlbW9uKTtcblx0cmV0dXJuIHtcblx0XHRib2R5OiBudWxsLFxuXHRcdGZpYmVyXG5cdH07XG59KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImhhbmRsZUNhbGxiYWNrUmVxdWVzdFwiKSk7XG5jb25zdCBydW5Sb3V0ZU1pZGRsZXdhcmUgPSAob3B0cykgPT4gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuXHRjb25zdCB7IGpzb246IHsgZmlsZXMsIGlucHV0IH0sIHVwbG9hZGFibGUgfSA9IG9wdHM7XG5cdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJSdW5uaW5nIG1pZGRsZXdhcmVcIik7XG5cdGNvbnN0IGFkYXB0ZXJBcmdzID0geWllbGQqIEFkYXB0ZXJBcmd1bWVudHM7XG5cdGNvbnN0IG1ldGFkYXRhID0geWllbGQqIEVmZmVjdC50cnlQcm9taXNlKHtcblx0XHR0cnk6IGFzeW5jICgpID0+IHVwbG9hZGFibGUubWlkZGxld2FyZSh7XG5cdFx0XHQuLi5hZGFwdGVyQXJncyxcblx0XHRcdGlucHV0LFxuXHRcdFx0ZmlsZXNcblx0XHR9KSxcblx0XHRjYXRjaDogKGVycm9yKSA9PiBlcnJvciBpbnN0YW5jZW9mIFVwbG9hZFRoaW5nRXJyb3IgPyBlcnJvciA6IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcblx0XHRcdGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG5cdFx0XHRtZXNzYWdlOiBcIkZhaWxlZCB0byBydW4gbWlkZGxld2FyZVwiLFxuXHRcdFx0Y2F1c2U6IGVycm9yXG5cdFx0fSlcblx0fSk7XG5cdGlmIChtZXRhZGF0YVtVVEZpbGVzXSAmJiBtZXRhZGF0YVtVVEZpbGVzXS5sZW5ndGggIT09IGZpbGVzLmxlbmd0aCkge1xuXHRcdGNvbnN0IG1zZyA9IGBFeHBlY3RlZCBmaWxlcyBvdmVycmlkZSB0byBoYXZlIHRoZSBzYW1lIGxlbmd0aCBhcyBvcmlnaW5hbCBmaWxlcywgZ290ICR7bWV0YWRhdGFbVVRGaWxlc10ubGVuZ3RofSBidXQgZXhwZWN0ZWQgJHtmaWxlcy5sZW5ndGh9YDtcblx0XHR5aWVsZCogRWZmZWN0LmxvZ0Vycm9yKG1zZyk7XG5cdFx0cmV0dXJuIHlpZWxkKiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0XHRtZXNzYWdlOiBcIkZpbGVzIG92ZXJyaWRlIG11c3QgaGF2ZSB0aGUgc2FtZSBsZW5ndGggYXMgZmlsZXNcIixcblx0XHRcdGNhdXNlOiBtc2dcblx0XHR9KTtcblx0fVxuXHRjb25zdCBmaWxlc1dpdGhDdXN0b21JZHMgPSB5aWVsZCogRWZmZWN0LmZvckVhY2goZmlsZXMsIChmaWxlLCBpZHgpID0+IEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcblx0XHRjb25zdCB0aGVpcnMgPSBtZXRhZGF0YVtVVEZpbGVzXT8uW2lkeF07XG5cdFx0aWYgKHRoZWlycyAmJiB0aGVpcnMuc2l6ZSAhPT0gZmlsZS5zaXplKSB5aWVsZCogRWZmZWN0LmxvZ1dhcm5pbmcoXCJGaWxlIHNpemUgbWlzbWF0Y2guIFJldmVydGluZyB0byBvcmlnaW5hbCBzaXplXCIpO1xuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lOiB0aGVpcnM/Lm5hbWUgPz8gZmlsZS5uYW1lLFxuXHRcdFx0c2l6ZTogZmlsZS5zaXplLFxuXHRcdFx0dHlwZTogZmlsZS50eXBlLFxuXHRcdFx0Y3VzdG9tSWQ6IHRoZWlycz8uY3VzdG9tSWQsXG5cdFx0XHRsYXN0TW9kaWZpZWQ6IHRoZWlycz8ubGFzdE1vZGlmaWVkID8/IERhdGUubm93KClcblx0XHR9O1xuXHR9KSk7XG5cdHJldHVybiB7XG5cdFx0bWV0YWRhdGEsXG5cdFx0ZmlsZXNXaXRoQ3VzdG9tSWRzLFxuXHRcdHByZWZlcnJlZFJlZ2lvbjogbWV0YWRhdGFbVVRSZWdpb25dXG5cdH07XG59KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcInJ1blJvdXRlTWlkZGxld2FyZVwiKSk7XG5jb25zdCBoYW5kbGVVcGxvYWRBY3Rpb24gPSAob3B0cykgPT4gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuXHRjb25zdCBodHRwQ2xpZW50ID0gKHlpZWxkKiBIdHRwQ2xpZW50Lkh0dHBDbGllbnQpLnBpcGUoSHR0cENsaWVudC5maWx0ZXJTdGF0dXNPayk7XG5cdGNvbnN0IHsgdXBsb2FkYWJsZSwgZmVQYWNrYWdlLCBiZUFkYXB0ZXIsIHNsdWcgfSA9IG9wdHM7XG5cdGNvbnN0IGpzb24gPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3Quc2NoZW1hQm9keUpzb24oVXBsb2FkQWN0aW9uUGF5bG9hZCk7XG5cdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJIYW5kbGluZyB1cGxvYWQgcmVxdWVzdFwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJqc29uXCIsIGpzb24pKTtcblx0eWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlBhcnNpbmcgdXNlciBpbnB1dFwiKTtcblx0Y29uc3QgcGFyc2VkSW5wdXQgPSB5aWVsZCogRWZmZWN0LnRyeVByb21pc2Uoe1xuXHRcdHRyeTogKCkgPT4gZ2V0UGFyc2VGbih1cGxvYWRhYmxlLmlucHV0UGFyc2VyKShqc29uLmlucHV0KSxcblx0XHRjYXRjaDogKGVycm9yKSA9PiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0XHRtZXNzYWdlOiBcIkludmFsaWQgaW5wdXRcIixcblx0XHRcdGNhdXNlOiBlcnJvclxuXHRcdH0pXG5cdH0pO1xuXHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiSW5wdXQgcGFyc2VkIHN1Y2Nlc3NmdWxseVwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJpbnB1dFwiLCBwYXJzZWRJbnB1dCkpO1xuXHRjb25zdCB7IG1ldGFkYXRhLCBmaWxlc1dpdGhDdXN0b21JZHMsIHByZWZlcnJlZFJlZ2lvbiB9ID0geWllbGQqIHJ1blJvdXRlTWlkZGxld2FyZSh7XG5cdFx0anNvbjoge1xuXHRcdFx0aW5wdXQ6IHBhcnNlZElucHV0LFxuXHRcdFx0ZmlsZXM6IGpzb24uZmlsZXNcblx0XHR9LFxuXHRcdHVwbG9hZGFibGVcblx0fSk7XG5cdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJQYXJzaW5nIHJvdXRlIGNvbmZpZ1wiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJyb3V0ZXJDb25maWdcIiwgdXBsb2FkYWJsZS5yb3V0ZXJDb25maWcpKTtcblx0Y29uc3QgcGFyc2VkQ29uZmlnID0geWllbGQqIGZpbGxJbnB1dFJvdXRlQ29uZmlnKHVwbG9hZGFibGUucm91dGVyQ29uZmlnKS5waXBlKEVmZmVjdC5jYXRjaFRhZyhcIkludmFsaWRSb3V0ZUNvbmZpZ1wiLCAoZXJyKSA9PiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0Y29kZTogXCJCQURfUkVRVUVTVFwiLFxuXHRcdG1lc3NhZ2U6IFwiSW52YWxpZCByb3V0ZSBjb25maWdcIixcblx0XHRjYXVzZTogZXJyXG5cdH0pKSk7XG5cdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJSb3V0ZSBjb25maWcgcGFyc2VkIHN1Y2Nlc3NmdWxseVwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJyb3V0ZUNvbmZpZ1wiLCBwYXJzZWRDb25maWcpKTtcblx0eWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlZhbGlkYXRpbmcgZmlsZXMgbWVldCB0aGUgY29uZmlnIHJlcXVpcmVtZW50c1wiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJmaWxlc1wiLCBqc29uLmZpbGVzKSk7XG5cdHlpZWxkKiBhc3NlcnRGaWxlc01lZXRDb25maWcoanNvbi5maWxlcywgcGFyc2VkQ29uZmlnKS5waXBlKEVmZmVjdC5tYXBFcnJvcigoZSkgPT4gbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRtZXNzYWdlOiBgSW52YWxpZCBjb25maWc6ICR7ZS5fdGFnfWAsXG5cdFx0Y2F1c2U6IFwicmVhc29uXCIgaW4gZSA/IGUucmVhc29uIDogZS5tZXNzYWdlXG5cdH0pKSk7XG5cdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJGaWxlcyB2YWxpZGF0ZWQuXCIpO1xuXHRjb25zdCBmaWxlVXBsb2FkUmVxdWVzdHMgPSB5aWVsZCogRWZmZWN0LmZvckVhY2goZmlsZXNXaXRoQ3VzdG9tSWRzLCAoZmlsZSkgPT4gRWZmZWN0Lm1hcChtYXRjaEZpbGVUeXBlKGZpbGUsIG9iamVjdEtleXMocGFyc2VkQ29uZmlnKSksICh0eXBlKSA9PiAoe1xuXHRcdG5hbWU6IGZpbGUubmFtZSxcblx0XHRzaXplOiBmaWxlLnNpemUsXG5cdFx0dHlwZTogZmlsZS50eXBlIHx8IHR5cGUsXG5cdFx0bGFzdE1vZGlmaWVkOiBmaWxlLmxhc3RNb2RpZmllZCxcblx0XHRjdXN0b21JZDogZmlsZS5jdXN0b21JZCxcblx0XHRjb250ZW50RGlzcG9zaXRpb246IHBhcnNlZENvbmZpZ1t0eXBlXT8uY29udGVudERpc3Bvc2l0aW9uID8/IFwiaW5saW5lXCIsXG5cdFx0YWNsOiBwYXJzZWRDb25maWdbdHlwZV0/LmFjbFxuXHR9KSkpLnBpcGUoRWZmZWN0LmNhdGNoVGFncyh7XG5cdFx0SW52YWxpZEZpbGVUeXBlOiAoZSkgPT4gRWZmZWN0LmRpZShlKSxcblx0XHRVbmtub3duRmlsZVR5cGU6IChlKSA9PiBFZmZlY3QuZGllKGUpXG5cdH0pKTtcblx0Y29uc3Qgcm91dGVPcHRpb25zID0gdXBsb2FkYWJsZS5yb3V0ZU9wdGlvbnM7XG5cdGNvbnN0IHsgYXBpS2V5LCBhcHBJZCB9ID0geWllbGQqIFVUVG9rZW47XG5cdGNvbnN0IGluZ2VzdFVybCA9IHlpZWxkKiBJbmdlc3RVcmwocHJlZmVycmVkUmVnaW9uKTtcblx0Y29uc3QgaXNEZXYgPSB5aWVsZCogSXNEZXZlbG9wbWVudDtcblx0eWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIkdlbmVyYXRpbmcgcHJlc2lnbmVkIFVSTHNcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiZmlsZVVwbG9hZFJlcXVlc3RzXCIsIGZpbGVVcGxvYWRSZXF1ZXN0cyksIEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJpbmdlc3RVcmxcIiwgaW5nZXN0VXJsKSk7XG5cdGNvbnN0IHByZXNpZ25lZFVybHMgPSB5aWVsZCogRWZmZWN0LmZvckVhY2goZmlsZVVwbG9hZFJlcXVlc3RzLCAoZmlsZSkgPT4gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuXHRcdGNvbnN0IGtleSA9IHlpZWxkKiBnZW5lcmF0ZUtleShmaWxlLCBhcHBJZCwgcm91dGVPcHRpb25zLmdldEZpbGVIYXNoUGFydHMpO1xuXHRcdGNvbnN0IHVybCA9IHlpZWxkKiBnZW5lcmF0ZVNpZ25lZFVSTChgJHtpbmdlc3RVcmx9LyR7a2V5fWAsIGFwaUtleSwge1xuXHRcdFx0dHRsSW5TZWNvbmRzOiByb3V0ZU9wdGlvbnMucHJlc2lnbmVkVVJMVFRMLFxuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcIngtdXQtaWRlbnRpZmllclwiOiBhcHBJZCxcblx0XHRcdFx0XCJ4LXV0LWZpbGUtbmFtZVwiOiBmaWxlLm5hbWUsXG5cdFx0XHRcdFwieC11dC1maWxlLXNpemVcIjogZmlsZS5zaXplLFxuXHRcdFx0XHRcIngtdXQtZmlsZS10eXBlXCI6IGZpbGUudHlwZSxcblx0XHRcdFx0XCJ4LXV0LXNsdWdcIjogc2x1Zyxcblx0XHRcdFx0XCJ4LXV0LWN1c3RvbS1pZFwiOiBmaWxlLmN1c3RvbUlkLFxuXHRcdFx0XHRcIngtdXQtY29udGVudC1kaXNwb3NpdGlvblwiOiBmaWxlLmNvbnRlbnREaXNwb3NpdGlvbixcblx0XHRcdFx0XCJ4LXV0LWFjbFwiOiBmaWxlLmFjbFxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiB7XG5cdFx0XHR1cmwsXG5cdFx0XHRrZXlcblx0XHR9O1xuXHR9KSwgeyBjb25jdXJyZW5jeTogXCJ1bmJvdW5kZWRcIiB9KTtcblx0Y29uc3Qgc2VydmVyUmVxID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0Lkh0dHBTZXJ2ZXJSZXF1ZXN0O1xuXHRjb25zdCByZXF1ZXN0VXJsID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0LnRvVVJMKHNlcnZlclJlcSk7XG5cdGNvbnN0IGRldkhvb2tSZXF1ZXN0ID0geWllbGQqIENvbmZpZy5zdHJpbmcoXCJjYWxsYmFja1VybFwiKS5waXBlKENvbmZpZy53aXRoRGVmYXVsdChyZXF1ZXN0VXJsLm9yaWdpbiArIHJlcXVlc3RVcmwucGF0aG5hbWUpLCBFZmZlY3QubWFwKCh1cmwpID0+IEh0dHBDbGllbnRSZXF1ZXN0LnBvc3QodXJsKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LmFwcGVuZFVybFBhcmFtKFwic2x1Z1wiLCBzbHVnKSkpKTtcblx0Y29uc3QgbWV0YWRhdGFSZXF1ZXN0ID0gSHR0cENsaWVudFJlcXVlc3QucG9zdChcIi9yb3V0ZS1tZXRhZGF0YVwiKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LnByZXBlbmRVcmwoaW5nZXN0VXJsKSwgSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVycyh7XG5cdFx0XCJ4LXVwbG9hZHRoaW5nLWFwaS1rZXlcIjogUmVkYWN0ZWQudmFsdWUoYXBpS2V5KSxcblx0XHRcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiB2ZXJzaW9uLFxuXHRcdFwieC11cGxvYWR0aGluZy1iZS1hZGFwdGVyXCI6IGJlQWRhcHRlcixcblx0XHRcIngtdXBsb2FkdGhpbmctZmUtcGFja2FnZVwiOiBmZVBhY2thZ2Vcblx0fSksIEh0dHBDbGllbnRSZXF1ZXN0LmJvZHlKc29uKHtcblx0XHRmaWxlS2V5czogcHJlc2lnbmVkVXJscy5tYXAoKHsga2V5IH0pID0+IGtleSksXG5cdFx0bWV0YWRhdGEsXG5cdFx0aXNEZXYsXG5cdFx0Y2FsbGJhY2tVcmw6IGRldkhvb2tSZXF1ZXN0LnVybCxcblx0XHRjYWxsYmFja1NsdWc6IHNsdWcsXG5cdFx0YXdhaXRTZXJ2ZXJEYXRhOiByb3V0ZU9wdGlvbnMuYXdhaXRTZXJ2ZXJEYXRhID8/IHRydWVcblx0fSksIEVmZmVjdC5mbGF0TWFwKGh0dHBDbGllbnQuZXhlY3V0ZSkpO1xuXHRjb25zdCBoYW5kbGVEZXZTdHJlYW1FcnJvciA9IEVmZmVjdC5mbihcImhhbmRsZURldlN0cmVhbUVycm9yXCIpKGZ1bmN0aW9uKiAoZXJyLCBjaHVuaykge1xuXHRcdGNvbnN0IHNjaGVtYSA9IFMucGFyc2VKc29uKFMuU3RydWN0KHsgZmlsZTogVXBsb2FkZWRGaWxlRGF0YSB9KSk7XG5cdFx0Y29uc3QgcGFyc2VkQ2h1bmsgPSB5aWVsZCogUy5kZWNvZGVVbmtub3duKHNjaGVtYSkoY2h1bmspO1xuXHRcdGNvbnN0IGtleSA9IHBhcnNlZENodW5rLmZpbGUua2V5O1xuXHRcdHlpZWxkKiBFZmZlY3QubG9nRXJyb3IoXCJGYWlsZWQgdG8gZm9yd2FyZCBjYWxsYmFjayByZXF1ZXN0IGZyb20gZGV2IHN0cmVhbVwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3Moe1xuXHRcdFx0ZmlsZUtleToga2V5LFxuXHRcdFx0ZXJyb3I6IGVyci5tZXNzYWdlXG5cdFx0fSkpO1xuXHRcdGNvbnN0IGh0dHBSZXNwb25zZSA9IHlpZWxkKiBIdHRwQ2xpZW50UmVxdWVzdC5wb3N0KFwiL2NhbGxiYWNrLXJlc3VsdFwiKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LnByZXBlbmRVcmwoaW5nZXN0VXJsKSwgSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVycyh7XG5cdFx0XHRcIngtdXBsb2FkdGhpbmctYXBpLWtleVwiOiBSZWRhY3RlZC52YWx1ZShhcGlLZXkpLFxuXHRcdFx0XCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogdmVyc2lvbixcblx0XHRcdFwieC11cGxvYWR0aGluZy1iZS1hZGFwdGVyXCI6IGJlQWRhcHRlcixcblx0XHRcdFwieC11cGxvYWR0aGluZy1mZS1wYWNrYWdlXCI6IGZlUGFja2FnZVxuXHRcdH0pLCBIdHRwQ2xpZW50UmVxdWVzdC5ib2R5SnNvbih7XG5cdFx0XHRmaWxlS2V5OiBrZXksXG5cdFx0XHRlcnJvcjogYEZhaWxlZCB0byBmb3J3YXJkIGNhbGxiYWNrIHJlcXVlc3QgZnJvbSBkZXYgc3RyZWFtOiAke2Vyci5tZXNzYWdlfWBcblx0XHR9KSwgRWZmZWN0LmZsYXRNYXAoaHR0cENsaWVudC5leGVjdXRlKSk7XG5cdFx0eWllbGQqIGxvZ0h0dHBDbGllbnRSZXNwb25zZShcIlJlcG9ydGVkIGNhbGxiYWNrIGVycm9yIHRvIFVwbG9hZFRoaW5nXCIpKGh0dHBSZXNwb25zZSk7XG5cdH0pO1xuXHRjb25zdCBmaWJlciA9IHlpZWxkKiBFZmZlY3QuaWYoaXNEZXYsIHtcblx0XHRvblRydWU6ICgpID0+IG1ldGFkYXRhUmVxdWVzdC5waXBlKEVmZmVjdC50YXBCb3RoKHtcblx0XHRcdG9uU3VjY2VzczogbG9nSHR0cENsaWVudFJlc3BvbnNlKFwiUmVnaXN0ZXJlZCBtZXRhZGF0YVwiLCB7IG1peGluOiBcIk5vbmVcIiB9KSxcblx0XHRcdG9uRmFpbHVyZTogbG9nSHR0cENsaWVudEVycm9yKFwiRmFpbGVkIHRvIHJlZ2lzdGVyIG1ldGFkYXRhXCIpXG5cdFx0fSksIEh0dHBDbGllbnRSZXNwb25zZS5zdHJlYW0sIGhhbmRsZUpzb25MaW5lU3RyZWFtKE1ldGFkYXRhRmV0Y2hTdHJlYW1QYXJ0LCAoY2h1bmspID0+IGRldkhvb2tSZXF1ZXN0LnBpcGUoSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVycyh7XG5cdFx0XHRcInVwbG9hZHRoaW5nLWhvb2tcIjogY2h1bmsuaG9vayxcblx0XHRcdFwieC11cGxvYWR0aGluZy1zaWduYXR1cmVcIjogY2h1bmsuc2lnbmF0dXJlXG5cdFx0fSksIEh0dHBDbGllbnRSZXF1ZXN0LnNldEJvZHkoSHR0cEJvZHkudGV4dChjaHVuay5wYXlsb2FkLCBcImFwcGxpY2F0aW9uL2pzb25cIikpLCBodHRwQ2xpZW50LmV4ZWN1dGUsIEVmZmVjdC50YXAobG9nSHR0cENsaWVudFJlc3BvbnNlKFwiU3VjY2Vzc2Z1bGx5IGZvcndhcmRlZCBjYWxsYmFjayByZXF1ZXN0IGZyb20gZGV2IHN0cmVhbVwiKSksIEVmZmVjdC5jYXRjaFRhZyhcIlJlc3BvbnNlRXJyb3JcIiwgKGVycikgPT4gaGFuZGxlRGV2U3RyZWFtRXJyb3IoZXJyLCBjaHVuay5wYXlsb2FkKSksIEVmZmVjdC5hbm5vdGF0ZUxvZ3MoY2h1bmspLCBFZmZlY3QuYXNWb2lkLCBFZmZlY3QuaWdub3JlTG9nZ2VkLCBFZmZlY3Quc2NvcGVkKSkpLFxuXHRcdG9uRmFsc2U6ICgpID0+IG1ldGFkYXRhUmVxdWVzdC5waXBlKEVmZmVjdC50YXBCb3RoKHtcblx0XHRcdG9uU3VjY2VzczogbG9nSHR0cENsaWVudFJlc3BvbnNlKFwiUmVnaXN0ZXJlZCBtZXRhZGF0YVwiKSxcblx0XHRcdG9uRmFpbHVyZTogbG9nSHR0cENsaWVudEVycm9yKFwiRmFpbGVkIHRvIHJlZ2lzdGVyIG1ldGFkYXRhXCIpXG5cdFx0fSksIEVmZmVjdC5mbGF0TWFwKEh0dHBDbGllbnRSZXNwb25zZS5zY2hlbWFCb2R5SnNvbihNZXRhZGF0YUZldGNoUmVzcG9uc2UpKSwgRWZmZWN0LnNjb3BlZClcblx0fSkucGlwZShFZmZlY3QuZm9ya0RhZW1vbik7XG5cdGNvbnN0IHByZXNpZ25lZHMgPSBwcmVzaWduZWRVcmxzLm1hcCgocCwgaSkgPT4gKHtcblx0XHR1cmw6IHAudXJsLFxuXHRcdGtleTogcC5rZXksXG5cdFx0bmFtZTogZmlsZVVwbG9hZFJlcXVlc3RzW2ldLm5hbWUsXG5cdFx0Y3VzdG9tSWQ6IGZpbGVVcGxvYWRSZXF1ZXN0c1tpXS5jdXN0b21JZCA/PyBudWxsXG5cdH0pKTtcblx0eWllbGQqIEVmZmVjdC5sb2dJbmZvKFwiU2VuZGluZyBwcmVzaWduZWQgVVJMcyB0byBjbGllbnRcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwicHJlc2lnbmVkVXJsc1wiLCBwcmVzaWduZWRzKSk7XG5cdHJldHVybiB7XG5cdFx0Ym9keTogcHJlc2lnbmVkcyxcblx0XHRmaWJlclxuXHR9O1xufSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJoYW5kbGVVcGxvYWRBY3Rpb25cIikpO1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL3VwbG9hZC1idWlsZGVyLnRzXG5mdW5jdGlvbiBpbnRlcm5hbENyZWF0ZUJ1aWxkZXIoaW5pdERlZiA9IHt9KSB7XG5cdGNvbnN0IF9kZWYgPSB7XG5cdFx0JHR5cGVzOiB7fSxcblx0XHRyb3V0ZXJDb25maWc6IHsgaW1hZ2U6IHsgbWF4RmlsZVNpemU6IFwiNE1CXCIgfSB9LFxuXHRcdHJvdXRlT3B0aW9uczogeyBhd2FpdFNlcnZlckRhdGE6IHRydWUgfSxcblx0XHRpbnB1dFBhcnNlcjoge1xuXHRcdFx0cGFyc2VBc3luYzogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHZvaWQgMCksXG5cdFx0XHRfaW5wdXQ6IHZvaWQgMCxcblx0XHRcdF9vdXRwdXQ6IHZvaWQgMFxuXHRcdH0sXG5cdFx0bWlkZGxld2FyZTogKCkgPT4gKHt9KSxcblx0XHRvblVwbG9hZEVycm9yOiAoKSA9PiB7fSxcblx0XHRvblVwbG9hZENvbXBsZXRlOiAoKSA9PiB2b2lkIDAsXG5cdFx0ZXJyb3JGb3JtYXR0ZXI6IGluaXREZWYuZXJyb3JGb3JtYXR0ZXIgPz8gZGVmYXVsdEVycm9yRm9ybWF0dGVyLFxuXHRcdC4uLmluaXREZWZcblx0fTtcblx0cmV0dXJuIHtcblx0XHRpbnB1dCh1c2VyUGFyc2VyKSB7XG5cdFx0XHRyZXR1cm4gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKHtcblx0XHRcdFx0Li4uX2RlZixcblx0XHRcdFx0aW5wdXRQYXJzZXI6IHVzZXJQYXJzZXJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0bWlkZGxld2FyZSh1c2VyTWlkZGxld2FyZSkge1xuXHRcdFx0cmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG5cdFx0XHRcdC4uLl9kZWYsXG5cdFx0XHRcdG1pZGRsZXdhcmU6IHVzZXJNaWRkbGV3YXJlXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdG9uVXBsb2FkQ29tcGxldGUodXNlclVwbG9hZENvbXBsZXRlKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHQuLi5fZGVmLFxuXHRcdFx0XHRvblVwbG9hZENvbXBsZXRlOiB1c2VyVXBsb2FkQ29tcGxldGVcblx0XHRcdH07XG5cdFx0fSxcblx0XHRvblVwbG9hZEVycm9yKHVzZXJPblVwbG9hZEVycm9yKSB7XG5cdFx0XHRyZXR1cm4gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKHtcblx0XHRcdFx0Li4uX2RlZixcblx0XHRcdFx0b25VcGxvYWRFcnJvcjogdXNlck9uVXBsb2FkRXJyb3Jcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcbn1cbi8qKlxuKiBDcmVhdGUgYSBidWlsZGVyIGZvciB5b3VyIGJhY2tlbmQgYWRhcHRlci5cbiogUmVmZXIgdG8gdGhlIGV4aXN0aW5nIGFkYXB0ZXJzIGZvciBleGFtcGxlcyBvbiBob3cgdG8gdXNlIHRoaXMgZnVuY3Rpb24uXG4qIEBwdWJsaWNcbipcbiogQHBhcmFtIG9wdHMgLSBPcHRpb25zIGZvciB0aGUgYnVpbGRlclxuKiBAcmV0dXJucyBBIGZpbGUgcm91dGUgYnVpbGRlciBmb3IgbWFraW5nIFVwbG9hZFRoaW5nIGZpbGUgcm91dGVzXG4qL1xuZnVuY3Rpb24gY3JlYXRlQnVpbGRlcihvcHRzKSB7XG5cdHJldHVybiAoaW5wdXQsIGNvbmZpZykgPT4ge1xuXHRcdHJldHVybiBpbnRlcm5hbENyZWF0ZUJ1aWxkZXIoe1xuXHRcdFx0cm91dGVyQ29uZmlnOiBpbnB1dCxcblx0XHRcdHJvdXRlT3B0aW9uczogY29uZmlnID8/IHt9LFxuXHRcdFx0Li4ub3B0c1xuXHRcdH0pO1xuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEFkYXB0ZXJBcmd1bWVudHMsIEFwaVVybCwgSW5nZXN0VXJsLCBVVEZpbGVzLCBVVFJlZ2lvbiwgVVRUb2tlbiwgVWZzQXBwSWRMb2NhdGlvbiwgVWZzSG9zdCwgY29uZmlnUHJvdmlkZXIsIGNyZWF0ZUJ1aWxkZXIsIGNyZWF0ZVJlcXVlc3RIYW5kbGVyLCBleHRyYWN0Um91dGVyQ29uZmlnLCBsb2dIdHRwQ2xpZW50RXJyb3IsIGxvZ0h0dHBDbGllbnRSZXNwb25zZSwgbWFrZUFkYXB0ZXJIYW5kbGVyLCBtYWtlUnVudGltZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBsb2FkLWJ1aWxkZXItQmxGT0Fuc3YuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/uploadthing/dist/upload-builder-BlFOAnsv.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/uploadthing/server/index.js":
/*!**************************************************!*\
  !*** ./node_modules/uploadthing/server/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTApi: () => (/* binding */ UTApi),\n/* harmony export */   UTFile: () => (/* binding */ UTFile),\n/* harmony export */   UTFiles: () => (/* reexport safe */ _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.UTFiles),\n/* harmony export */   UploadThingError: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError),\n/* harmony export */   createBuilder: () => (/* reexport safe */ _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.createBuilder),\n/* harmony export */   createRouteHandler: () => (/* binding */ createRouteHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing),\n/* harmony export */   experimental_UTRegion: () => (/* reexport safe */ _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.UTRegion),\n/* harmony export */   extractRouterConfig: () => (/* binding */ extractRouterConfig$1),\n/* harmony export */   makeAdapterHandler: () => (/* reexport safe */ _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.makeAdapterHandler)\n/* harmony export */ });\n/* harmony import */ var _dist_package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../dist/package-DpScpvTA.js */ \"(action-browser)/./node_modules/uploadthing/dist/package-DpScpvTA.js\");\n/* harmony import */ var _dist_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../dist/deprecations-pLmw6Ytd.js */ \"(action-browser)/./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js\");\n/* harmony import */ var _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../dist/upload-builder-BlFOAnsv.js */ \"(action-browser)/./node_modules/uploadthing/dist/upload-builder-BlFOAnsv.js\");\n/* harmony import */ var effect_Array__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! effect/Array */ \"(action-browser)/./node_modules/effect/dist/esm/Array.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @uploadthing/shared */ \"(action-browser)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var effect_Function__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! effect/Function */ \"(action-browser)/./node_modules/effect/dist/esm/Function.js\");\n/* harmony import */ var effect_Predicate__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! effect/Predicate */ \"(action-browser)/./node_modules/effect/dist/esm/Predicate.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/Effect */ \"(action-browser)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @effect/platform/HttpClient */ \"(action-browser)/./node_modules/@effect/platform/dist/esm/HttpClient.js\");\n/* harmony import */ var _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @effect/platform/HttpClientRequest */ \"(action-browser)/./node_modules/@effect/platform/dist/esm/HttpClientRequest.js\");\n/* harmony import */ var _effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @effect/platform/HttpClientResponse */ \"(action-browser)/./node_modules/@effect/platform/dist/esm/HttpClientResponse.js\");\n/* harmony import */ var effect_Redacted__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! effect/Redacted */ \"(action-browser)/./node_modules/effect/dist/esm/Redacted.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! effect/Schema */ \"(action-browser)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var effect_Cause__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! effect/Cause */ \"(action-browser)/./node_modules/effect/dist/esm/Cause.js\");\n/* harmony import */ var _uploadthing_mime_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uploadthing/mime-types */ \"(action-browser)/./node_modules/@uploadthing/mime-types/dist/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/sdk/ut-file.ts\n/**\n* Extension of the Blob class that simplifies setting the `name` and `customId` properties,\n* similar to the built-in File class from Node > 20.\n*/\nvar UTFile = class extends Blob {\n\tname;\n\tlastModified;\n\tcustomId;\n\tconstructor(parts, name, options) {\n\t\tconst optionsWithDefaults = {\n\t\t\t...options,\n\t\t\ttype: options?.type ?? ((0,_uploadthing_mime_types__WEBPACK_IMPORTED_MODULE_0__.lookup)(name) || \"application/octet-stream\"),\n\t\t\tlastModified: options?.lastModified ?? Date.now()\n\t\t};\n\t\tsuper(parts, optionsWithDefaults);\n\t\tthis.name = name;\n\t\tthis.customId = optionsWithDefaults.customId;\n\t\tthis.lastModified = optionsWithDefaults.lastModified;\n\t}\n};\n\n//#endregion\n//#region src/_internal/upload-server.ts\nconst uploadWithoutProgress = (file, presigned) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function* () {\n\tconst formData = new FormData();\n\tformData.append(\"file\", file);\n\tconst httpClient = (yield* _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.HttpClient).pipe(_effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.filterStatusOk);\n\tconst json = yield* _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.put(presigned.url).pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.bodyFormData(formData), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.setHeader(\"Range\", \"bytes=0-\"), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.setHeader(\"x-uploadthing-version\", _dist_package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_4__.version), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_1__.tapError((0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.logHttpClientError)(\"Failed to upload file\")), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.mapError((e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\tcode: \"UPLOAD_FAILED\",\n\t\tmessage: \"Failed to upload file\",\n\t\tcause: e\n\t})), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.andThen((_) => _.json), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.andThen(effect_Function__WEBPACK_IMPORTED_MODULE_7__.unsafeCoerce), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.scoped);\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_1__.logDebug(`File ${file.name} uploaded successfully`).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"json\", json));\n\treturn {\n\t\t...json,\n\t\tget url() {\n\t\t\t(0,_dist_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_8__.logDeprecationWarning)(\"`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n\t\t\treturn json.url;\n\t\t},\n\t\tget appUrl() {\n\t\t\t(0,_dist_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_8__.logDeprecationWarning)(\"`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n\t\t\treturn json.appUrl;\n\t\t}\n\t};\n});\n\n//#endregion\n//#region src/sdk/utils.ts\nfunction guardServerOnly() {\n\tif (typeof window !== \"undefined\") throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\tcode: \"INTERNAL_SERVER_ERROR\",\n\t\tmessage: \"The `utapi` can only be used on the server.\"\n\t});\n}\nconst downloadFile = (_url) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function* () {\n\tlet url = effect_Predicate__WEBPACK_IMPORTED_MODULE_9__.isRecord(_url) ? _url.url : _url;\n\tif (typeof url === \"string\") {\n\t\tif (url.startsWith(\"data:\")) return yield* effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Please use uploadFiles() for data URLs. uploadFilesFromUrl() is intended for use with remote URLs only.\",\n\t\t\tdata: void 0\n\t\t});\n\t}\n\turl = new URL(url);\n\tconst { name = url.pathname.split(\"/\").pop() ?? \"unknown-filename\", customId = void 0 } = effect_Predicate__WEBPACK_IMPORTED_MODULE_9__.isRecord(_url) ? _url : {};\n\tconst httpClient = (yield* _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.HttpClient).pipe(_effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.filterStatusOk);\n\tconst arrayBuffer = yield* _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.get(url).pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.modify({ headers: {} }), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_1__.flatMap((_) => _.arrayBuffer), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.mapError((cause) => {\n\t\treturn {\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: `Failed to download requested file: ${cause.message}`,\n\t\t\tdata: cause.toJSON()\n\t\t};\n\t}), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.scoped);\n\treturn new UTFile([arrayBuffer], name, {\n\t\tcustomId,\n\t\tlastModified: Date.now()\n\t});\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"downloadFile\"));\nconst generatePresignedUrl = (file, cd, acl) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function* () {\n\tconst { apiKey, appId } = yield* _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.UTToken;\n\tconst baseUrl = yield* (0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.IngestUrl)(void 0);\n\tconst key = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.generateKey)(file, appId);\n\tconst url = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.generateSignedURL)(`${baseUrl}/${key}`, apiKey, { data: {\n\t\t\"x-ut-identifier\": appId,\n\t\t\"x-ut-file-name\": file.name,\n\t\t\"x-ut-file-size\": file.size,\n\t\t\"x-ut-file-type\": file.type,\n\t\t\"x-ut-custom-id\": file.customId,\n\t\t\"x-ut-content-disposition\": cd,\n\t\t\"x-ut-acl\": acl\n\t} });\n\treturn {\n\t\turl,\n\t\tkey\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"generatePresignedUrl\"));\nconst uploadFile = (file, opts) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function* () {\n\tconst presigned = yield* generatePresignedUrl(file, opts.contentDisposition ?? \"inline\", opts.acl).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"UploadThingError\", (e) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError.toObject(e))), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"ConfigError\", () => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail({\n\t\tcode: \"INVALID_SERVER_CONFIG\",\n\t\tmessage: \"Failed to generate presigned URL\"\n\t})));\n\tconst response = yield* uploadWithoutProgress(file, presigned).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"UploadThingError\", (e) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError.toObject(e))), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"ResponseError\", (e) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail({\n\t\tcode: \"UPLOAD_FAILED\",\n\t\tmessage: \"Failed to upload file\",\n\t\tdata: e.toJSON()\n\t})));\n\treturn {\n\t\tkey: presigned.key,\n\t\turl: response.url,\n\t\tappUrl: response.appUrl,\n\t\tufsUrl: response.ufsUrl,\n\t\tlastModified: file.lastModified ?? Date.now(),\n\t\tname: file.name,\n\t\tsize: file.size,\n\t\ttype: file.type,\n\t\tcustomId: file.customId ?? null,\n\t\tfileHash: response.fileHash\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"uploadFile\"));\n\n//#endregion\n//#region src/sdk/index.ts\nvar UTApi = class {\n\tfetch;\n\tdefaultKeyType;\n\truntime;\n\topts;\n\tconstructor(options) {\n\t\tguardServerOnly();\n\t\tthis.opts = options ?? {};\n\t\tthis.fetch = this.opts.fetch ?? globalThis.fetch;\n\t\tthis.defaultKeyType = this.opts.defaultKeyType ?? \"fileKey\";\n\t\tthis.runtime = (0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.makeRuntime)(this.fetch, this.opts);\n\t}\n\trequestUploadThing = (pathname, body, responseSchema) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(this, function* () {\n\t\tconst { apiKey } = yield* _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.UTToken;\n\t\tconst baseUrl = yield* _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.ApiUrl;\n\t\tconst httpClient = (yield* _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.HttpClient).pipe(_effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.filterStatusOk);\n\t\treturn yield* _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.post(pathname).pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.prependUrl(baseUrl), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.bodyUnsafeJson(body), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.setHeaders({\n\t\t\t\"x-uploadthing-version\": _dist_package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_4__.version,\n\t\t\t\"x-uploadthing-be-adapter\": \"server-sdk\",\n\t\t\t\"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_10__.value(apiKey)\n\t\t}), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_1__.tapBoth({\n\t\t\tonSuccess: (0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.logHttpClientResponse)(\"UploadThing API Response\"),\n\t\t\tonFailure: (0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.logHttpClientError)(\"Failed to request UploadThing API\")\n\t\t}), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.flatMap(_effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_11__.schemaBodyJson(responseSchema)), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.scoped);\n\t}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"ConfigError\", (e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\tcode: \"INVALID_SERVER_CONFIG\",\n\t\tmessage: \"There was an error with the server configuration. More info can be found on this error's `cause` property\",\n\t\tcause: e\n\t})), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"utapi.#requestUploadThing\"));\n\texecuteAsync = async (program, signal) => {\n\t\tconst exit = await program.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"utapi.#executeAsync\"), (e) => this.runtime.runPromiseExit(e, signal ? { signal } : void 0));\n\t\tif (exit._tag === \"Failure\") throw effect_Cause__WEBPACK_IMPORTED_MODULE_12__.squash(exit.cause);\n\t\treturn exit.value;\n\t};\n\tuploadFiles(files, opts) {\n\t\tguardServerOnly();\n\t\tconst concurrency = opts?.concurrency ?? 1;\n\t\tif (concurrency < 1 || concurrency > 25) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"concurrency must be a positive integer between 1 and 25\"\n\t\t});\n\t\tconst program = effect_Effect__WEBPACK_IMPORTED_MODULE_1__.forEach(effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(files), (file) => uploadFile(file, opts ?? {}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.match({\n\t\t\tonSuccess: (data) => ({\n\t\t\t\tdata,\n\t\t\t\terror: null\n\t\t\t}),\n\t\t\tonFailure: (error) => ({\n\t\t\t\tdata: null,\n\t\t\t\terror\n\t\t\t})\n\t\t})), { concurrency }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.map((ups) => Array.isArray(files) ? ups : ups[0]), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.tap((res) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.logDebug(\"Finished uploading\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"uploadResult\", res))), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"uploadFiles\"));\n\t\treturn this.executeAsync(program, opts?.signal);\n\t}\n\tuploadFilesFromUrl(urls, opts) {\n\t\tguardServerOnly();\n\t\tconst concurrency = opts?.concurrency ?? 1;\n\t\tif (concurrency < 1 || concurrency > 25) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"concurrency must be a positive integer between 1 and 25\"\n\t\t});\n\t\tconst program = effect_Effect__WEBPACK_IMPORTED_MODULE_1__.forEach(effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(urls), (url) => downloadFile(url).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.flatMap((file) => uploadFile(file, opts ?? {})), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.match({\n\t\t\tonSuccess: (data) => ({\n\t\t\t\tdata,\n\t\t\t\terror: null\n\t\t\t}),\n\t\t\tonFailure: (error) => ({\n\t\t\t\tdata: null,\n\t\t\t\terror\n\t\t\t})\n\t\t})), { concurrency }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.map((ups) => Array.isArray(urls) ? ups : ups[0]), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.tap((res) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.logDebug(\"Finished uploading\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"uploadResult\", res))), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"uploadFiles\")).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"uploadFilesFromUrl\"));\n\t\treturn this.executeAsync(program, opts?.signal);\n\t}\n\t/**\n\t* Request to delete files from UploadThing storage.\n\t* @param {string | string[]} fileKeys\n\t*\n\t* @example\n\t* await deleteFiles(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n\t*\n\t* @example\n\t* await deleteFiles([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n\t*\n\t* @example\n\t* await deleteFiles(\"myCustomIdentifier\", { keyType: \"customId\" })\n\t*/\n\tdeleteFiles = async (keys, opts) => {\n\t\tguardServerOnly();\n\t\tconst { keyType = this.defaultKeyType } = opts ?? {};\n\t\tclass DeleteFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"DeleteFileResponse\")({\n\t\t\tsuccess: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Boolean,\n\t\t\tdeletedCount: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number\n\t\t}) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/deleteFiles\", keyType === \"fileKey\" ? { fileKeys: effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(keys) } : { customIds: effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(keys) }, DeleteFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"deleteFiles\")));\n\t};\n\t/**\n\t* Request file URLs from UploadThing storage.\n\t* @param {string | string[]} fileKeys\n\t*\n\t* @example\n\t* const data = await getFileUrls(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n\t* console.log(data); // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\"}]\n\t*\n\t* @example\n\t* const data = await getFileUrls([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n\t* console.log(data) // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\" },{key: \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\", url: \"https://uploadthing.com/f/1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"}]\n\t*\n\t* @deprecated - See https://docs.uploadthing.com/working-with-files#accessing-files for info how to access files\n\t*/\n\tgetFileUrls = async (keys, opts) => {\n\t\tguardServerOnly();\n\t\tconst { keyType = this.defaultKeyType } = opts ?? {};\n\t\tclass GetFileUrlResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"GetFileUrlResponse\")({ data: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Array(effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Struct({\n\t\t\tkey: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String,\n\t\t\turl: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String\n\t\t})) }) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/getFileUrl\", keyType === \"fileKey\" ? { fileKeys: effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(keys) } : { customIds: effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(keys) }, GetFileUrlResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"getFileUrls\")));\n\t};\n\t/**\n\t* Request file list from UploadThing storage.\n\t* @param {object} opts\n\t* @param {number} opts.limit The maximum number of files to return\n\t* @param {number} opts.offset The number of files to skip\n\t*\n\t* @example\n\t* const data = await listFiles({ limit: 1 });\n\t* console.log(data); // { key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", id: \"2e0fdb64-9957-4262-8e45-f372ba903ac8\" }\n\t*/\n\tlistFiles = async (opts) => {\n\t\tguardServerOnly();\n\t\tclass ListFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"ListFileResponse\")({\n\t\t\thasMore: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Boolean,\n\t\t\tfiles: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Array(effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Struct({\n\t\t\t\tid: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String,\n\t\t\t\tcustomId: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.NullOr(effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String),\n\t\t\t\tkey: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String,\n\t\t\t\tname: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String,\n\t\t\t\tsize: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number,\n\t\t\t\tstatus: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Literal(\"Deletion Pending\", \"Failed\", \"Uploaded\", \"Uploading\"),\n\t\t\t\tuploadedAt: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number\n\t\t\t}))\n\t\t}) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/listFiles\", { ...opts }, ListFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"listFiles\")));\n\t};\n\trenameFiles = async (updates) => {\n\t\tguardServerOnly();\n\t\tclass RenameFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"RenameFileResponse\")({ success: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Boolean }) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/renameFiles\", { updates: effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(updates) }, RenameFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"renameFiles\")));\n\t};\n\tgetUsageInfo = async () => {\n\t\tguardServerOnly();\n\t\tclass GetUsageInfoResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"GetUsageInfoResponse\")({\n\t\t\ttotalBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number,\n\t\t\tappTotalBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number,\n\t\t\tfilesUploaded: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number,\n\t\t\tlimitBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number\n\t\t}) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/getUsageInfo\", {}, GetUsageInfoResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"getUsageInfo\")));\n\t};\n\t/**\n\t* Generate a presigned url for a private file\n\t* Unlike {@link getSignedURL}, this method does not make a fetch request to the UploadThing API\n\t* and is the recommended way to generate a presigned url for a private file.\n\t**/\n\tgenerateSignedURL = async (key, opts) => {\n\t\tguardServerOnly();\n\t\tconst expiresIn = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.parseTimeToSeconds)(opts?.expiresIn ?? \"5 minutes\");\n\t\tif (opts?.expiresIn && isNaN(expiresIn)) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds.\"\n\t\t});\n\t\tif (expiresIn > 86400 * 7) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"expiresIn must be less than 7 days (604800 seconds).\"\n\t\t});\n\t\tconst program = effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function* () {\n\t\t\tconst { apiKey, appId } = yield* _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.UTToken;\n\t\t\tconst appIdLocation = yield* _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.UfsAppIdLocation;\n\t\t\tconst ufsHost = yield* _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.UfsHost;\n\t\t\tconst proto = ufsHost.includes(\"local\") ? \"http\" : \"https\";\n\t\t\tconst urlBase = appIdLocation === \"subdomain\" ? `${proto}://${appId}.${ufsHost}/f/${key}` : `${proto}://${ufsHost}/a/${appId}/${key}`;\n\t\t\tconst ufsUrl = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.generateSignedURL)(urlBase, apiKey, { ttlInSeconds: expiresIn });\n\t\t\treturn { ufsUrl };\n\t\t});\n\t\treturn await this.executeAsync(program.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"ConfigError\", (e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"INVALID_SERVER_CONFIG\",\n\t\t\tmessage: \"There was an error with the server configuration. More info can be found on this error's `cause` property\",\n\t\t\tcause: e\n\t\t})), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"generateSignedURL\")));\n\t};\n\t/**\n\t* Request a presigned url for a private file(s)\n\t* @remarks This method is no longer recommended as it makes a fetch\n\t* request to the UploadThing API which incurs redundant latency. It\n\t* will be deprecated in UploadThing v8 and removed in UploadThing v9.\n\t*\n\t* @see {@link generateSignedURL} for a more efficient way to generate a presigned url\n\t**/\n\tgetSignedURL = async (key, opts) => {\n\t\tguardServerOnly();\n\t\tconst expiresIn = opts?.expiresIn ? (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.parseTimeToSeconds)(opts.expiresIn) : void 0;\n\t\tconst { keyType = this.defaultKeyType } = opts ?? {};\n\t\tif (opts?.expiresIn && isNaN(expiresIn)) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds.\"\n\t\t});\n\t\tif (expiresIn && expiresIn > 86400 * 7) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"expiresIn must be less than 7 days (604800 seconds).\"\n\t\t});\n\t\tclass GetSignedUrlResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"GetSignedUrlResponse\")({\n\t\t\turl: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String,\n\t\t\tufsUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String\n\t\t}) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/requestFileAccess\", keyType === \"fileKey\" ? {\n\t\t\tfileKey: key,\n\t\t\texpiresIn\n\t\t} : {\n\t\t\tcustomId: key,\n\t\t\texpiresIn\n\t\t}, GetSignedUrlResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"getSignedURL\")));\n\t};\n\t/**\n\t* Update the ACL of a file or set of files.\n\t*\n\t* @example\n\t* // Make a single file public\n\t* await utapi.updateACL(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", \"public-read\");\n\t*\n\t* // Make multiple files private\n\t* await utapi.updateACL(\n\t*   [\n\t*     \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\n\t*     \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\",\n\t*   ],\n\t*   \"private\",\n\t* );\n\t*/\n\tupdateACL = async (keys, acl, opts) => {\n\t\tguardServerOnly();\n\t\tconst { keyType = this.defaultKeyType } = opts ?? {};\n\t\tconst updates = effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(keys).map((key) => {\n\t\t\treturn keyType === \"fileKey\" ? {\n\t\t\t\tfileKey: key,\n\t\t\t\tacl\n\t\t\t} : {\n\t\t\t\tcustomId: key,\n\t\t\t\tacl\n\t\t\t};\n\t\t});\n\t\tconst responseSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Struct({ success: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Boolean });\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/updateACL\", { updates }, responseSchema).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"updateACL\")));\n\t};\n};\n\n//#endregion\n//#region src/server.ts\nconst createUploadthing = (opts) => (0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.createBuilder)(opts);\nconst createRouteHandler = (opts) => {\n\treturn (0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.makeAdapterHandler)((ev) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.succeed({ req: \"request\" in ev ? ev.request : ev }), (ev) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.succeed(\"request\" in ev ? ev.request : ev), opts, \"server\");\n};\nconst extractRouterConfig$1 = (router) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.runSync((0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.extractRouterConfig)(router));\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9zZXJ2ZXIvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRDtBQUNtQjtBQUM3QjtBQUNrTTtBQUMxTTtBQUMrRztBQUNwRztBQUNEO0FBQ047QUFDa0I7QUFDYztBQUNFO0FBQzlCO0FBQ1Q7QUFDRztBQUNXOztBQUVqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsK0RBQU07QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbURBQW1ELDhDQUFVO0FBQzdEO0FBQ0E7QUFDQSw0QkFBNEIsbUVBQXFCLE9BQU8sdUVBQXlCO0FBQ2pGLHFCQUFxQixtRUFBcUIscUJBQXFCLDRFQUE4QixZQUFZLHlFQUEyQix1QkFBdUIseUVBQTJCLDBCQUEwQiw4REFBTyx1QkFBdUIsbURBQWUsQ0FBQyxvRkFBa0IsNEJBQTRCLG1EQUFlLFlBQVksaUVBQWtCO0FBQ3pWO0FBQ0E7QUFDQTtBQUNBLEVBQUUsSUFBSSxrREFBYyxpQkFBaUIsa0RBQWMsQ0FBQyx5REFBWSxHQUFHLGlEQUFhO0FBQ2hGLFFBQVEsbURBQWUsU0FBUyxXQUFXLDZCQUE2Qix1REFBbUI7QUFDM0Y7QUFDQTtBQUNBO0FBQ0EsR0FBRyxxRkFBcUI7QUFDeEI7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHLHFGQUFxQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxpRUFBa0I7QUFDaEU7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLCtCQUErQiw4Q0FBVTtBQUN6QyxXQUFXLHNEQUFrQjtBQUM3QjtBQUNBLDZDQUE2QywrQ0FBVztBQUN4RDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLFNB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QUFDdEU7QUFDQTtBQUNBLEdBQUc7QUFDSCxxQ0FBcUMsaURBQU87QUFDNUMsUUFBUSxrREFBUTtBQUNoQixXQUFXLGtEQUFRO0FBQ25CLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUcsNkJBQTZCLHNEQUFrQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsZ0NBQWdDO0FBQzFDLGtCQUFrQixpREFBVTtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHlCQUF5QixrREFBUSxHQUFHLFNBQVMsbURBQVMsRUFBRTtBQUN4RCw0RUFBNEUsU0FBUyx1QkFBdUIsc0RBQWtCO0FBQzlIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9DQUFvQywrRUFBYTtBQUNqRDtBQUNBLFFBQVEsb0ZBQWtCLFNBQVMsa0RBQWMsR0FBRyx3Q0FBd0MsV0FBVyxrREFBYztBQUNySDtBQUNBLDBDQUEwQyxrREFBYyxDQUFDLHFGQUFtQjs7QUFFNUU7QUFDK007QUFDL00iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ib29rLXNwaGVyZS8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9zZXJ2ZXIvaW5kZXguanM/ODA4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcIi4uL2Rpc3QvcGFja2FnZS1EcFNjcHZUQS5qc1wiO1xuaW1wb3J0IHsgbG9nRGVwcmVjYXRpb25XYXJuaW5nIH0gZnJvbSBcIi4uL2Rpc3QvZGVwcmVjYXRpb25zLXBMbXc2WXRkLmpzXCI7XG5pbXBvcnQgXCIuLi9kaXN0L3NoYXJlZC1zY2hlbWFzLUJtRzVBUm9YLmpzXCI7XG5pbXBvcnQgeyBBcGlVcmwsIEluZ2VzdFVybCwgVVRGaWxlcywgVVRSZWdpb24sIFVUVG9rZW4sIFVmc0FwcElkTG9jYXRpb24sIFVmc0hvc3QsIGNyZWF0ZUJ1aWxkZXIsIGV4dHJhY3RSb3V0ZXJDb25maWcsIGxvZ0h0dHBDbGllbnRFcnJvciwgbG9nSHR0cENsaWVudFJlc3BvbnNlLCBtYWtlQWRhcHRlckhhbmRsZXIsIG1ha2VSdW50aW1lIH0gZnJvbSBcIi4uL2Rpc3QvdXBsb2FkLWJ1aWxkZXItQmxGT0Fuc3YuanNcIjtcbmltcG9ydCAqIGFzIEFyciBmcm9tIFwiZWZmZWN0L0FycmF5XCI7XG5pbXBvcnQgeyBVcGxvYWRUaGluZ0Vycm9yLCBVcGxvYWRUaGluZ0Vycm9yIGFzIFVwbG9hZFRoaW5nRXJyb3IkMSwgZ2VuZXJhdGVLZXksIGdlbmVyYXRlU2lnbmVkVVJMLCBwYXJzZVRpbWVUb1NlY29uZHMgfSBmcm9tIFwiQHVwbG9hZHRoaW5nL3NoYXJlZFwiO1xuaW1wb3J0IHsgdW5zYWZlQ29lcmNlIH0gZnJvbSBcImVmZmVjdC9GdW5jdGlvblwiO1xuaW1wb3J0ICogYXMgUHJlZGljYXRlIGZyb20gXCJlZmZlY3QvUHJlZGljYXRlXCI7XG5pbXBvcnQgKiBhcyBFZmZlY3QgZnJvbSBcImVmZmVjdC9FZmZlY3RcIjtcbmltcG9ydCAqIGFzIEh0dHBDbGllbnQgZnJvbSBcIkBlZmZlY3QvcGxhdGZvcm0vSHR0cENsaWVudFwiO1xuaW1wb3J0ICogYXMgSHR0cENsaWVudFJlcXVlc3QgZnJvbSBcIkBlZmZlY3QvcGxhdGZvcm0vSHR0cENsaWVudFJlcXVlc3RcIjtcbmltcG9ydCAqIGFzIEh0dHBDbGllbnRSZXNwb25zZSBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IdHRwQ2xpZW50UmVzcG9uc2VcIjtcbmltcG9ydCAqIGFzIFJlZGFjdGVkIGZyb20gXCJlZmZlY3QvUmVkYWN0ZWRcIjtcbmltcG9ydCAqIGFzIFMgZnJvbSBcImVmZmVjdC9TY2hlbWFcIjtcbmltcG9ydCAqIGFzIENhdXNlIGZyb20gXCJlZmZlY3QvQ2F1c2VcIjtcbmltcG9ydCB7IGxvb2t1cCB9IGZyb20gXCJAdXBsb2FkdGhpbmcvbWltZS10eXBlc1wiO1xuXG4vLyNyZWdpb24gc3JjL3Nkay91dC1maWxlLnRzXG4vKipcbiogRXh0ZW5zaW9uIG9mIHRoZSBCbG9iIGNsYXNzIHRoYXQgc2ltcGxpZmllcyBzZXR0aW5nIHRoZSBgbmFtZWAgYW5kIGBjdXN0b21JZGAgcHJvcGVydGllcyxcbiogc2ltaWxhciB0byB0aGUgYnVpbHQtaW4gRmlsZSBjbGFzcyBmcm9tIE5vZGUgPiAyMC5cbiovXG52YXIgVVRGaWxlID0gY2xhc3MgZXh0ZW5kcyBCbG9iIHtcblx0bmFtZTtcblx0bGFzdE1vZGlmaWVkO1xuXHRjdXN0b21JZDtcblx0Y29uc3RydWN0b3IocGFydHMsIG5hbWUsIG9wdGlvbnMpIHtcblx0XHRjb25zdCBvcHRpb25zV2l0aERlZmF1bHRzID0ge1xuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHRcdHR5cGU6IG9wdGlvbnM/LnR5cGUgPz8gKGxvb2t1cChuYW1lKSB8fCBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiKSxcblx0XHRcdGxhc3RNb2RpZmllZDogb3B0aW9ucz8ubGFzdE1vZGlmaWVkID8/IERhdGUubm93KClcblx0XHR9O1xuXHRcdHN1cGVyKHBhcnRzLCBvcHRpb25zV2l0aERlZmF1bHRzKTtcblx0XHR0aGlzLm5hbWUgPSBuYW1lO1xuXHRcdHRoaXMuY3VzdG9tSWQgPSBvcHRpb25zV2l0aERlZmF1bHRzLmN1c3RvbUlkO1xuXHRcdHRoaXMubGFzdE1vZGlmaWVkID0gb3B0aW9uc1dpdGhEZWZhdWx0cy5sYXN0TW9kaWZpZWQ7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9faW50ZXJuYWwvdXBsb2FkLXNlcnZlci50c1xuY29uc3QgdXBsb2FkV2l0aG91dFByb2dyZXNzID0gKGZpbGUsIHByZXNpZ25lZCkgPT4gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuXHRjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuXHRmb3JtRGF0YS5hcHBlbmQoXCJmaWxlXCIsIGZpbGUpO1xuXHRjb25zdCBodHRwQ2xpZW50ID0gKHlpZWxkKiBIdHRwQ2xpZW50Lkh0dHBDbGllbnQpLnBpcGUoSHR0cENsaWVudC5maWx0ZXJTdGF0dXNPayk7XG5cdGNvbnN0IGpzb24gPSB5aWVsZCogSHR0cENsaWVudFJlcXVlc3QucHV0KHByZXNpZ25lZC51cmwpLnBpcGUoSHR0cENsaWVudFJlcXVlc3QuYm9keUZvcm1EYXRhKGZvcm1EYXRhKSwgSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVyKFwiUmFuZ2VcIiwgXCJieXRlcz0wLVwiKSwgSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVyKFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCIsIHZlcnNpb24pLCBodHRwQ2xpZW50LmV4ZWN1dGUsIEVmZmVjdC50YXBFcnJvcihsb2dIdHRwQ2xpZW50RXJyb3IoXCJGYWlsZWQgdG8gdXBsb2FkIGZpbGVcIikpLCBFZmZlY3QubWFwRXJyb3IoKGUpID0+IG5ldyBVcGxvYWRUaGluZ0Vycm9yJDEoe1xuXHRcdGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuXHRcdG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHVwbG9hZCBmaWxlXCIsXG5cdFx0Y2F1c2U6IGVcblx0fSkpLCBFZmZlY3QuYW5kVGhlbigoXykgPT4gXy5qc29uKSwgRWZmZWN0LmFuZFRoZW4odW5zYWZlQ29lcmNlKSwgRWZmZWN0LnNjb3BlZCk7XG5cdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoYEZpbGUgJHtmaWxlLm5hbWV9IHVwbG9hZGVkIHN1Y2Nlc3NmdWxseWApLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImpzb25cIiwganNvbikpO1xuXHRyZXR1cm4ge1xuXHRcdC4uLmpzb24sXG5cdFx0Z2V0IHVybCgpIHtcblx0XHRcdGxvZ0RlcHJlY2F0aW9uV2FybmluZyhcImBmaWxlLnVybGAgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHVwbG9hZHRoaW5nIHY5LiBVc2UgYGZpbGUudWZzVXJsYCBpbnN0ZWFkLlwiKTtcblx0XHRcdHJldHVybiBqc29uLnVybDtcblx0XHR9LFxuXHRcdGdldCBhcHBVcmwoKSB7XG5cdFx0XHRsb2dEZXByZWNhdGlvbldhcm5pbmcoXCJgZmlsZS5hcHBVcmxgIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB1cGxvYWR0aGluZyB2OS4gVXNlIGBmaWxlLnVmc1VybGAgaW5zdGVhZC5cIik7XG5cdFx0XHRyZXR1cm4ganNvbi5hcHBVcmw7XG5cdFx0fVxuXHR9O1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zZGsvdXRpbHMudHNcbmZ1bmN0aW9uIGd1YXJkU2VydmVyT25seSgpIHtcblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yJDEoe1xuXHRcdGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG5cdFx0bWVzc2FnZTogXCJUaGUgYHV0YXBpYCBjYW4gb25seSBiZSB1c2VkIG9uIHRoZSBzZXJ2ZXIuXCJcblx0fSk7XG59XG5jb25zdCBkb3dubG9hZEZpbGUgPSAoX3VybCkgPT4gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuXHRsZXQgdXJsID0gUHJlZGljYXRlLmlzUmVjb3JkKF91cmwpID8gX3VybC51cmwgOiBfdXJsO1xuXHRpZiAodHlwZW9mIHVybCA9PT0gXCJzdHJpbmdcIikge1xuXHRcdGlmICh1cmwuc3RhcnRzV2l0aChcImRhdGE6XCIpKSByZXR1cm4geWllbGQqIEVmZmVjdC5mYWlsKHtcblx0XHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRcdG1lc3NhZ2U6IFwiUGxlYXNlIHVzZSB1cGxvYWRGaWxlcygpIGZvciBkYXRhIFVSTHMuIHVwbG9hZEZpbGVzRnJvbVVybCgpIGlzIGludGVuZGVkIGZvciB1c2Ugd2l0aCByZW1vdGUgVVJMcyBvbmx5LlwiLFxuXHRcdFx0ZGF0YTogdm9pZCAwXG5cdFx0fSk7XG5cdH1cblx0dXJsID0gbmV3IFVSTCh1cmwpO1xuXHRjb25zdCB7IG5hbWUgPSB1cmwucGF0aG5hbWUuc3BsaXQoXCIvXCIpLnBvcCgpID8/IFwidW5rbm93bi1maWxlbmFtZVwiLCBjdXN0b21JZCA9IHZvaWQgMCB9ID0gUHJlZGljYXRlLmlzUmVjb3JkKF91cmwpID8gX3VybCA6IHt9O1xuXHRjb25zdCBodHRwQ2xpZW50ID0gKHlpZWxkKiBIdHRwQ2xpZW50Lkh0dHBDbGllbnQpLnBpcGUoSHR0cENsaWVudC5maWx0ZXJTdGF0dXNPayk7XG5cdGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQqIEh0dHBDbGllbnRSZXF1ZXN0LmdldCh1cmwpLnBpcGUoSHR0cENsaWVudFJlcXVlc3QubW9kaWZ5KHsgaGVhZGVyczoge30gfSksIGh0dHBDbGllbnQuZXhlY3V0ZSwgRWZmZWN0LmZsYXRNYXAoKF8pID0+IF8uYXJyYXlCdWZmZXIpLCBFZmZlY3QubWFwRXJyb3IoKGNhdXNlKSA9PiB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRcdG1lc3NhZ2U6IGBGYWlsZWQgdG8gZG93bmxvYWQgcmVxdWVzdGVkIGZpbGU6ICR7Y2F1c2UubWVzc2FnZX1gLFxuXHRcdFx0ZGF0YTogY2F1c2UudG9KU09OKClcblx0XHR9O1xuXHR9KSwgRWZmZWN0LnNjb3BlZCk7XG5cdHJldHVybiBuZXcgVVRGaWxlKFthcnJheUJ1ZmZlcl0sIG5hbWUsIHtcblx0XHRjdXN0b21JZCxcblx0XHRsYXN0TW9kaWZpZWQ6IERhdGUubm93KClcblx0fSk7XG59KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImRvd25sb2FkRmlsZVwiKSk7XG5jb25zdCBnZW5lcmF0ZVByZXNpZ25lZFVybCA9IChmaWxlLCBjZCwgYWNsKSA9PiBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdGNvbnN0IHsgYXBpS2V5LCBhcHBJZCB9ID0geWllbGQqIFVUVG9rZW47XG5cdGNvbnN0IGJhc2VVcmwgPSB5aWVsZCogSW5nZXN0VXJsKHZvaWQgMCk7XG5cdGNvbnN0IGtleSA9IHlpZWxkKiBnZW5lcmF0ZUtleShmaWxlLCBhcHBJZCk7XG5cdGNvbnN0IHVybCA9IHlpZWxkKiBnZW5lcmF0ZVNpZ25lZFVSTChgJHtiYXNlVXJsfS8ke2tleX1gLCBhcGlLZXksIHsgZGF0YToge1xuXHRcdFwieC11dC1pZGVudGlmaWVyXCI6IGFwcElkLFxuXHRcdFwieC11dC1maWxlLW5hbWVcIjogZmlsZS5uYW1lLFxuXHRcdFwieC11dC1maWxlLXNpemVcIjogZmlsZS5zaXplLFxuXHRcdFwieC11dC1maWxlLXR5cGVcIjogZmlsZS50eXBlLFxuXHRcdFwieC11dC1jdXN0b20taWRcIjogZmlsZS5jdXN0b21JZCxcblx0XHRcIngtdXQtY29udGVudC1kaXNwb3NpdGlvblwiOiBjZCxcblx0XHRcIngtdXQtYWNsXCI6IGFjbFxuXHR9IH0pO1xuXHRyZXR1cm4ge1xuXHRcdHVybCxcblx0XHRrZXlcblx0fTtcbn0pLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiZ2VuZXJhdGVQcmVzaWduZWRVcmxcIikpO1xuY29uc3QgdXBsb2FkRmlsZSA9IChmaWxlLCBvcHRzKSA9PiBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdGNvbnN0IHByZXNpZ25lZCA9IHlpZWxkKiBnZW5lcmF0ZVByZXNpZ25lZFVybChmaWxlLCBvcHRzLmNvbnRlbnREaXNwb3NpdGlvbiA/PyBcImlubGluZVwiLCBvcHRzLmFjbCkucGlwZShFZmZlY3QuY2F0Y2hUYWcoXCJVcGxvYWRUaGluZ0Vycm9yXCIsIChlKSA9PiBFZmZlY3QuZmFpbChVcGxvYWRUaGluZ0Vycm9yJDEudG9PYmplY3QoZSkpKSwgRWZmZWN0LmNhdGNoVGFnKFwiQ29uZmlnRXJyb3JcIiwgKCkgPT4gRWZmZWN0LmZhaWwoe1xuXHRcdGNvZGU6IFwiSU5WQUxJRF9TRVJWRVJfQ09ORklHXCIsXG5cdFx0bWVzc2FnZTogXCJGYWlsZWQgdG8gZ2VuZXJhdGUgcHJlc2lnbmVkIFVSTFwiXG5cdH0pKSk7XG5cdGNvbnN0IHJlc3BvbnNlID0geWllbGQqIHVwbG9hZFdpdGhvdXRQcm9ncmVzcyhmaWxlLCBwcmVzaWduZWQpLnBpcGUoRWZmZWN0LmNhdGNoVGFnKFwiVXBsb2FkVGhpbmdFcnJvclwiLCAoZSkgPT4gRWZmZWN0LmZhaWwoVXBsb2FkVGhpbmdFcnJvciQxLnRvT2JqZWN0KGUpKSksIEVmZmVjdC5jYXRjaFRhZyhcIlJlc3BvbnNlRXJyb3JcIiwgKGUpID0+IEVmZmVjdC5mYWlsKHtcblx0XHRjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcblx0XHRtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGxvYWQgZmlsZVwiLFxuXHRcdGRhdGE6IGUudG9KU09OKClcblx0fSkpKTtcblx0cmV0dXJuIHtcblx0XHRrZXk6IHByZXNpZ25lZC5rZXksXG5cdFx0dXJsOiByZXNwb25zZS51cmwsXG5cdFx0YXBwVXJsOiByZXNwb25zZS5hcHBVcmwsXG5cdFx0dWZzVXJsOiByZXNwb25zZS51ZnNVcmwsXG5cdFx0bGFzdE1vZGlmaWVkOiBmaWxlLmxhc3RNb2RpZmllZCA/PyBEYXRlLm5vdygpLFxuXHRcdG5hbWU6IGZpbGUubmFtZSxcblx0XHRzaXplOiBmaWxlLnNpemUsXG5cdFx0dHlwZTogZmlsZS50eXBlLFxuXHRcdGN1c3RvbUlkOiBmaWxlLmN1c3RvbUlkID8/IG51bGwsXG5cdFx0ZmlsZUhhc2g6IHJlc3BvbnNlLmZpbGVIYXNoXG5cdH07XG59KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcInVwbG9hZEZpbGVcIikpO1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvc2RrL2luZGV4LnRzXG52YXIgVVRBcGkgPSBjbGFzcyB7XG5cdGZldGNoO1xuXHRkZWZhdWx0S2V5VHlwZTtcblx0cnVudGltZTtcblx0b3B0cztcblx0Y29uc3RydWN0b3Iob3B0aW9ucykge1xuXHRcdGd1YXJkU2VydmVyT25seSgpO1xuXHRcdHRoaXMub3B0cyA9IG9wdGlvbnMgPz8ge307XG5cdFx0dGhpcy5mZXRjaCA9IHRoaXMub3B0cy5mZXRjaCA/PyBnbG9iYWxUaGlzLmZldGNoO1xuXHRcdHRoaXMuZGVmYXVsdEtleVR5cGUgPSB0aGlzLm9wdHMuZGVmYXVsdEtleVR5cGUgPz8gXCJmaWxlS2V5XCI7XG5cdFx0dGhpcy5ydW50aW1lID0gbWFrZVJ1bnRpbWUodGhpcy5mZXRjaCwgdGhpcy5vcHRzKTtcblx0fVxuXHRyZXF1ZXN0VXBsb2FkVGhpbmcgPSAocGF0aG5hbWUsIGJvZHksIHJlc3BvbnNlU2NoZW1hKSA9PiBFZmZlY3QuZ2VuKHRoaXMsIGZ1bmN0aW9uKiAoKSB7XG5cdFx0Y29uc3QgeyBhcGlLZXkgfSA9IHlpZWxkKiBVVFRva2VuO1xuXHRcdGNvbnN0IGJhc2VVcmwgPSB5aWVsZCogQXBpVXJsO1xuXHRcdGNvbnN0IGh0dHBDbGllbnQgPSAoeWllbGQqIEh0dHBDbGllbnQuSHR0cENsaWVudCkucGlwZShIdHRwQ2xpZW50LmZpbHRlclN0YXR1c09rKTtcblx0XHRyZXR1cm4geWllbGQqIEh0dHBDbGllbnRSZXF1ZXN0LnBvc3QocGF0aG5hbWUpLnBpcGUoSHR0cENsaWVudFJlcXVlc3QucHJlcGVuZFVybChiYXNlVXJsKSwgSHR0cENsaWVudFJlcXVlc3QuYm9keVVuc2FmZUpzb24oYm9keSksIEh0dHBDbGllbnRSZXF1ZXN0LnNldEhlYWRlcnMoe1xuXHRcdFx0XCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogdmVyc2lvbixcblx0XHRcdFwieC11cGxvYWR0aGluZy1iZS1hZGFwdGVyXCI6IFwic2VydmVyLXNka1wiLFxuXHRcdFx0XCJ4LXVwbG9hZHRoaW5nLWFwaS1rZXlcIjogUmVkYWN0ZWQudmFsdWUoYXBpS2V5KVxuXHRcdH0pLCBodHRwQ2xpZW50LmV4ZWN1dGUsIEVmZmVjdC50YXBCb3RoKHtcblx0XHRcdG9uU3VjY2VzczogbG9nSHR0cENsaWVudFJlc3BvbnNlKFwiVXBsb2FkVGhpbmcgQVBJIFJlc3BvbnNlXCIpLFxuXHRcdFx0b25GYWlsdXJlOiBsb2dIdHRwQ2xpZW50RXJyb3IoXCJGYWlsZWQgdG8gcmVxdWVzdCBVcGxvYWRUaGluZyBBUElcIilcblx0XHR9KSwgRWZmZWN0LmZsYXRNYXAoSHR0cENsaWVudFJlc3BvbnNlLnNjaGVtYUJvZHlKc29uKHJlc3BvbnNlU2NoZW1hKSksIEVmZmVjdC5zY29wZWQpO1xuXHR9KS5waXBlKEVmZmVjdC5jYXRjaFRhZyhcIkNvbmZpZ0Vycm9yXCIsIChlKSA9PiBuZXcgVXBsb2FkVGhpbmdFcnJvciQxKHtcblx0XHRjb2RlOiBcIklOVkFMSURfU0VSVkVSX0NPTkZJR1wiLFxuXHRcdG1lc3NhZ2U6IFwiVGhlcmUgd2FzIGFuIGVycm9yIHdpdGggdGhlIHNlcnZlciBjb25maWd1cmF0aW9uLiBNb3JlIGluZm8gY2FuIGJlIGZvdW5kIG9uIHRoaXMgZXJyb3IncyBgY2F1c2VgIHByb3BlcnR5XCIsXG5cdFx0Y2F1c2U6IGVcblx0fSkpLCBFZmZlY3Qud2l0aExvZ1NwYW4oXCJ1dGFwaS4jcmVxdWVzdFVwbG9hZFRoaW5nXCIpKTtcblx0ZXhlY3V0ZUFzeW5jID0gYXN5bmMgKHByb2dyYW0sIHNpZ25hbCkgPT4ge1xuXHRcdGNvbnN0IGV4aXQgPSBhd2FpdCBwcm9ncmFtLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwidXRhcGkuI2V4ZWN1dGVBc3luY1wiKSwgKGUpID0+IHRoaXMucnVudGltZS5ydW5Qcm9taXNlRXhpdChlLCBzaWduYWwgPyB7IHNpZ25hbCB9IDogdm9pZCAwKSk7XG5cdFx0aWYgKGV4aXQuX3RhZyA9PT0gXCJGYWlsdXJlXCIpIHRocm93IENhdXNlLnNxdWFzaChleGl0LmNhdXNlKTtcblx0XHRyZXR1cm4gZXhpdC52YWx1ZTtcblx0fTtcblx0dXBsb2FkRmlsZXMoZmlsZXMsIG9wdHMpIHtcblx0XHRndWFyZFNlcnZlck9ubHkoKTtcblx0XHRjb25zdCBjb25jdXJyZW5jeSA9IG9wdHM/LmNvbmN1cnJlbmN5ID8/IDE7XG5cdFx0aWYgKGNvbmN1cnJlbmN5IDwgMSB8fCBjb25jdXJyZW5jeSA+IDI1KSB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvciQxKHtcblx0XHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRcdG1lc3NhZ2U6IFwiY29uY3VycmVuY3kgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIgYmV0d2VlbiAxIGFuZCAyNVwiXG5cdFx0fSk7XG5cdFx0Y29uc3QgcHJvZ3JhbSA9IEVmZmVjdC5mb3JFYWNoKEFyci5lbnN1cmUoZmlsZXMpLCAoZmlsZSkgPT4gdXBsb2FkRmlsZShmaWxlLCBvcHRzID8/IHt9KS5waXBlKEVmZmVjdC5tYXRjaCh7XG5cdFx0XHRvblN1Y2Nlc3M6IChkYXRhKSA9PiAoe1xuXHRcdFx0XHRkYXRhLFxuXHRcdFx0XHRlcnJvcjogbnVsbFxuXHRcdFx0fSksXG5cdFx0XHRvbkZhaWx1cmU6IChlcnJvcikgPT4gKHtcblx0XHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdFx0ZXJyb3Jcblx0XHRcdH0pXG5cdFx0fSkpLCB7IGNvbmN1cnJlbmN5IH0pLnBpcGUoRWZmZWN0Lm1hcCgodXBzKSA9PiBBcnJheS5pc0FycmF5KGZpbGVzKSA/IHVwcyA6IHVwc1swXSksIEVmZmVjdC50YXAoKHJlcykgPT4gRWZmZWN0LmxvZ0RlYnVnKFwiRmluaXNoZWQgdXBsb2FkaW5nXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcInVwbG9hZFJlc3VsdFwiLCByZXMpKSksIEVmZmVjdC53aXRoTG9nU3BhbihcInVwbG9hZEZpbGVzXCIpKTtcblx0XHRyZXR1cm4gdGhpcy5leGVjdXRlQXN5bmMocHJvZ3JhbSwgb3B0cz8uc2lnbmFsKTtcblx0fVxuXHR1cGxvYWRGaWxlc0Zyb21VcmwodXJscywgb3B0cykge1xuXHRcdGd1YXJkU2VydmVyT25seSgpO1xuXHRcdGNvbnN0IGNvbmN1cnJlbmN5ID0gb3B0cz8uY29uY3VycmVuY3kgPz8gMTtcblx0XHRpZiAoY29uY3VycmVuY3kgPCAxIHx8IGNvbmN1cnJlbmN5ID4gMjUpIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yJDEoe1xuXHRcdFx0Y29kZTogXCJCQURfUkVRVUVTVFwiLFxuXHRcdFx0bWVzc2FnZTogXCJjb25jdXJyZW5jeSBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciBiZXR3ZWVuIDEgYW5kIDI1XCJcblx0XHR9KTtcblx0XHRjb25zdCBwcm9ncmFtID0gRWZmZWN0LmZvckVhY2goQXJyLmVuc3VyZSh1cmxzKSwgKHVybCkgPT4gZG93bmxvYWRGaWxlKHVybCkucGlwZShFZmZlY3QuZmxhdE1hcCgoZmlsZSkgPT4gdXBsb2FkRmlsZShmaWxlLCBvcHRzID8/IHt9KSksIEVmZmVjdC5tYXRjaCh7XG5cdFx0XHRvblN1Y2Nlc3M6IChkYXRhKSA9PiAoe1xuXHRcdFx0XHRkYXRhLFxuXHRcdFx0XHRlcnJvcjogbnVsbFxuXHRcdFx0fSksXG5cdFx0XHRvbkZhaWx1cmU6IChlcnJvcikgPT4gKHtcblx0XHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdFx0ZXJyb3Jcblx0XHRcdH0pXG5cdFx0fSkpLCB7IGNvbmN1cnJlbmN5IH0pLnBpcGUoRWZmZWN0Lm1hcCgodXBzKSA9PiBBcnJheS5pc0FycmF5KHVybHMpID8gdXBzIDogdXBzWzBdKSwgRWZmZWN0LnRhcCgocmVzKSA9PiBFZmZlY3QubG9nRGVidWcoXCJGaW5pc2hlZCB1cGxvYWRpbmdcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwidXBsb2FkUmVzdWx0XCIsIHJlcykpKSwgRWZmZWN0LndpdGhMb2dTcGFuKFwidXBsb2FkRmlsZXNcIikpLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwidXBsb2FkRmlsZXNGcm9tVXJsXCIpKTtcblx0XHRyZXR1cm4gdGhpcy5leGVjdXRlQXN5bmMocHJvZ3JhbSwgb3B0cz8uc2lnbmFsKTtcblx0fVxuXHQvKipcblx0KiBSZXF1ZXN0IHRvIGRlbGV0ZSBmaWxlcyBmcm9tIFVwbG9hZFRoaW5nIHN0b3JhZ2UuXG5cdCogQHBhcmFtIHtzdHJpbmcgfCBzdHJpbmdbXX0gZmlsZUtleXNcblx0KlxuXHQqIEBleGFtcGxlXG5cdCogYXdhaXQgZGVsZXRlRmlsZXMoXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIpO1xuXHQqXG5cdCogQGV4YW1wbGVcblx0KiBhd2FpdCBkZWxldGVGaWxlcyhbXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsXCIxNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wiXSlcblx0KlxuXHQqIEBleGFtcGxlXG5cdCogYXdhaXQgZGVsZXRlRmlsZXMoXCJteUN1c3RvbUlkZW50aWZpZXJcIiwgeyBrZXlUeXBlOiBcImN1c3RvbUlkXCIgfSlcblx0Ki9cblx0ZGVsZXRlRmlsZXMgPSBhc3luYyAoa2V5cywgb3B0cykgPT4ge1xuXHRcdGd1YXJkU2VydmVyT25seSgpO1xuXHRcdGNvbnN0IHsga2V5VHlwZSA9IHRoaXMuZGVmYXVsdEtleVR5cGUgfSA9IG9wdHMgPz8ge307XG5cdFx0Y2xhc3MgRGVsZXRlRmlsZVJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkRlbGV0ZUZpbGVSZXNwb25zZVwiKSh7XG5cdFx0XHRzdWNjZXNzOiBTLkJvb2xlYW4sXG5cdFx0XHRkZWxldGVkQ291bnQ6IFMuTnVtYmVyXG5cdFx0fSkge31cblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmModGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvdjYvZGVsZXRlRmlsZXNcIiwga2V5VHlwZSA9PT0gXCJmaWxlS2V5XCIgPyB7IGZpbGVLZXlzOiBBcnIuZW5zdXJlKGtleXMpIH0gOiB7IGN1c3RvbUlkczogQXJyLmVuc3VyZShrZXlzKSB9LCBEZWxldGVGaWxlUmVzcG9uc2UpLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiZGVsZXRlRmlsZXNcIikpKTtcblx0fTtcblx0LyoqXG5cdCogUmVxdWVzdCBmaWxlIFVSTHMgZnJvbSBVcGxvYWRUaGluZyBzdG9yYWdlLlxuXHQqIEBwYXJhbSB7c3RyaW5nIHwgc3RyaW5nW119IGZpbGVLZXlzXG5cdCpcblx0KiBAZXhhbXBsZVxuXHQqIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRGaWxlVXJscyhcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIik7XG5cdCogY29uc29sZS5sb2coZGF0YSk7IC8vIFt7a2V5OiBcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIiwgdXJsOiBcImh0dHBzOi8vdXBsb2FkdGhpbmcuY29tL2YvMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wifV1cblx0KlxuXHQqIEBleGFtcGxlXG5cdCogY29uc3QgZGF0YSA9IGF3YWl0IGdldEZpbGVVcmxzKFtcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIixcIjE2NDkzNTNiLTA0ZWEtNDhhMi05ZGI3LTMxZGU3ZjU2MmM4ZF9pbWFnZTIuanBnXCJdKVxuXHQqIGNvbnNvbGUubG9nKGRhdGEpIC8vIFt7a2V5OiBcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIiwgdXJsOiBcImh0dHBzOi8vdXBsb2FkdGhpbmcuY29tL2YvMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiIH0se2tleTogXCIxNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wiLCB1cmw6IFwiaHR0cHM6Ly91cGxvYWR0aGluZy5jb20vZi8xNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wifV1cblx0KlxuXHQqIEBkZXByZWNhdGVkIC0gU2VlIGh0dHBzOi8vZG9jcy51cGxvYWR0aGluZy5jb20vd29ya2luZy13aXRoLWZpbGVzI2FjY2Vzc2luZy1maWxlcyBmb3IgaW5mbyBob3cgdG8gYWNjZXNzIGZpbGVzXG5cdCovXG5cdGdldEZpbGVVcmxzID0gYXN5bmMgKGtleXMsIG9wdHMpID0+IHtcblx0XHRndWFyZFNlcnZlck9ubHkoKTtcblx0XHRjb25zdCB7IGtleVR5cGUgPSB0aGlzLmRlZmF1bHRLZXlUeXBlIH0gPSBvcHRzID8/IHt9O1xuXHRcdGNsYXNzIEdldEZpbGVVcmxSZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJHZXRGaWxlVXJsUmVzcG9uc2VcIikoeyBkYXRhOiBTLkFycmF5KFMuU3RydWN0KHtcblx0XHRcdGtleTogUy5TdHJpbmcsXG5cdFx0XHR1cmw6IFMuU3RyaW5nXG5cdFx0fSkpIH0pIHt9XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUFzeW5jKHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFwiL3Y2L2dldEZpbGVVcmxcIiwga2V5VHlwZSA9PT0gXCJmaWxlS2V5XCIgPyB7IGZpbGVLZXlzOiBBcnIuZW5zdXJlKGtleXMpIH0gOiB7IGN1c3RvbUlkczogQXJyLmVuc3VyZShrZXlzKSB9LCBHZXRGaWxlVXJsUmVzcG9uc2UpLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiZ2V0RmlsZVVybHNcIikpKTtcblx0fTtcblx0LyoqXG5cdCogUmVxdWVzdCBmaWxlIGxpc3QgZnJvbSBVcGxvYWRUaGluZyBzdG9yYWdlLlxuXHQqIEBwYXJhbSB7b2JqZWN0fSBvcHRzXG5cdCogQHBhcmFtIHtudW1iZXJ9IG9wdHMubGltaXQgVGhlIG1heGltdW0gbnVtYmVyIG9mIGZpbGVzIHRvIHJldHVyblxuXHQqIEBwYXJhbSB7bnVtYmVyfSBvcHRzLm9mZnNldCBUaGUgbnVtYmVyIG9mIGZpbGVzIHRvIHNraXBcblx0KlxuXHQqIEBleGFtcGxlXG5cdCogY29uc3QgZGF0YSA9IGF3YWl0IGxpc3RGaWxlcyh7IGxpbWl0OiAxIH0pO1xuXHQqIGNvbnNvbGUubG9nKGRhdGEpOyAvLyB7IGtleTogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIGlkOiBcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOFwiIH1cblx0Ki9cblx0bGlzdEZpbGVzID0gYXN5bmMgKG9wdHMpID0+IHtcblx0XHRndWFyZFNlcnZlck9ubHkoKTtcblx0XHRjbGFzcyBMaXN0RmlsZVJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkxpc3RGaWxlUmVzcG9uc2VcIikoe1xuXHRcdFx0aGFzTW9yZTogUy5Cb29sZWFuLFxuXHRcdFx0ZmlsZXM6IFMuQXJyYXkoUy5TdHJ1Y3Qoe1xuXHRcdFx0XHRpZDogUy5TdHJpbmcsXG5cdFx0XHRcdGN1c3RvbUlkOiBTLk51bGxPcihTLlN0cmluZyksXG5cdFx0XHRcdGtleTogUy5TdHJpbmcsXG5cdFx0XHRcdG5hbWU6IFMuU3RyaW5nLFxuXHRcdFx0XHRzaXplOiBTLk51bWJlcixcblx0XHRcdFx0c3RhdHVzOiBTLkxpdGVyYWwoXCJEZWxldGlvbiBQZW5kaW5nXCIsIFwiRmFpbGVkXCIsIFwiVXBsb2FkZWRcIiwgXCJVcGxvYWRpbmdcIiksXG5cdFx0XHRcdHVwbG9hZGVkQXQ6IFMuTnVtYmVyXG5cdFx0XHR9KSlcblx0XHR9KSB7fVxuXHRcdHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9saXN0RmlsZXNcIiwgeyAuLi5vcHRzIH0sIExpc3RGaWxlUmVzcG9uc2UpLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwibGlzdEZpbGVzXCIpKSk7XG5cdH07XG5cdHJlbmFtZUZpbGVzID0gYXN5bmMgKHVwZGF0ZXMpID0+IHtcblx0XHRndWFyZFNlcnZlck9ubHkoKTtcblx0XHRjbGFzcyBSZW5hbWVGaWxlUmVzcG9uc2UgZXh0ZW5kcyBTLkNsYXNzKFwiUmVuYW1lRmlsZVJlc3BvbnNlXCIpKHsgc3VjY2VzczogUy5Cb29sZWFuIH0pIHt9XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUFzeW5jKHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFwiL3Y2L3JlbmFtZUZpbGVzXCIsIHsgdXBkYXRlczogQXJyLmVuc3VyZSh1cGRhdGVzKSB9LCBSZW5hbWVGaWxlUmVzcG9uc2UpLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwicmVuYW1lRmlsZXNcIikpKTtcblx0fTtcblx0Z2V0VXNhZ2VJbmZvID0gYXN5bmMgKCkgPT4ge1xuXHRcdGd1YXJkU2VydmVyT25seSgpO1xuXHRcdGNsYXNzIEdldFVzYWdlSW5mb1Jlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkdldFVzYWdlSW5mb1Jlc3BvbnNlXCIpKHtcblx0XHRcdHRvdGFsQnl0ZXM6IFMuTnVtYmVyLFxuXHRcdFx0YXBwVG90YWxCeXRlczogUy5OdW1iZXIsXG5cdFx0XHRmaWxlc1VwbG9hZGVkOiBTLk51bWJlcixcblx0XHRcdGxpbWl0Qnl0ZXM6IFMuTnVtYmVyXG5cdFx0fSkge31cblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmModGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvdjYvZ2V0VXNhZ2VJbmZvXCIsIHt9LCBHZXRVc2FnZUluZm9SZXNwb25zZSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJnZXRVc2FnZUluZm9cIikpKTtcblx0fTtcblx0LyoqXG5cdCogR2VuZXJhdGUgYSBwcmVzaWduZWQgdXJsIGZvciBhIHByaXZhdGUgZmlsZVxuXHQqIFVubGlrZSB7QGxpbmsgZ2V0U2lnbmVkVVJMfSwgdGhpcyBtZXRob2QgZG9lcyBub3QgbWFrZSBhIGZldGNoIHJlcXVlc3QgdG8gdGhlIFVwbG9hZFRoaW5nIEFQSVxuXHQqIGFuZCBpcyB0aGUgcmVjb21tZW5kZWQgd2F5IHRvIGdlbmVyYXRlIGEgcHJlc2lnbmVkIHVybCBmb3IgYSBwcml2YXRlIGZpbGUuXG5cdCoqL1xuXHRnZW5lcmF0ZVNpZ25lZFVSTCA9IGFzeW5jIChrZXksIG9wdHMpID0+IHtcblx0XHRndWFyZFNlcnZlck9ubHkoKTtcblx0XHRjb25zdCBleHBpcmVzSW4gPSBwYXJzZVRpbWVUb1NlY29uZHMob3B0cz8uZXhwaXJlc0luID8/IFwiNSBtaW51dGVzXCIpO1xuXHRcdGlmIChvcHRzPy5leHBpcmVzSW4gJiYgaXNOYU4oZXhwaXJlc0luKSkgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3IkMSh7XG5cdFx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0XHRtZXNzYWdlOiBcImV4cGlyZXNJbiBtdXN0IGJlIGEgdmFsaWQgdGltZSBzdHJpbmcsIGZvciBleGFtcGxlICcxZCcsICcyIGRheXMnLCBvciBhIG51bWJlciBvZiBzZWNvbmRzLlwiXG5cdFx0fSk7XG5cdFx0aWYgKGV4cGlyZXNJbiA+IDg2NDAwICogNykgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3IkMSh7XG5cdFx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0XHRtZXNzYWdlOiBcImV4cGlyZXNJbiBtdXN0IGJlIGxlc3MgdGhhbiA3IGRheXMgKDYwNDgwMCBzZWNvbmRzKS5cIlxuXHRcdH0pO1xuXHRcdGNvbnN0IHByb2dyYW0gPSBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdFx0XHRjb25zdCB7IGFwaUtleSwgYXBwSWQgfSA9IHlpZWxkKiBVVFRva2VuO1xuXHRcdFx0Y29uc3QgYXBwSWRMb2NhdGlvbiA9IHlpZWxkKiBVZnNBcHBJZExvY2F0aW9uO1xuXHRcdFx0Y29uc3QgdWZzSG9zdCA9IHlpZWxkKiBVZnNIb3N0O1xuXHRcdFx0Y29uc3QgcHJvdG8gPSB1ZnNIb3N0LmluY2x1ZGVzKFwibG9jYWxcIikgPyBcImh0dHBcIiA6IFwiaHR0cHNcIjtcblx0XHRcdGNvbnN0IHVybEJhc2UgPSBhcHBJZExvY2F0aW9uID09PSBcInN1YmRvbWFpblwiID8gYCR7cHJvdG99Oi8vJHthcHBJZH0uJHt1ZnNIb3N0fS9mLyR7a2V5fWAgOiBgJHtwcm90b306Ly8ke3Vmc0hvc3R9L2EvJHthcHBJZH0vJHtrZXl9YDtcblx0XHRcdGNvbnN0IHVmc1VybCA9IHlpZWxkKiBnZW5lcmF0ZVNpZ25lZFVSTCh1cmxCYXNlLCBhcGlLZXksIHsgdHRsSW5TZWNvbmRzOiBleHBpcmVzSW4gfSk7XG5cdFx0XHRyZXR1cm4geyB1ZnNVcmwgfTtcblx0XHR9KTtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmMocHJvZ3JhbS5waXBlKEVmZmVjdC5jYXRjaFRhZyhcIkNvbmZpZ0Vycm9yXCIsIChlKSA9PiBuZXcgVXBsb2FkVGhpbmdFcnJvciQxKHtcblx0XHRcdGNvZGU6IFwiSU5WQUxJRF9TRVJWRVJfQ09ORklHXCIsXG5cdFx0XHRtZXNzYWdlOiBcIlRoZXJlIHdhcyBhbiBlcnJvciB3aXRoIHRoZSBzZXJ2ZXIgY29uZmlndXJhdGlvbi4gTW9yZSBpbmZvIGNhbiBiZSBmb3VuZCBvbiB0aGlzIGVycm9yJ3MgYGNhdXNlYCBwcm9wZXJ0eVwiLFxuXHRcdFx0Y2F1c2U6IGVcblx0XHR9KSksIEVmZmVjdC53aXRoTG9nU3BhbihcImdlbmVyYXRlU2lnbmVkVVJMXCIpKSk7XG5cdH07XG5cdC8qKlxuXHQqIFJlcXVlc3QgYSBwcmVzaWduZWQgdXJsIGZvciBhIHByaXZhdGUgZmlsZShzKVxuXHQqIEByZW1hcmtzIFRoaXMgbWV0aG9kIGlzIG5vIGxvbmdlciByZWNvbW1lbmRlZCBhcyBpdCBtYWtlcyBhIGZldGNoXG5cdCogcmVxdWVzdCB0byB0aGUgVXBsb2FkVGhpbmcgQVBJIHdoaWNoIGluY3VycyByZWR1bmRhbnQgbGF0ZW5jeS4gSXRcblx0KiB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gVXBsb2FkVGhpbmcgdjggYW5kIHJlbW92ZWQgaW4gVXBsb2FkVGhpbmcgdjkuXG5cdCpcblx0KiBAc2VlIHtAbGluayBnZW5lcmF0ZVNpZ25lZFVSTH0gZm9yIGEgbW9yZSBlZmZpY2llbnQgd2F5IHRvIGdlbmVyYXRlIGEgcHJlc2lnbmVkIHVybFxuXHQqKi9cblx0Z2V0U2lnbmVkVVJMID0gYXN5bmMgKGtleSwgb3B0cykgPT4ge1xuXHRcdGd1YXJkU2VydmVyT25seSgpO1xuXHRcdGNvbnN0IGV4cGlyZXNJbiA9IG9wdHM/LmV4cGlyZXNJbiA/IHBhcnNlVGltZVRvU2Vjb25kcyhvcHRzLmV4cGlyZXNJbikgOiB2b2lkIDA7XG5cdFx0Y29uc3QgeyBrZXlUeXBlID0gdGhpcy5kZWZhdWx0S2V5VHlwZSB9ID0gb3B0cyA/PyB7fTtcblx0XHRpZiAob3B0cz8uZXhwaXJlc0luICYmIGlzTmFOKGV4cGlyZXNJbikpIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yJDEoe1xuXHRcdFx0Y29kZTogXCJCQURfUkVRVUVTVFwiLFxuXHRcdFx0bWVzc2FnZTogXCJleHBpcmVzSW4gbXVzdCBiZSBhIHZhbGlkIHRpbWUgc3RyaW5nLCBmb3IgZXhhbXBsZSAnMWQnLCAnMiBkYXlzJywgb3IgYSBudW1iZXIgb2Ygc2Vjb25kcy5cIlxuXHRcdH0pO1xuXHRcdGlmIChleHBpcmVzSW4gJiYgZXhwaXJlc0luID4gODY0MDAgKiA3KSB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvciQxKHtcblx0XHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRcdG1lc3NhZ2U6IFwiZXhwaXJlc0luIG11c3QgYmUgbGVzcyB0aGFuIDcgZGF5cyAoNjA0ODAwIHNlY29uZHMpLlwiXG5cdFx0fSk7XG5cdFx0Y2xhc3MgR2V0U2lnbmVkVXJsUmVzcG9uc2UgZXh0ZW5kcyBTLkNsYXNzKFwiR2V0U2lnbmVkVXJsUmVzcG9uc2VcIikoe1xuXHRcdFx0dXJsOiBTLlN0cmluZyxcblx0XHRcdHVmc1VybDogUy5TdHJpbmdcblx0XHR9KSB7fVxuXHRcdHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9yZXF1ZXN0RmlsZUFjY2Vzc1wiLCBrZXlUeXBlID09PSBcImZpbGVLZXlcIiA/IHtcblx0XHRcdGZpbGVLZXk6IGtleSxcblx0XHRcdGV4cGlyZXNJblxuXHRcdH0gOiB7XG5cdFx0XHRjdXN0b21JZDoga2V5LFxuXHRcdFx0ZXhwaXJlc0luXG5cdFx0fSwgR2V0U2lnbmVkVXJsUmVzcG9uc2UpLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiZ2V0U2lnbmVkVVJMXCIpKSk7XG5cdH07XG5cdC8qKlxuXHQqIFVwZGF0ZSB0aGUgQUNMIG9mIGEgZmlsZSBvciBzZXQgb2YgZmlsZXMuXG5cdCpcblx0KiBAZXhhbXBsZVxuXHQqIC8vIE1ha2UgYSBzaW5nbGUgZmlsZSBwdWJsaWNcblx0KiBhd2FpdCB1dGFwaS51cGRhdGVBQ0woXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIFwicHVibGljLXJlYWRcIik7XG5cdCpcblx0KiAvLyBNYWtlIG11bHRpcGxlIGZpbGVzIHByaXZhdGVcblx0KiBhd2FpdCB1dGFwaS51cGRhdGVBQ0woXG5cdCogICBbXG5cdCogICAgIFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLFxuXHQqICAgICBcIjE2NDkzNTNiLTA0ZWEtNDhhMi05ZGI3LTMxZGU3ZjU2MmM4ZF9pbWFnZTIuanBnXCIsXG5cdCogICBdLFxuXHQqICAgXCJwcml2YXRlXCIsXG5cdCogKTtcblx0Ki9cblx0dXBkYXRlQUNMID0gYXN5bmMgKGtleXMsIGFjbCwgb3B0cykgPT4ge1xuXHRcdGd1YXJkU2VydmVyT25seSgpO1xuXHRcdGNvbnN0IHsga2V5VHlwZSA9IHRoaXMuZGVmYXVsdEtleVR5cGUgfSA9IG9wdHMgPz8ge307XG5cdFx0Y29uc3QgdXBkYXRlcyA9IEFyci5lbnN1cmUoa2V5cykubWFwKChrZXkpID0+IHtcblx0XHRcdHJldHVybiBrZXlUeXBlID09PSBcImZpbGVLZXlcIiA/IHtcblx0XHRcdFx0ZmlsZUtleToga2V5LFxuXHRcdFx0XHRhY2xcblx0XHRcdH0gOiB7XG5cdFx0XHRcdGN1c3RvbUlkOiBrZXksXG5cdFx0XHRcdGFjbFxuXHRcdFx0fTtcblx0XHR9KTtcblx0XHRjb25zdCByZXNwb25zZVNjaGVtYSA9IFMuU3RydWN0KHsgc3VjY2VzczogUy5Cb29sZWFuIH0pO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni91cGRhdGVBQ0xcIiwgeyB1cGRhdGVzIH0sIHJlc3BvbnNlU2NoZW1hKS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcInVwZGF0ZUFDTFwiKSkpO1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3NlcnZlci50c1xuY29uc3QgY3JlYXRlVXBsb2FkdGhpbmcgPSAob3B0cykgPT4gY3JlYXRlQnVpbGRlcihvcHRzKTtcbmNvbnN0IGNyZWF0ZVJvdXRlSGFuZGxlciA9IChvcHRzKSA9PiB7XG5cdHJldHVybiBtYWtlQWRhcHRlckhhbmRsZXIoKGV2KSA9PiBFZmZlY3Quc3VjY2VlZCh7IHJlcTogXCJyZXF1ZXN0XCIgaW4gZXYgPyBldi5yZXF1ZXN0IDogZXYgfSksIChldikgPT4gRWZmZWN0LnN1Y2NlZWQoXCJyZXF1ZXN0XCIgaW4gZXYgPyBldi5yZXF1ZXN0IDogZXYpLCBvcHRzLCBcInNlcnZlclwiKTtcbn07XG5jb25zdCBleHRyYWN0Um91dGVyQ29uZmlnJDEgPSAocm91dGVyKSA9PiBFZmZlY3QucnVuU3luYyhleHRyYWN0Um91dGVyQ29uZmlnKHJvdXRlcikpO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFVUQXBpLCBVVEZpbGUsIFVURmlsZXMsIFVwbG9hZFRoaW5nRXJyb3IsIGNyZWF0ZUJ1aWxkZXIsIGNyZWF0ZVJvdXRlSGFuZGxlciwgY3JlYXRlVXBsb2FkdGhpbmcsIFVUUmVnaW9uIGFzIGV4cGVyaW1lbnRhbF9VVFJlZ2lvbiwgZXh0cmFjdFJvdXRlckNvbmZpZyQxIGFzIGV4dHJhY3RSb3V0ZXJDb25maWcsIG1ha2VBZGFwdGVySGFuZGxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/uploadthing/server/index.js\n");

/***/ })

};
;